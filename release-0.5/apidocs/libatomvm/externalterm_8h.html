<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AtomVM: /Users/fadushin/work/src/github/atomvm/AtomVM/src/libAtomVM/externalterm.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AtomVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_71a31c0df5161b11b9c2da40f7f3343f.html">libAtomVM</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">externalterm.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>External term deserialization functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="term_8h_source.html">term.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for externalterm.h:</div>
<div class="dyncontent">
<div class="center"><img src="externalterm_8h__incl.png" border="0" usemap="#a_2_users_2fadushin_2work_2src_2github_2atomvm_2_atom_v_m_2src_2lib_atom_v_m_2externalterm_8h" alt=""/></div>
<map name="a_2_users_2fadushin_2work_2src_2github_2atomvm_2_atom_v_m_2src_2lib_atom_v_m_2externalterm_8h" id="a_2_users_2fadushin_2work_2src_2github_2atomvm_2_atom_v_m_2src_2lib_atom_v_m_2externalterm_8h">
<area shape="rect" title="External term deserialization functions." alt="" coords="306,5,505,61"/>
<area shape="rect" href="term_8h.html" title="term manipulation functions" alt="" coords="376,109,435,136"/>
<area shape="rect" title=" " alt="" coords="5,259,80,285"/>
<area shape="rect" title=" " alt="" coords="346,333,411,360"/>
<area shape="rect" title=" " alt="" coords="571,184,632,211"/>
<area shape="rect" title=" " alt="" coords="165,408,229,435"/>
<area shape="rect" title=" " alt="" coords="657,184,722,211"/>
<area shape="rect" href="memory_8h_source.html" title=" " alt="" coords="366,184,445,211"/>
<area shape="rect" href="term__typedef_8h.html" title="term type definition" alt="" coords="416,259,525,285"/>
<area shape="rect" href="utils_8h.html" title="Misc functions and macros." alt="" coords="550,259,607,285"/>
<area shape="rect" href="refc__binary_8h_source.html" title=" " alt="" coords="129,184,223,211"/>
<area shape="rect" title=" " alt="" coords="439,333,503,360"/>
<area shape="rect" href="list_8h_source.html" title=" " alt="" coords="169,259,220,285"/>
<area shape="rect" href="linkedlist_8h.html" title="Linked list manipulation functions." alt="" coords="155,333,239,360"/>
</map>
</div>
</div>
<p><a href="externalterm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a7b610ef1bb7437f006b44fb6c2c5b173"><td class="memItemLeft" align="right" valign="top"><a id="a7b610ef1bb7437f006b44fb6c2c5b173"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>ExternalTermResult</b> { <b>EXTERNAL_TERM_OK</b> = 0
, <b>EXTERNAL_TERM_BAD_ARG</b> = 1
, <b>EXTERNAL_TERM_MALLOC</b> = 2
, <b>EXTERNAL_TERM_HEAP_ALLOC</b> = 3
 }</td></tr>
<tr class="separator:a7b610ef1bb7437f006b44fb6c2c5b173"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6ac780e982e9816644cb6765dc943ab3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="externalterm_8h.html#a6ac780e982e9816644cb6765dc943ab3">externalterm_to_term</a> (const void *external_term, <a class="el" href="struct_context.html">Context</a> *ctx, int use_heap_fragment)</td></tr>
<tr class="memdesc:a6ac780e982e9816644cb6765dc943ab3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a term from external term data.  <a href="externalterm_8h.html#a6ac780e982e9816644cb6765dc943ab3">More...</a><br /></td></tr>
<tr class="separator:a6ac780e982e9816644cb6765dc943ab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad75a4b6a409b2830a1235ed754526269"><td class="memItemLeft" align="right" valign="top">enum ExternalTermResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="externalterm_8h.html#ad75a4b6a409b2830a1235ed754526269">externalterm_from_binary</a> (<a class="el" href="struct_context.html">Context</a> *ctx, <a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> *dst, <a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> binary, size_t *bytes_read, size_t num_extra_terms)</td></tr>
<tr class="memdesc:ad75a4b6a409b2830a1235ed754526269"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a term from a binary.  <a href="externalterm_8h.html#ad75a4b6a409b2830a1235ed754526269">More...</a><br /></td></tr>
<tr class="separator:ad75a4b6a409b2830a1235ed754526269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac206e81a0af456ae80d093af7b255a82"><td class="memItemLeft" align="right" valign="top"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="externalterm_8h.html#ac206e81a0af456ae80d093af7b255a82">externalterm_to_binary</a> (<a class="el" href="struct_context.html">Context</a> *ctx, <a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> t)</td></tr>
<tr class="memdesc:ac206e81a0af456ae80d093af7b255a82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a binary from a term.  <a href="externalterm_8h.html#ac206e81a0af456ae80d093af7b255a82">More...</a><br /></td></tr>
<tr class="separator:ac206e81a0af456ae80d093af7b255a82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>External term deserialization functions. </p>
<p>This header provides external term deserialization functions. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad75a4b6a409b2830a1235ed754526269"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad75a4b6a409b2830a1235ed754526269">&#9670;&nbsp;</a></span>externalterm_from_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum ExternalTermResult externalterm_from_binary </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_context.html">Context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a>&#160;</td>
          <td class="paramname"><em>binary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>bytes_read</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_extra_terms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a term from a binary. </p>
<p>Deserialize a binary term that stores term data in Erlang external term format, and instantiate the serialized terms. The heap from the context will be used to allocate the instantiated terms. This function is the complement of externalterm_to_binary. WARNING: This function may call the GC, which may render the input binary invalid. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>the context that owns the memory that will be allocated. </td></tr>
    <tr><td class="paramname">binary</td><td>the binary </td></tr>
    <tr><td class="paramname">bytes_read</td><td>the number of bytes read from the input binary </td></tr>
    <tr><td class="paramname">num_extra_terms</td><td>the number of words (terms) to (possibly) allocate space for in the heap, prior to instantiating the destination term (may trigger GC). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the term deserialized from the input term, or an invalid term, if deserialization fails. </dd></dl>

</div>
</div>
<a id="ac206e81a0af456ae80d093af7b255a82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac206e81a0af456ae80d093af7b255a82">&#9670;&nbsp;</a></span>externalterm_to_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> externalterm_to_binary </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_context.html">Context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a>&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a binary from a term. </p>
<p>Serialize a term in Erlang external term format, and store the result in a binary term. The heap from the context will be used to allocate the hydrated terms. This function is the complement of externalterm_to_binary. WARNING: This function may call the GC, which may render the input binary invalid. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>the context that owns the memory that will be allocated. </td></tr>
    <tr><td class="paramname">binary</td><td>the binary </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the term deserialized from the input term, or an invalid term, if deserialization fails. </dd></dl>

</div>
</div>
<a id="a6ac780e982e9816644cb6765dc943ab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ac780e982e9816644cb6765dc943ab3">&#9670;&nbsp;</a></span>externalterm_to_term()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> externalterm_to_term </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>external_term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_context.html">Context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>use_heap_fragment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a term from external term data. </p>
<p>Deserialize an external term from external format and returns a term. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">external_term</td><td>the external term that will be deserialized. </td></tr>
    <tr><td class="paramname">ctx</td><td>the context that owns the memory that will be allocated. </td></tr>
    <tr><td class="paramname">use_heap_fragment</td><td>if non-zero, use a heap fragment to store the generated terms. Otherwise, use the heap in the provided context. Note that when using the context heap, this function may call the GC, if there is insufficient space to store the generated terms. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a term. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
