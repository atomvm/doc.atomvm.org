

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Differences between AtomVM and BEAM &mdash; AtomVM 0.7.0-dev+git.aa7ac0f8 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=e925141f" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="canonical" href="https://doc.atomvm.org/main/differences-with-beam.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=81d83b8b"></script>
      <script src="_static/doctools.js?v=fd6eb6e6"></script>
      <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Stubbed Functions" href="stubbed-functions.html" />
    <link rel="prev" title="Distributed Erlang" href="distributed-erlang.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/avm_logo_banner.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="welcome-to-atomvm.html">Welcome to AtomVM!</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started-guide.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="atomvm-tooling.html">AtomVM Tooling</a></li>
<li class="toctree-l1"><a class="reference internal" href="programmers-guide.html">Programmers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="network-programming-guide.html">Network Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributed-erlang.html">Distributed Erlang</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Differences between AtomVM and BEAM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#principles">Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#determining-if-code-is-run-by-atomvm-or-beam">Determining if code is run by AtomVM or BEAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#known-limitations-of-the-vm">Known limitations of the VM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#integer-precision-and-overflow">Integer precision and overflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#integer-limits">Integer limits</a></li>
<li class="toctree-l4"><a class="reference internal" href="#overflow-errors">Overflow errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bitwise-operations-edge-cases">Bitwise operations edge cases</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#bit-syntax">Bit syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-reloading">Code reloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#distribution">Distribution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#known-limitations-of-the-standard-library">Known limitations of the standard library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#otp-architecture">OTP architecture</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memory-usage-and-speed">Memory usage and speed</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-differences">Other differences</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nifs-and-ports">NIFs and Ports</a></li>
<li class="toctree-l3"><a class="reference internal" href="#beam-file-compatibility">BEAM file compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stacktraces-and-exceptions">Stacktraces and exceptions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="stubbed-functions.html">Stubbed Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="build-instructions.html">Build Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="atomvm-internals.html">AtomVM Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="memory-management.html">Memory Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="packbeam-format.html">Packbeam Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference-documentation.html">API Reference Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="C_CODING_STYLE.html">AtomVM C Coding Style Guide (AVMCCS Guide)</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AtomVM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Differences between AtomVM and BEAM</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <!--
 Copyright 2025 Paul Guyot <pguyot@kallisys.net>

 SPDX-License-Identifier: Apache-2.0 OR LGPL-2.1-or-later
-->
<section id="differences-between-atomvm-and-beam">
<h1>Differences between AtomVM and BEAM<a class="headerlink" href="#differences-between-atomvm-and-beam" title="Link to this heading"></a></h1>
<p>BEAM users may be surprised by limitations or differences between AtomVM and BEAM, whether they
write Erlang, Elixir or Gleam code.</p>
<p>This document describes the current well known differences.</p>
<section id="principles">
<h2>Principles<a class="headerlink" href="#principles" title="Link to this heading"></a></h2>
<p>AtomVM is designed to be compatible with the BEAM as long as it makes sense on microcontrollers or
environments such as Web Assembly.</p>
<p>One should distinguish features of the VM itself from features of the standard library. AtomVM
team will never reimplement the full OTP standard library, as this full library is too large for
small embedded devices. Still, most modules of the OTP standard library can be executed by AtomVM.
Typically, it is possible to run an Elixir or an
<a class="reference external" href="https://github.com/pguyot/atomvm_shell">Erlang REPL</a> with the appropriate OTP and Elixir standard
library modules.</p>
<p>AtomVM tests (of the VM as well as the standard library) are typically executed with BEAM to
ensure compatibility beyond BEAM documented features. The Continuous Integration environment runs
these tests with a wide range of BEAM versions.</p>
</section>
<section id="determining-if-code-is-run-by-atomvm-or-beam">
<h2>Determining if code is run by AtomVM or BEAM<a class="headerlink" href="#determining-if-code-is-run-by-atomvm-or-beam" title="Link to this heading"></a></h2>
<p>One can use <code class="docutils literal notranslate"><span class="pre">erlang:system_info(machine)</span></code> to find out if the code is executed by AtomVM or BEAM.</p>
<p>BEAM returns <code class="docutils literal notranslate"><span class="pre">&quot;BEAM&quot;</span></code> while AtomVM returns <code class="docutils literal notranslate"><span class="pre">&quot;ATOM&quot;</span></code>.</p>
</section>
<section id="known-limitations-of-the-vm">
<h2>Known limitations of the VM<a class="headerlink" href="#known-limitations-of-the-vm" title="Link to this heading"></a></h2>
<p>AtomVM does not implement some key features of the BEAM. Some of these limitations are being
worked on and this list might be outdated. Do not hesitate to check GitHub issues or contact us
when in doubt.</p>
<section id="integer-precision-and-overflow">
<h3>Integer precision and overflow<a class="headerlink" href="#integer-precision-and-overflow" title="Link to this heading"></a></h3>
<p>AtomVM supports integers up to 256-bit with an additional sign flag, while BEAM supports unlimited
precision integers. This fundamental difference has several implications:</p>
<section id="integer-limits">
<h4>Integer limits<a class="headerlink" href="#integer-limits" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Maximum value</strong>: <code class="docutils literal notranslate"><span class="pre">16#FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</span></code> (256
ones, which equals <code class="docutils literal notranslate"><span class="pre">2^256</span> <span class="pre">-</span> <span class="pre">1</span></code>)</p></li>
<li><p><strong>Minimum value</strong>: <code class="docutils literal notranslate"><span class="pre">-16#FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</span></code> (which
equals <code class="docutils literal notranslate"><span class="pre">-(2^256</span> <span class="pre">-</span> <span class="pre">1)</span></code>)</p></li>
</ul>
<p>Note that AtomVM does not use two’s complement for big integers. The sign is stored as a separate
flag, which means <code class="docutils literal notranslate"><span class="pre">INTEGER_MAX</span> <span class="pre">=</span> <span class="pre">-INTEGER_MIN</span></code>.</p>
</section>
<section id="overflow-errors">
<h4>Overflow errors<a class="headerlink" href="#overflow-errors" title="Link to this heading"></a></h4>
<p>Unlike BEAM, AtomVM raises <code class="docutils literal notranslate"><span class="pre">overflow</span></code> errors when integer operations exceed 256-bit capacity:</p>
<div class="highlight-erlang notranslate"><div class="highlight"><pre><span></span><span class="nv">IntMax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16#FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</span><span class="p">,</span>
<span class="c">% The following will raise an overflow error on AtomVM, but succeeds on BEAM:</span>
<span class="nv">Result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">IntMax</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="c">% overflow error</span>

<span class="c">% Also applies to subtraction and multiplication:</span>
<span class="p">-</span><span class="err">I</span><span class="ni">ntMax</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="c">% overflow error</span>
<span class="nv">IntMax</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">   </span><span class="c">% overflow error</span>
</pre></div>
</div>
<p>Handling overflows:</p>
<div class="highlight-erlang notranslate"><div class="highlight"><pre><span></span><span class="nf">safe_calc</span><span class="p">(</span><span class="nv">MaybeOvfFun</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="nv">MaybeOvfFun</span><span class="p">()</span><span class="w"> </span><span class="k">of</span>
<span class="w">        </span><span class="nv">I</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nb">is_integer</span><span class="p">(</span><span class="nv">I</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">ok</span><span class="p">,</span><span class="w"> </span><span class="nv">I</span><span class="p">}</span>
<span class="w">    </span><span class="k">catch</span>
<span class="w">        </span><span class="nn">error</span><span class="p">:</span><span class="n">overflow</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">overflow</span><span class="p">}</span>
<span class="w">    </span><span class="k">end</span><span class="p">.</span>

<span class="c">% Returns `{ok, Result}`, Result is a 255 bit integer</span>
<span class="nf">safe_calc</span><span class="p">(</span><span class="k">fun</span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">factorial</span><span class="p">(</span><span class="mi">57</span><span class="p">)</span><span class="w"> </span><span class="k">end</span><span class="p">).</span>

<span class="c">% Returns `{error, overflow}`, since 261 bit integers are not allowed</span>
<span class="nf">safe_calc</span><span class="p">(</span><span class="k">fun</span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">factorial</span><span class="p">(</span><span class="mi">58</span><span class="p">)</span><span class="w"> </span><span class="k">end</span><span class="p">).</span>
</pre></div>
</div>
<p>Overflow can also occur with:</p>
<ul class="simple">
<li><p>Bit shift left operations: <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">bsl</span> <span class="pre">257</span></code> raises overflow (shifting beyond the 256-bit boundary).
When shifting values with multiple set bits, mask first to prevent overflow: <code class="docutils literal notranslate"><span class="pre">16#FFFF</span> <span class="pre">bsl</span> <span class="pre">252</span></code>
would overflow, but <code class="docutils literal notranslate"><span class="pre">(16#FFFF</span> <span class="pre">band</span> <span class="pre">0xF)</span> <span class="pre">bsl</span> <span class="pre">252</span></code> succeeds</p></li>
<li><p>Float to integer conversions: <code class="docutils literal notranslate"><span class="pre">ceil/1</span></code>, <code class="docutils literal notranslate"><span class="pre">round/1</span></code>, etc. when the result exceeds 256-bit</p></li>
</ul>
<p>Note: While BEAM raises <code class="docutils literal notranslate"><span class="pre">system_limit</span></code> error for operations like
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">bsl</span> <span class="pre">2000000000000000000000000000000000</span></code>, AtomVM consistently uses <code class="docutils literal notranslate"><span class="pre">overflow</span></code> error for all
integer capacity violations.</p>
<p>Note: Integer literals larger than 256 bits in source code will compile successfully with
Erlang/Elixir compilers, but the resulting BEAM files will fail to load on AtomVM. This also
applies to compile-time constant expressions that evaluate to integers exceeding 256 bits, such as
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">bsl</span> <span class="pre">300</span></code>. These expressions are evaluated by the compiler and stored as constants in the BEAM
file, causing the same load-time failure. Always ensure that integer constants in your code are
within AtomVM’s supported range.</p>
<p>Note: The <code class="docutils literal notranslate"><span class="pre">erlang:binary_to_term/1,2</span></code> function raises a <code class="docutils literal notranslate"><span class="pre">badarg</span></code> error when attempting to
deserialize binary data containing an integer larger than 256 bits. This differs from BEAM, which
can deserialize integers of any size. Applications that exchange serialized terms with BEAM nodes
should be aware of this limitation.</p>
<p>Note: String and binary conversion functions such as <code class="docutils literal notranslate"><span class="pre">erlang:binary_to_integer/1,2</span></code>,
<code class="docutils literal notranslate"><span class="pre">erlang:list_to_integer/1,2</span></code>, and Elixir’s <code class="docutils literal notranslate"><span class="pre">String.to_integer/1,2</span></code> raise a <code class="docutils literal notranslate"><span class="pre">badarg</span></code> error when the
input represents an integer exceeding 256 bits. For example,
<code class="docutils literal notranslate"><span class="pre">erlang:binary_to_integer(&lt;&lt;&quot;10000000000000000000000000000000000000000000000000000000000000000&quot;&gt;&gt;,</span> <span class="pre">16)</span></code>
will fail with <code class="docutils literal notranslate"><span class="pre">badarg</span></code> on AtomVM, while it succeeds on BEAM. Applications parsing user input or
external data should validate that numeric values fall within AtomVM’s supported range.</p>
</section>
<section id="bitwise-operations-edge-cases">
<h4>Bitwise operations edge cases<a class="headerlink" href="#bitwise-operations-edge-cases" title="Link to this heading"></a></h4>
<p>The 256-bit limitation creates specific edge cases with bitwise operations that would require 257
bits:</p>
<p>On BEAM (unlimited precision), returns <code class="docutils literal notranslate"><span class="pre">-IntMax</span> <span class="pre">-</span> <span class="pre">1</span></code> (requires 257 bits):</p>
<div class="highlight-erlang notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">IntMax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16#FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</span><span class="p">.</span>
<span class="mi">115792089237316195423570985008687907853269984665640564039457584007913129639935</span>
<span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">integer_to_binary</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="ow">bxor</span><span class="w"> </span><span class="nv">IntMax</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">).</span>
<span class="o">&lt;&lt;</span><span class="s">&quot;-10000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="o">&gt;&gt;</span>
<span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">integer_to_binary</span><span class="p">(</span><span class="ow">bnot</span><span class="w"> </span><span class="nv">IntMax</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">).</span>
<span class="o">&lt;&lt;</span><span class="s">&quot;-10000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="o">&gt;&gt;</span>
</pre></div>
</div>
<p>On AtomVM (256-bit limited), returns 0 (cannot represent 257th bit):</p>
<div class="highlight-erlang notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">IntMax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16#FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</span><span class="p">.</span>
<span class="mi">115792089237316195423570985008687907853269984665640564039457584007913129639935</span>
<span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="ow">bxor</span><span class="w"> </span><span class="nv">IntMax</span><span class="p">.</span>
<span class="mi">0</span>
<span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="ow">bnot</span><span class="w"> </span><span class="nv">IntMax</span><span class="p">.</span>
<span class="mi">0</span>
</pre></div>
</div>
<p>This occurs because AtomVM cannot create an integer with the 257th bit set to 1 with negative sign.
Since <code class="docutils literal notranslate"><span class="pre">-0</span></code> is not allowed, the result is normalized to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
</section>
<section id="bit-syntax">
<h3>Bit syntax<a class="headerlink" href="#bit-syntax" title="Link to this heading"></a></h3>
<p>AtomVM supports binaries, binary construction and binary pattern matching. Bit syntax (i.e. with
sizes not a multiple of 8) is only supported as long as they would not generate bitstrings, i.e.
binaries with a number if bits that are not multiple of 8.</p>
<p>The following is supported:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;&lt;X:3, Y:5&gt;&gt; = &lt;&lt;N&gt;&gt;
</pre></div>
</div>
<p>The following is not:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;&lt;X:3&gt;&gt;
</pre></div>
</div>
</section>
<section id="code-reloading">
<h3>Code reloading<a class="headerlink" href="#code-reloading" title="Link to this heading"></a></h3>
<p>AtomVM does not support code reloading yet. Few items are prioritized before this feature but it
is part of the roadmap.</p>
</section>
<section id="distribution">
<h3>Distribution<a class="headerlink" href="#distribution" title="Link to this heading"></a></h3>
<p>AtomVM support for distribution is a work in progress. Many operations are supported but some key
features such as node monitoring are not implemented yet.</p>
<p>It is currently possible to connect a BEAM node with an AtomVM node.</p>
</section>
</section>
<section id="known-limitations-of-the-standard-library">
<h2>Known limitations of the standard library<a class="headerlink" href="#known-limitations-of-the-standard-library" title="Link to this heading"></a></h2>
<p>AtomVM standard library is extremely limited and while programs written for AtomVM can be run
using OTP standard library if they do not call microcontroller-specific APIs, the opposite is not
true. A program written for Erlang/OTP is very unlikely runnable on AtomVM without a lot of
changes.</p>
<p>Please check AtomVM’s <a class="reference internal" href="apidocs/erlang/estdlib/README.html"><span class="std std-doc">standard library documentation</span></a> to find out differences
and limitations of each module.</p>
<p>See also <a class="reference internal" href="stubbed-functions.html"><span class="std std-doc">stubbed functions</span></a> list.</p>
<section id="otp-architecture">
<h3>OTP architecture<a class="headerlink" href="#otp-architecture" title="Link to this heading"></a></h3>
<p>Support for OTP applications is currently very limited. <code class="docutils literal notranslate"><span class="pre">gen_server</span></code>, <code class="docutils literal notranslate"><span class="pre">gen_statem</span></code>, <code class="docutils literal notranslate"><span class="pre">supervisor</span></code>,
<code class="docutils literal notranslate"><span class="pre">proc_lib</span></code> and <code class="docutils literal notranslate"><span class="pre">sys</span></code> only implement a subset of what OTP provides.</p>
</section>
</section>
<section id="memory-usage-and-speed">
<h2>Memory usage and speed<a class="headerlink" href="#memory-usage-and-speed" title="Link to this heading"></a></h2>
<p>AtomVM is optimized for memory usage and is much slower than BEAM, even with JIT compiler enabled.</p>
<p>However, AtomVM uses much less RAM. Process heap initial size and process heap growth strategy are
much more agressive on AtomVM, and garbage collector runs much more frequently. If speed matters,
it is possible to use a process heap growth strategy inspired by BEAM’s with an appropriate option
passed to <code class="docutils literal notranslate"><span class="pre">spawn_opt</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>spawn_opt(
    fun() -&gt; ... end,
    [{atomvm_heap_growth, fibonacci}]
)
</pre></div>
</div>
</section>
<section id="other-differences">
<h2>Other differences<a class="headerlink" href="#other-differences" title="Link to this heading"></a></h2>
<section id="nifs-and-ports">
<h3>NIFs and Ports<a class="headerlink" href="#nifs-and-ports" title="Link to this heading"></a></h3>
<p>AtomVM supports NIFs and Ports with an API similar but different from BEAM’s. However NIFs
and Ports need to be linked with the VM as most embedded environments do not support dynamic
linking.</p>
<p>AtomVM does not implement the onload opcode and therefore the -onload attribute, which is mostly
used for NIFs support on BEAM.</p>
<p>AtomVM doesn’t have any dirty scheduler for dirty NIFs and NIFs should return quickly to avoid
locking the VM.</p>
<p>Ports are also executed by the schedulers and should return quickly.</p>
</section>
<section id="beam-file-compatibility">
<h3>BEAM file compatibility<a class="headerlink" href="#beam-file-compatibility" title="Link to this heading"></a></h3>
<p>AtomVM can run BEAM files generated by <code class="docutils literal notranslate"><span class="pre">erlc</span></code> compiler from OTP21 to the latest master version,
while BEAM cannot and often requires to recompile.</p>
</section>
<section id="stacktraces-and-exceptions">
<h3>Stacktraces and exceptions<a class="headerlink" href="#stacktraces-and-exceptions" title="Link to this heading"></a></h3>
<p>Stacktraces and exception error messages on AtomVM are not as detailed as on BEAM. There is no <code class="docutils literal notranslate"><span class="pre">error_info</span></code> in AtomVM exceptions.
For example a <code class="docutils literal notranslate"><span class="pre">function_clause</span></code> error will not include the arguments that did not match any clause.</p>
<p>Additionally, some error tags can differ. For example, calling an unserialized function (using <code class="docutils literal notranslate"><span class="pre">binary_to_term/1</span></code>)
from a module that exists in another version may error <code class="docutils literal notranslate"><span class="pre">badfun</span></code> with BEAM and will error <code class="docutils literal notranslate"><span class="pre">undef</span></code> with AtomVM.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="distributed-erlang.html" class="btn btn-neutral float-left" title="Distributed Erlang" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="stubbed-functions.html" class="btn btn-neutral float-right" title="Stubbed Functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2024, AtomVM.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!--
 Copyright 2023 Winford (Uncle Grumpy) <winford@object.stream>

 SPDX-License-Identifier: Apache-2.0 OR LGPL-2.1-or-later

 Based on the work of  Michael Altfield:
 https://tech.michaelaltfield.net/2020/07/18/sphinx-rtd-github-pages-1
-->



  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-download"></span><span class="fa fa-book"> AtomVM Docs version:</span>
      main branch (unstable)
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <dl>
        <dt><span class="fa fa-book"> Versions</span></dt>
        
          
          <dd><a href="/v0.5.0/">v0.5.0</a></dd>
          
        
          
          <dd><a href="/v0.6.0/">v0.6.0</a></dd>
          
        
          
          <dd><a href="/v0.6.1/">v0.6.1</a></dd>
          
        
          
          <dd><a href="/v0.6.2/">v0.6.2</a></dd>
          
        
          
          <dd><a href="/v0.6.3/">v0.6.3</a></dd>
          
        
          
          <dd><a href="/v0.6.4/">v0.6.4</a></dd>
          
        
          
          <dd><a href="/v0.6.5/">v0.6.5</a></dd>
          
        
          
          <dd><a href="/v0.6.6/">v0.6.6</a></dd>
          
        
          
          <dd><a href="/release-0.6/">release-0.6 branch (unreleased)</a></dd>
          
        
           <strong> 
          <dd><a href="/main/">main branch (unstable)</a></dd>
           </strong> 
        
      </dl>
      
      
      <dl>
        <dt><span class="fa fa-download"> Downloads</span></dt>
        
          <dd><a href="/main/epub/AtomVM-main.epub">epub</a></dd>
        
      </dl>
      
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>