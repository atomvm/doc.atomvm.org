

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AtomVM C Coding Style Guide (AVMCCS Guide) &mdash; AtomVM 0.7.0-dev+git.211fc3ef documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=e925141f" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="canonical" href="https://doc.atomvm.org/main/C_CODING_STYLE.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=6a97982b"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Changelog" href="CHANGELOG.html" />
    <link rel="prev" title="Contributing" href="CONTRIBUTING.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/avm_logo_banner.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="welcome-to-atomvm.html">Welcome to AtomVM!</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started-guide.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="atomvm-tooling.html">AtomVM Tooling</a></li>
<li class="toctree-l1"><a class="reference internal" href="programmers-guide.html">Programmers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="network-programming-guide.html">Network Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributed-erlang.html">Distributed Erlang</a></li>
<li class="toctree-l1"><a class="reference internal" href="differences-with-beam.html">Differences between AtomVM and BEAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="build-instructions.html">Build Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="atomvm-internals.html">AtomVM Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="memory-management.html">Memory Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="packbeam-format.html">Packbeam Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference-documentation.html">API Reference Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">AtomVM C Coding Style Guide (AVMCCS Guide)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#modern-c-practices">Modern C Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#indentation">Indentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#style-rules">Style Rules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#formatting">Formatting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-rules">General Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#whitespace-rules">Whitespace Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#empty-lines-and-spacing">Empty Lines and Spacing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spacing">Spacing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#language-constructs">Language Constructs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#declarations">Declarations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#declaration-order-avmccs-l004">Declaration Order [AVMCCS-L004]</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#operators">Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#increment-decrement-usage-avmccs-l008">Increment/Decrement Usage [AVMCCS-L008]</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#control-flow">Control Flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#early-exit-over-nesting-avmccs-l009">Early Exit Over Nesting [AVMCCS-L009]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#switch-over-if-else-chains-avmccs-l010">Switch Over If-Else Chains [AVMCCS-L010]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#goto-for-cleanup-avmccs-l011">Goto for Cleanup [AVMCCS-L011]</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#static-assertions">Static Assertions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#macro-safety">Macro Safety</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#naming-conventions">Naming Conventions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#casing-rules">Casing Rules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#word-boundary-preservation-avmccs-n001">Word Boundary Preservation [AVMCCS-N001]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pascalcase">PascalCase</a></li>
<li class="toctree-l4"><a class="reference internal" href="#screaming-snake-case">SCREAMING_SNAKE_CASE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lower-snake-case">lower_snake_case</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#naming-patterns">Naming Patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#arrays-and-collections">Arrays and Collections</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conversion-functions-avmccs-n014">Conversion Functions [AVMCCS-N014]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#predicate-functions-avmccs-n015">Predicate Functions [AVMCCS-N015]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#string-and-buffer-naming-avmccs-n016">String and Buffer Naming [AVMCCS-N016]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-prefixing-avmccs-n017">Module Prefixing [AVMCCS-N017]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#static-functions-avmccs-n018">Static Functions [AVMCCS-N018]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#macros">Macros</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type-suffix-convention-avmccs-n020">Type Suffix Convention [AVMCCS-N020]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enumeration-namespace-management-avmccs-n021">Enumeration Namespace Management [AVMCCS-N021]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enum-and-flag-naming">Enum and Flag Naming</a></li>
<li class="toctree-l4"><a class="reference internal" href="#measurement-units-avmccs-n024">Measurement Units [AVMCCS-N024]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#size-terminology">Size Terminology</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api-design">API Design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#function-parameter-ordering-avmccs-a001">Function Parameter Ordering [AVMCCS-A001]</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parameter-types">Parameter Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#key-principle">Key Principle</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#api-clarity">API Clarity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prefer-enums-over-bools-avmccs-a002">Prefer Enums Over Bools [AVMCCS-A002]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#return-values-for-error-handling-avmccs-a003">Return Values for Error Handling [AVMCCS-A003]</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#array-vs-pointer-syntax-avmccs-a004">Array vs Pointer Syntax [AVMCCS-A004]</a></li>
<li class="toctree-l3"><a class="reference internal" href="#global-state-management">Global State Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flag-type-design">Flag Type Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="#struct-parameter-passing">Struct Parameter Passing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#type-selection-and-usage">Type Selection and Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#integer-type-selection">Integer Type Selection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#size-and-index-types-avmccs-t001">Size and Index Types [AVMCCS-T001]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pointer-arithmetic-avmccs-t002">Pointer Arithmetic [AVMCCS-T002]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-width-types-avmccs-t003">Fixed-Width Types [AVMCCS-T003]</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pointer-type-usage-avmccs-t004">Pointer Type Usage [AVMCCS-T004]</a></li>
<li class="toctree-l3"><a class="reference internal" href="#const-correctness">Const Correctness</a></li>
<li class="toctree-l3"><a class="reference internal" href="#typedef-usage">Typedef Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#forward-declarations">Forward Declarations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memory-layout">Memory Layout</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#structure-alignment">Structure Alignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bit-field-conventions">Bit Field Conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#external-data-considerations">External Data Considerations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#object-management">Object Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memory-management">Memory Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#heap-allocation">Heap Allocation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stack-allocation-limits">Stack Allocation Limits</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#initialization-and-cleanup-patterns">Initialization and Cleanup Patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simple-initialization-avmccs-m011">Simple Initialization [AVMCCS-M011]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stack-friendly-resource-management-avmccs-m012">Stack-Friendly Resource Management [AVMCCS-M012]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#heap-allocated-objects-avmccs-m013">Heap-Allocated Objects [AVMCCS-M013]</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#usage-guidelines">Usage Guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#documentation-and-comments">Documentation and Comments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#documentation-philosophy">Documentation Philosophy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-to-document">What to Document</a></li>
<li class="toctree-l4"><a class="reference internal" href="#public-vs-private-apis">Public vs Private APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#documentation-levels">Documentation Levels</a></li>
<li class="toctree-l4"><a class="reference internal" href="#key-documentation-patterns">Key Documentation Patterns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#code-comments">Code Comments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#comment-style">Comment Style</a></li>
<li class="toctree-l4"><a class="reference internal" href="#comment-tags">Comment Tags</a></li>
<li class="toctree-l4"><a class="reference internal" href="#what-to-avoid">What to Avoid</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#file-structure">File Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#style-exception-documentation">Style Exception Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#header-files-h">Header Files (.h)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#source-files-c">Source Files (.c)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#include-guards">Include Guards</a></li>
<li class="toctree-l3"><a class="reference internal" href="#include-ordering">Include Ordering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#header-file-naming">Header File Naming</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rationale">Rationale</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#type-safety-through-explicit-interfaces">Type Safety Through Explicit Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="#type-safety-through-naming">Type Safety Through Naming</a></li>
<li class="toctree-l3"><a class="reference internal" href="#type-suffix-convention-and-posix">Type Suffix Convention and POSIX</a></li>
<li class="toctree-l3"><a class="reference internal" href="#namespace-simulation">Namespace Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implementation-flexibility">Implementation Flexibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visual-type-distinction">Visual Type Distinction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enumeration-vs-flag-semantics">Enumeration vs Flag Semantics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#early-return-pattern">Early Return Pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="#goto-for-cleanup">Goto for Cleanup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#context-structs-over-globals">Context Structs Over Globals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#separate-flag-types">Separate Flag Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation-as-contract">Documentation as Contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="#avoiding-documentation-debt">Avoiding Documentation Debt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#public-private-distinction">Public/Private Distinction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#quick-reference">Quick Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formatting-rules">Formatting Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spacing-rules">Spacing Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#empty-line-guidelines">Empty Line Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Language Constructs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Naming Conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#acronym-handling">Acronym Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#declaration-order">Declaration Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flag-type-summary">Flag Type Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collection-naming">Collection Naming</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-naming-patterns">Function Naming Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Object Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pointer-type-usage">Pointer Type Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#const-placement">Const Placement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#control-flow-guidelines">Control Flow Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-design-patterns">API Design Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#type-selection">Type Selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Macro Safety</a></li>
<li class="toctree-l3"><a class="reference internal" href="#memory-guidelines">Memory Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">Static Assertions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#header-naming-convention">Header Naming Convention</a></li>
<li class="toctree-l3"><a class="reference internal" href="#common-unit-suffixes">Common Unit Suffixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#typedef-and-forward-declarations">Typedef and Forward Declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#external-data-handling">External Data Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Comment Tags</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation-guidelines">Documentation Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-organization">File Organization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#appendix-tool-configuration">Appendix: Tool Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#clang-format">clang-format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#limitations-of-clang-format">Limitations of clang-format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clang-tidy-configuration">clang-tidy Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#limitations-of-clang-tidy">Limitations of clang-tidy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#editor-integration">Editor Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#git-hooks">Git Hooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#static-analysis">Static Analysis</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#appendix-doxygen-documentation-examples">Appendix: Doxygen Documentation Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-predicate-documentation">Basic Predicate Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#standard-function-documentation">Standard Function Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#complex-api-documentation-with-safety-requirements">Complex API Documentation with Safety Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#memory-management-documentation">Memory Management Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#array-parameter-documentation">Array Parameter Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#macro-documentation-examples">Macro Documentation Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-level-documentation">Module-Level Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#error-handling-documentation">Error Handling Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rule-index">Rule Index</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AtomVM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">AtomVM C Coding Style Guide (AVMCCS Guide)</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <!--
 Copyright 2025 Davide Bettio <davide@uninstall.it>

 SPDX-License-Identifier: Apache-2.0 OR LGPL-2.1-or-later
-->
<section id="atomvm-c-coding-style-guide-avmccs-guide">
<h1>AtomVM C Coding Style Guide (AVMCCS Guide)<a class="headerlink" href="#atomvm-c-coding-style-guide-avmccs-guide" title="Link to this heading"></a></h1>
<p><strong>Version</strong>: 1.0</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>This document establishes coding conventions for modern C projects, emphasizing clarity, consistency, and best practices. The style prioritizes readability and maintainability while leveraging C’s type system for enhanced safety and expressiveness.</p>
<p>Each rule has a unique identifier (e.g., AVMCCS-L001) for easy reference in reviews and tooling.</p>
<p>This guide uses US English spelling conventions (e.g., “Color” not “Colour”, “initialize” not “initialise”).</p>
<p><strong>Note</strong>: This guide complements but does not replace domain-specific standards. For safety-critical systems, applicable standards like MISRA C take precedence. This guide’s purpose focuses on coding style and common practices rather than comprehensive coverage of all C programming topics.</p>
<p><strong>Note on examples</strong>: Code snippets throughout this guide are simplified to illustrate specific concepts. They may omit elements required by other rules (module prefixes, static keywords, error handling, etc.) for clarity. Always apply all relevant rules when writing production code.</p>
<section id="modern-c-practices">
<h3>Modern C Practices<a class="headerlink" href="#modern-c-practices" title="Link to this heading"></a></h3>
<p>This guide assumes C11 or later (C99 at minimum):</p>
<ul>
<li><p><strong>Declare variables where needed</strong>, not just at function start [AVMCCS-L001]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Declare at first use</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_name</span><span class="p">();</span>

<span class="c1">// Old style: Avoid</span>
<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">;</span>
<span class="cm">/* ... other code ... */</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Empty parameter lists</strong>: Use <code class="docutils literal notranslate"><span class="pre">(void)</span></code> for functions with no parameters [AVMCCS-L002]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Explicit zero parameters (type-safe)</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">get_count</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="c1">// Also use same style for function definitions, for improved consistency</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Bad: Old K&amp;R style - unspecified parameters (dangerous)</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">get_count</span><span class="p">();</span><span class="w">     </span><span class="c1">// Accepts ANY number of arguments!</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">();</span><span class="w">   </span><span class="c1">// No type checking at call site</span>
</pre></div>
</div>
<p><strong>Safety note</strong>: In C99/C11, <code class="docutils literal notranslate"><span class="pre">()</span></code> means “unspecified parameters” and disables type checking. The compiler won’t catch errors like <code class="docutils literal notranslate"><span class="pre">get_count(42,</span> <span class="pre">&quot;wrong&quot;)</span></code>. Always use <code class="docutils literal notranslate"><span class="pre">(void)</span></code> for zero-parameter functions.</p>
<p><strong>C23 update</strong>: C23 changes <code class="docutils literal notranslate"><span class="pre">()</span></code> to mean the same as <code class="docutils literal notranslate"><span class="pre">(void)</span></code>. However, for compatibility with C99/C11/C17, continue using <code class="docutils literal notranslate"><span class="pre">(void)</span></code>.</p>
</li>
<li><p><strong>Use modern headers</strong>: <code class="docutils literal notranslate"><span class="pre">&lt;stdint.h&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;stdbool.h&gt;</span></code>, etc. [AVMCCS-L003]</p></li>
</ul>
</section>
</section>
<section id="indentation">
<h2>Indentation<a class="headerlink" href="#indentation" title="Link to this heading"></a></h2>
<section id="style-rules">
<h3>Style Rules<a class="headerlink" href="#style-rules" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>K&amp;R style variant</strong>: [AVMCCS-F001]</p>
<ul>
<li><p>Opening braces on new line for functions, structs, enums, and unions</p></li>
<li><p>Opening braces on same line for flow control (if, for, while, switch)</p></li>
</ul>
</li>
<li><p><strong>Mandatory braces</strong>: Always use braces, even for single-statement blocks [AVMCCS-F002]</p></li>
<li><p><strong>4 spaces</strong>: Use 4 space indentation (no tabs) [AVMCCS-F003]</p></li>
</ul>
<p>Good:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">Point</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">reverse</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">reverse</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">puts</span><span class="p">(</span><span class="s">&quot;!dlroW olleH&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">puts</span><span class="p">(</span><span class="s">&quot;Hello World&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Bad:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">Point</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">reverse</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">reverse</span><span class="p">)</span>
<span class="w">        </span><span class="n">puts</span><span class="p">(</span><span class="s">&quot;!dlroW olleH&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="n">puts</span><span class="p">(</span><span class="s">&quot;Hello World&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="formatting">
<h2>Formatting<a class="headerlink" href="#formatting" title="Link to this heading"></a></h2>
<section id="general-rules">
<h3>General Rules<a class="headerlink" href="#general-rules" title="Link to this heading"></a></h3>
<ul>
<li><p><strong>Pointer placement</strong>: The <code class="docutils literal notranslate"><span class="pre">*</span></code> belongs with the variable name, not the type [AVMCCS-F004]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">;</span><span class="w">         </span><span class="c1">// Good</span>
<span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">         </span><span class="c1">// Bad</span>
</pre></div>
</div>
</li>
<li><p><strong>Variable declarations</strong>: Generally declare one variable per line [AVMCCS-F005]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Preferred: One declaration per line</span>
<span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">first</span><span class="p">;</span>
<span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">last</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">;</span>

<span class="c1">// Acceptable for tightly coupled variables</span>
<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">;</span><span class="w">        </span><span class="c1">// Loop indices</span>
<span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">dst</span><span class="p">;</span><span class="w">    </span><span class="c1">// Paired pointers</span>

<span class="c1">// Avoid mixing types or unrelated variables</span>
<span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span><span class="w">  </span><span class="c1">// Bad: confusing</span>
</pre></div>
</div>
</li>
<li><p><strong>Line length</strong>: Keep lines below 100 columns [AVMCCS-F006]</p>
<ul class="simple">
<li><p>Use intermediate variables with meaningful names to break up complex expressions [AVMCCS-F007]</p></li>
<li><p>Split long function calls across multiple lines</p></li>
</ul>
</li>
<li><p><strong>Function spacing</strong>: Separate function definitions with exactly one empty line [AVMCCS-F008]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">first_function</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// implementation</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">second_function</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// implementation</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Readability over brevity</strong>: Prefer clear, self-documenting code</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Clear intermediate variables</span>
<span class="n">DateTime</span><span class="w"> </span><span class="n">current_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_current_time</span><span class="p">();</span>
<span class="n">DateTime</span><span class="w"> </span><span class="n">deadline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">project_deadline</span><span class="p">();</span>
<span class="kt">int64_t</span><span class="w"> </span><span class="n">seconds_remaining</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date_time_diff_seconds</span><span class="p">(</span><span class="o">&amp;</span><span class="n">current_time</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">deadline</span><span class="p">);</span>

<span class="c1">// Bad: Hard to read one-liner</span>
<span class="kt">int64_t</span><span class="w"> </span><span class="n">remaining</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date_time_diff_seconds</span><span class="p">(</span><span class="o">&amp;</span><span class="n">get_current_time</span><span class="p">(),</span><span class="w"> </span><span class="o">&amp;</span><span class="n">project_deadline</span><span class="p">());</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="whitespace-rules">
<h3>Whitespace Rules<a class="headerlink" href="#whitespace-rules" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>No trailing whitespace</strong>: Lines must not end with spaces or tabs [AVMCCS-F009]</p></li>
<li><p><strong>Files end with newline</strong>: All source files must end with a newline character [AVMCCS-F010]</p></li>
<li><p><strong>Clean git commits</strong>: Configure your editor to remove trailing whitespace</p></li>
</ul>
</section>
<section id="empty-lines-and-spacing">
<h3>Empty Lines and Spacing<a class="headerlink" href="#empty-lines-and-spacing" title="Link to this heading"></a></h3>
<ul>
<li><p><strong>Return statements</strong>: Separate with empty line when function body &gt; 3 lines [AVMCCS-F011]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Empty line before return for clarity</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">calculate_result</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">process_data</span><span class="p">();</span>
<span class="w">    </span><span class="n">validate_state</span><span class="p">();</span>
<span class="w">    </span><span class="n">update_cache</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Bad: No separation</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">calculate_result</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">process_data</span><span class="p">();</span>
<span class="w">    </span><span class="n">validate_state</span><span class="p">();</span>
<span class="w">    </span><span class="n">update_cache</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Logical blocks</strong>: Use empty lines to separate steps within functions [AVMCCS-F012]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Clear logical sections</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">process_request</span><span class="p">(</span><span class="n">Request</span><span class="w"> </span><span class="o">*</span><span class="n">req</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// Validation phase</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">validate_request</span><span class="p">(</span><span class="n">req</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">check_permissions</span><span class="p">(</span><span class="n">req</span><span class="o">-&gt;</span><span class="n">user</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Processing phase</span>
<span class="w">    </span><span class="n">normalize_data</span><span class="p">(</span><span class="n">req</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
<span class="w">    </span><span class="n">apply_transformations</span><span class="p">(</span><span class="n">req</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Storage phase</span>
<span class="w">    </span><span class="n">save_to_database</span><span class="p">(</span><span class="n">req</span><span class="p">);</span>
<span class="w">    </span><span class="n">update_cache</span><span class="p">(</span><span class="n">req</span><span class="p">);</span>
<span class="w">    </span><span class="n">send_notification</span><span class="p">(</span><span class="n">req</span><span class="o">-&gt;</span><span class="n">user</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Control flow blocks</strong>: Compact style for short blocks, spaced for longer ones [AVMCCS-F013]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Compact for short blocks</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cond1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">action1</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cond2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">action2</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">action3</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Good: Spaced for longer blocks (&gt;3 lines)</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cond1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">setup</span><span class="p">();</span>
<span class="w">    </span><span class="n">process</span><span class="p">();</span>
<span class="w">    </span><span class="n">validate</span><span class="p">();</span>
<span class="w">    </span><span class="n">cleanup</span><span class="p">();</span>

<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cond2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alternative_action</span><span class="p">();</span>

<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">default_handler</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Switch statements</strong>: Separate cases with empty lines when &gt; 3 lines per case [AVMCCS-F014]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">CMD_PROCESS</span><span class="p">:</span>
<span class="w">        </span><span class="n">validate_input</span><span class="p">();</span>
<span class="w">        </span><span class="n">transform_data</span><span class="p">();</span>
<span class="w">        </span><span class="n">store_results</span><span class="p">();</span>
<span class="w">        </span><span class="n">log_completion</span><span class="p">();</span>

<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">CMD_RESET</span><span class="p">:</span>
<span class="w">        </span><span class="n">clear_buffers</span><span class="p">();</span>
<span class="w">        </span><span class="n">reset_state</span><span class="p">();</span>
<span class="w">        </span><span class="n">reinitialize</span><span class="p">();</span>
<span class="w">        </span><span class="n">notify_listeners</span><span class="p">();</span>

<span class="w">    </span><span class="k">default</span><span class="o">:</span>
<span class="w">        </span><span class="n">log_error</span><span class="p">(</span><span class="s">&quot;Unknown command&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="spacing">
<h3>Spacing<a class="headerlink" href="#spacing" title="Link to this heading"></a></h3>
<ul>
<li><p><strong>Control structures</strong>: Space after keywords, before opening brace [AVMCCS-F015]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">condition</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="c1">// Bad</span>
<span class="k">if</span><span class="p">(</span><span class="n">condition</span><span class="p">){</span><span class="w">     </span><span class="c1">// Missing spaces</span>
<span class="k">while</span><span class="p">(</span><span class="n">running</span><span class="p">){</span><span class="w">    </span><span class="c1">// Missing spaces</span>
</pre></div>
</div>
</li>
<li><p><strong>Function calls</strong>: No space between function name and parentheses [AVMCCS-F016]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">);</span>
<span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>

<span class="c1">// Bad</span>
<span class="n">printf</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// Extra space</span>
<span class="n">calculate</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span><span class="w">  </span><span class="c1">// Extra space</span>
</pre></div>
</div>
</li>
<li><p><strong>Comments</strong>: Space after comment markers [AVMCCS-F017]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: This is a comment</span>
<span class="cm">/* Good: Block comment */</span>

<span class="c1">//Bad: Missing space</span>
<span class="cm">/*Bad: Missing space*/</span>
</pre></div>
</div>
</li>
<li><p><strong>Casts</strong>: Space after closing parenthesis [AVMCCS-F018]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="n">value</span><span class="p">;</span>
<span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="w"> </span><span class="n">integer</span><span class="p">;</span>

<span class="c1">// Bad</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">value</span><span class="p">;</span><span class="w">   </span><span class="c1">// Missing space</span>
<span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="n">integer</span><span class="p">;</span><span class="w">     </span><span class="c1">// Missing space</span>
</pre></div>
</div>
</li>
<li><p><strong>Hexadecimal numbers</strong>: Use uppercase letters [AVMCCS-F019]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xDEADBEEF</span><span class="p">;</span>
<span class="kt">uint16_t</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xCAFE</span><span class="p">;</span>

<span class="c1">// Bad</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xdeadbeef</span><span class="p">;</span><span class="w">  </span><span class="c1">// Use uppercase</span>
<span class="kt">uint16_t</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xcafe</span><span class="p">;</span><span class="w">     </span><span class="c1">// Use uppercase</span>
</pre></div>
</div>
</li>
<li><p><strong>Binary operators</strong>: Use spaces around binary operators [AVMCCS-F020]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good</span>
<span class="kt">int</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Bad</span>
<span class="kt">int</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">;</span><span class="w">           </span><span class="c1">// Missing spaces</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="o">==</span><span class="n">y</span><span class="o">&amp;&amp;</span><span class="n">z</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">         </span><span class="c1">// Unreadable</span>
<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="p">)</span><span class="o">/</span><span class="n">c</span><span class="p">;</span><span class="w">    </span><span class="c1">// Cramped</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Initializer braces</strong>: Always place on the same line as the declaration [AVMCCS-F021]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Braces on same line for initializers</span>
<span class="kt">int</span><span class="w"> </span><span class="n">values</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">};</span>
<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">names</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Charlie&quot;</span>
<span class="p">};</span>

<span class="c1">// Bad: Don&#39;t use new line for initializers</span>
<span class="kt">int</span><span class="w"> </span><span class="n">values</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span>
<span class="p">{</span>
<span class="w">    </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Note: This differs from struct/function definitions which use new-line braces. Initializers are value assignments, not type definitions.</p>
</li>
</ul>
</section>
</section>
<section id="language-constructs">
<h2>Language Constructs<a class="headerlink" href="#language-constructs" title="Link to this heading"></a></h2>
<section id="declarations">
<h3>Declarations<a class="headerlink" href="#declarations" title="Link to this heading"></a></h3>
<section id="declaration-order-avmccs-l004">
<h4>Declaration Order [AVMCCS-L004]<a class="headerlink" href="#declaration-order-avmccs-l004" title="Link to this heading"></a></h4>
<p>Follow consistent order for declaration specifiers:</p>
<p><strong>Functions</strong>: <code class="docutils literal notranslate"><span class="pre">[storage]</span> <span class="pre">[function-specifier]</span> <span class="pre">[return-type]</span></code></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Consistent order</span>
<span class="k">static</span><span class="w"> </span><span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">helper</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">static</span><span class="w"> </span><span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">fast_helper</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">public_api</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">static</span><span class="w"> </span><span class="kr">inline</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="nf">get_name</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">process_data</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">fast_operation</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="c1">// Bad: Inconsistent order</span>
<span class="kr">inline</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">helper</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w">      </span><span class="c1">// Wrong: inline before static</span>
<span class="kt">void</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">process_data</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w">        </span><span class="c1">// Wrong: static after void</span>
<span class="k">const</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="nf">get_name</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w">     </span><span class="c1">// Wrong: const before static</span>
</pre></div>
</div>
<p><strong>Variables</strong>: <code class="docutils literal notranslate"><span class="pre">[storage]</span> <span class="pre">[type-qualifier]</span> <span class="pre">[type]</span></code></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Consistent order</span>
<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">max_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">volatile</span><span class="w"> </span><span class="kt">sig_atomic_t</span><span class="w"> </span><span class="n">signal_flag</span><span class="p">;</span>
<span class="k">static</span><span class="w"> </span><span class="k">_Thread_local</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">thread_counter</span><span class="p">;</span>
<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">messages</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;World&quot;</span><span class="w"> </span><span class="p">};</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buffer_size</span><span class="p">;</span>
<span class="k">static</span><span class="w"> </span><span class="k">volatile</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">hardware_reg</span><span class="p">;</span>

<span class="c1">// Bad: Inconsistent order</span>
<span class="k">const</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">max_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w">           </span><span class="c1">// Wrong: const before static</span>
<span class="k">volatile</span><span class="w"> </span><span class="k">extern</span><span class="w"> </span><span class="kt">sig_atomic_t</span><span class="w"> </span><span class="n">signal_flag</span><span class="p">;</span><span class="w">    </span><span class="c1">// Wrong: volatile before extern</span>
<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">messages</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span><span class="w">    </span><span class="c1">// Wrong: static in middle</span>
</pre></div>
</div>
<p><strong>Additional specifiers</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">restrict</span></code>: Use for pointer parameters that don’t alias [AVMCCS-L005]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">copy_buffer</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="kr">restrict</span><span class="w"> </span><span class="n">dest</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="kr">restrict</span><span class="w"> </span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Atomic</span></code>: For atomic operations (C11) [AVMCCS-L006]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">_Atomic</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ATOMIC_VAR_INIT</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">volatile</span></code>: For hardware registers or signal handlers [AVMCCS-L007]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">volatile</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">hardware_register</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">volatile</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="mh">0x40000000</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="operators">
<h3>Operators<a class="headerlink" href="#operators" title="Link to this heading"></a></h3>
<section id="increment-decrement-usage-avmccs-l008">
<h4>Increment/Decrement Usage [AVMCCS-L008]<a class="headerlink" href="#increment-decrement-usage-avmccs-l008" title="Link to this heading"></a></h4>
<p>Prefer post-increment (<code class="docutils literal notranslate"><span class="pre">i++</span></code>) over pre-increment (<code class="docutils literal notranslate"><span class="pre">++i</span></code>):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Idiomatic C style</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>

<span class="c1">// Avoid using increment/decrement for their return values</span>
<span class="c1">// Bad: Confusing</span>
<span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">++</span><span class="n">a</span><span class="p">;</span>
<span class="n">array</span><span class="p">[</span><span class="o">++</span><span class="n">index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>

<span class="c1">// Good: Separate statements for clarity</span>
<span class="n">a</span><span class="o">++</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>

<span class="c1">// Exception: Idiomatic patterns are OK</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">dst</span><span class="o">++</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">src</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">  </span><span class="c1">// String copy idiom</span>
</pre></div>
</div>
<p><strong>Note</strong>: This is a stylistic preference for readability and C idiom consistency. For primitive types like <code class="docutils literal notranslate"><span class="pre">int</span></code>, modern compilers generate identical code for <code class="docutils literal notranslate"><span class="pre">i++</span></code> and <code class="docutils literal notranslate"><span class="pre">++i</span></code> when the return value is not used (this is true for C with an optimized release build). The post-increment form <code class="docutils literal notranslate"><span class="pre">i++</span></code> is more commonly seen in C code and reads more naturally. This guide chooses <code class="docutils literal notranslate"><span class="pre">i++</span></code> for consistency with established C conventions.</p>
</section>
</section>
<section id="control-flow">
<h3>Control Flow<a class="headerlink" href="#control-flow" title="Link to this heading"></a></h3>
<section id="early-exit-over-nesting-avmccs-l009">
<h4>Early Exit Over Nesting [AVMCCS-L009]<a class="headerlink" href="#early-exit-over-nesting-avmccs-l009" title="Link to this heading"></a></h4>
<p>Use guard clauses to reduce indentation:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Early exit pattern</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">process_value</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Main logic with reduced nesting</span>
<span class="w">    </span><span class="n">compute_result</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Bad: Unnecessary nesting</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">process_value</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">compute_result</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="switch-over-if-else-chains-avmccs-l010">
<h4>Switch Over If-Else Chains [AVMCCS-L010]<a class="headerlink" href="#switch-over-if-else-chains-avmccs-l010" title="Link to this heading"></a></h4>
<p>Use switch when testing one variable for 3+ values:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// OK: Two comparisons</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">handle_init</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">handle_running</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">handle_error</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Bad: Should use switch for 3+ cases</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">handle_init</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">handle_running</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">handle_shutdown</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">handle_error</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Good: Switch for multiple cases</span>
<span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span>
<span class="w">        </span><span class="n">handle_init</span><span class="p">();</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span>
<span class="w">        </span><span class="n">handle_running</span><span class="p">();</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span>
<span class="w">        </span><span class="n">handle_shutdown</span><span class="p">();</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">default</span><span class="o">:</span>
<span class="w">        </span><span class="n">handle_error</span><span class="p">();</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="goto-for-cleanup-avmccs-l011">
<h4>Goto for Cleanup [AVMCCS-L011]<a class="headerlink" href="#goto-for-cleanup-avmccs-l011" title="Link to this heading"></a></h4>
<p>Use <code class="docutils literal notranslate"><span class="pre">goto</span></code> for clean error handling and resource cleanup:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Initialize pointers to NULL for clean cleanup</span>
<span class="n">parse_config_result_t</span><span class="w"> </span><span class="nf">parse_config</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="o">**</span><span class="n">out</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">FILE</span><span class="w"> </span><span class="o">*</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fopen</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;r&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ParseConfigFileOpenFailed</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="w">    </span><span class="n">Config</span><span class="w"> </span><span class="o">*</span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="w">    </span><span class="n">parse_config_result_t</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ParseConfigOk</span><span class="p">;</span>

<span class="w">    </span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">BUFFER_SIZE</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">buffer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ParseConfigOutOfMemory</span><span class="p">;</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">cleanup</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">Config</span><span class="p">));</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">config</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ParseConfigOutOfMemory</span><span class="p">;</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">cleanup</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ... parsing logic ...</span>

<span class="w">    </span><span class="o">*</span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">config</span><span class="p">;</span>
<span class="w">    </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w">  </span><span class="c1">// Transfer ownership</span>

<span class="nl">cleanup</span><span class="p">:</span>
<span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">config</span><span class="p">);</span><span class="w">   </span><span class="c1">// Safe: free(NULL) is a no-op</span>
<span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span>
<span class="w">    </span><span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Important</strong>: Use <code class="docutils literal notranslate"><span class="pre">goto</span></code> only for well-established patterns:</p>
<ul class="simple">
<li><p>Error handling and resource cleanup (shown above)</p></li>
<li><p>Breaking out of deeply nested loops when refactoring isn’t practical</p></li>
<li><p>State machines in performance-critical code</p></li>
</ul>
<p>Never use <code class="docutils literal notranslate"><span class="pre">goto</span></code> for general flow control, jumping backwards, or creating spaghetti code. The cleanup pattern works because it follows strict rules: labels at the end, only jumping forward, and maintaining clear resource ownership. If you’re unsure whether your <code class="docutils literal notranslate"><span class="pre">goto</span></code> usage is appropriate, refactor to use functions or structured control flow instead.</p>
</section>
</section>
<section id="static-assertions">
<h3>Static Assertions<a class="headerlink" href="#static-assertions" title="Link to this heading"></a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">_Static_assert</span></code> for compile-time validation:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Verify struct sizes and alignments</span>
<span class="k">_Static_assert</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">DateTime</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;DateTime size changed&quot;</span><span class="p">);</span>
<span class="k">_Static_assert</span><span class="p">(</span><span class="n">offsetof</span><span class="p">(</span><span class="n">Packet</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Packet layout assumption violated&quot;</span><span class="p">);</span>

<span class="c1">// Verify configuration consistency</span>
<span class="k">_Static_assert</span><span class="p">(</span><span class="n">MAX_BUFFER_SIZE</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">MIN_BUFFER_SIZE</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Buffer size configuration error&quot;</span><span class="p">);</span>

<span class="c1">// Type size assumptions</span>
<span class="k">_Static_assert</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Code assumes 32-bit int&quot;</span><span class="p">);</span>

<span class="c1">// Verify enum values don&#39;t overflow storage</span>
<span class="k">_Static_assert</span><span class="p">(</span><span class="n">ConnectionStateMax</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;connection_state_t values exceed uint8_t&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Where to use:</p>
<ul class="simple">
<li><p>After type definitions to verify layout assumptions [AVMCCS-L012]</p></li>
<li><p>In implementation files to verify platform assumptions [AVMCCS-L013]</p></li>
<li><p>To ensure configuration constants are consistent [AVMCCS-L014]</p></li>
</ul>
</section>
<section id="macro-safety">
<h3>Macro Safety<a class="headerlink" href="#macro-safety" title="Link to this heading"></a></h3>
<p>Macros require special care to avoid common pitfalls:</p>
<ul class="simple">
<li><p>Always parenthesize macro parameters [AVMCCS-L015]</p></li>
<li><p>Parenthesize the entire macro expression [AVMCCS-L016]</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">do</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span> <span class="pre">while</span> <span class="pre">(0)</span></code> for multi-statement macros [AVMCCS-L017]</p></li>
<li><p>Avoid expressions with side effects as macro arguments [AVMCCS-L018]</p></li>
<li><p>Protect against variable shadowing in complex macros [AVMCCS-L019]</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: All parameters parenthesized</span>
<span class="cp">#define MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span>
<span class="cp">#define SQUARE(x) ((x) * (x))</span>
<span class="cp">#define ARRAY_SIZE(arr) (sizeof(arr) / sizeof((arr)[0]))</span>

<span class="c1">// Bad: Unprotected parameters</span>
<span class="cp">#define MAX(a, b) (a &gt; b ? a : b)     </span><span class="c1">// Wrong: MAX(x&amp;1, y) breaks</span>
<span class="cp">#define SQUARE(x) x * x               </span><span class="c1">// Wrong: SQUARE(a+b) = a+b*a+b</span>

<span class="c1">// Watch for side effects in macro usage:</span>
<span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">bad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MAX</span><span class="p">(</span><span class="n">x</span><span class="o">++</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w">    </span><span class="c1">// Bug: x may increment twice</span>
<span class="kt">int</span><span class="w"> </span><span class="n">good</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MAX</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w">     </span><span class="c1">// Safe: no side effects</span>
<span class="n">x</span><span class="o">++</span><span class="p">;</span><span class="w">                       </span><span class="c1">// Increment separately if needed</span>

<span class="c1">// Good: Multi-statement macros use do-while</span>
<span class="cp">#define SWAP(a, b) do { \</span>
<span class="cp">    typeof(a) tmp = (a); \</span>
<span class="cp">    (a) = (b); \</span>
<span class="cp">    (b) = tmp; \</span>
<span class="cp">} while (0)</span>

<span class="c1">// Bad: No do-while protection</span>
<span class="cp">#define SWAP(a, b) { \</span>
<span class="cp">    typeof(a) tmp = (a); \</span>
<span class="cp">    (a) = (b); \</span>
<span class="cp">    (b) = tmp; \</span>
<span class="cp">}</span>
<span class="c1">// This breaks: if (x) SWAP(x, y); else ...</span>

<span class="c1">// Note: typeof was a GCC extension, now part of the standard since C23</span>
</pre></div>
</div>
<p><strong>Side Effects Warning</strong>: Function-like macros evaluate arguments multiple times</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// WARNING: Function-like macros evaluate arguments multiple times</span>
<span class="cp">#define MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span>
<span class="cp">#define MIN(a, b) ((a) &lt; (b) ? (a) : (b))</span>

<span class="c1">// Dangerous: Side effects happen multiple times!</span>
<span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MAX</span><span class="p">(</span><span class="n">x</span><span class="o">++</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w">                          </span><span class="c1">// x incremented twice if x &gt; 10</span>
<span class="kt">int</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MIN</span><span class="p">(</span><span class="n">expensive_function</span><span class="p">(),</span><span class="w"> </span><span class="n">threshold</span><span class="p">);</span><span class="w">   </span><span class="c1">// function called twice</span>

<span class="c1">// Safe: Use intermediate variables</span>
<span class="kt">int</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">expensive_function</span><span class="p">();</span>
<span class="kt">int</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MIN</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="w"> </span><span class="n">threshold</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Variable Shadowing in Macros</strong>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Problem: Macro variables can shadow caller&#39;s variables</span>
<span class="cp">#define SWAP(a, b) do { \</span>
<span class="cp">    int tmp = (a);      \</span>
<span class="cp">    (a) = (b);          \</span>
<span class="cp">    (b) = tmp;          \</span>
<span class="cp">} while (0)</span>

<span class="c1">// If caller has &#39;tmp&#39;, unexpected behavior occurs:</span>
<span class="kt">int</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="n">SWAP</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">tmp</span><span class="p">);</span><span class="w">  </span><span class="c1">// Macro&#39;s &#39;tmp&#39; shadows caller&#39;s &#39;tmp&#39;</span>

<span class="c1">// For general-use macros in headers, use unique names:</span>
<span class="cp">#define SWAP(a, b) do { \</span>
<span class="cp">    typeof(a) SWAP_tmp_ = (a); \</span>
<span class="cp">    (a) = (b); \</span>
<span class="cp">    (b) = SWAP_tmp_; \</span>
<span class="cp">} while (0)</span>

<span class="c1">// Note: For local macros in .c files with controlled usage,</span>
<span class="c1">// simple readable names may be acceptable with careful review</span>
</pre></div>
</div>
<p><strong>General Guidance</strong>: Prefer inline functions over function-like macros when possible. Macros bypass type checking and can have surprising behavior with side effects. Use macros only when compile-time computation, token manipulation, or generic programming is essential. When macros are necessary, use them with careful consideration of their limitations.</p>
</section>
</section>
<section id="naming-conventions">
<h2>Naming Conventions<a class="headerlink" href="#naming-conventions" title="Link to this heading"></a></h2>
<section id="casing-rules">
<h3>Casing Rules<a class="headerlink" href="#casing-rules" title="Link to this heading"></a></h3>
<section id="word-boundary-preservation-avmccs-n001">
<h4>Word Boundary Preservation [AVMCCS-N001]<a class="headerlink" href="#word-boundary-preservation-avmccs-n001" title="Link to this heading"></a></h4>
<p>When converting between casing styles, preserve word boundaries with underscores:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DateTime</span></code> type → <code class="docutils literal notranslate"><span class="pre">date_time</span></code> module → <code class="docutils literal notranslate"><span class="pre">DATE_TIME</span></code> constants (not <code class="docutils literal notranslate"><span class="pre">DATETIME</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buffer_size</span></code> → <code class="docutils literal notranslate"><span class="pre">BUFFER_SIZE</span></code> (not <code class="docutils literal notranslate"><span class="pre">BUFFERSIZE</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_retry_count</span></code> → <code class="docutils literal notranslate"><span class="pre">MAX_RETRY_COUNT</span></code> (not <code class="docutils literal notranslate"><span class="pre">MAXRETRYCOUNT</span></code>)</p></li>
</ul>
<p><strong>Acronyms</strong>: In PascalCase, keep acronyms capitalized. When converting to other cases, treat the acronym as a single word: [AVMCCS-N002]</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CSVParser</span></code> (PascalCase) → <code class="docutils literal notranslate"><span class="pre">csv_parser</span></code> (snake_case) → <code class="docutils literal notranslate"><span class="pre">CSV_PARSER</span></code> (SCREAMING_SNAKE_CASE)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">URLHandler</span></code> → <code class="docutils literal notranslate"><span class="pre">url_handler</span></code> → <code class="docutils literal notranslate"><span class="pre">URL_HANDLER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IOManager</span></code> → <code class="docutils literal notranslate"><span class="pre">io_manager</span></code> → <code class="docutils literal notranslate"><span class="pre">IO_MANAGER</span></code></p></li>
<li><p>Never split acronyms: <code class="docutils literal notranslate"><span class="pre">C_S_V_PARSER</span></code> is wrong</p></li>
</ul>
<p>This ensures consistency between related identifiers:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Type: DateTime (PascalCase, no underscores)</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">DateTime</span><span class="p">;</span>

<span class="c1">// Module: date_time (preserves word boundary)</span>
<span class="kt">int64_t</span><span class="w"> </span><span class="nf">date_time_diff_seconds</span><span class="p">(...);</span>

<span class="c1">// Constants: DATE_TIME (preserves word boundary)</span>
<span class="cp">#define DATE_TIME_MAX_YEAR 9999</span>
<span class="cp">#define DATE_TIME_EPOCH 1970</span>
</pre></div>
</div>
</section>
<section id="pascalcase">
<h4>PascalCase<a class="headerlink" href="#pascalcase" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>Composite types</strong>: Use PascalCase for non-scalar types (structs, unions) [AVMCCS-N003]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">day</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">DateTime</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p><strong>Enumeration values</strong>: Use PascalCase for enum constants representing exclusive alternatives [AVMCCS-N004]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">DigitalLow</span><span class="p">,</span>
<span class="w">    </span><span class="n">DigitalHigh</span><span class="p">,</span>
<span class="w">    </span><span class="n">DigitalReadFailed</span>
<span class="p">}</span><span class="w"> </span><span class="n">digital_read_result_t</span><span class="p">;</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">enum</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ConnectionDisconnected</span><span class="p">,</span>
<span class="w">    </span><span class="n">ConnectionConnected</span><span class="p">,</span>
<span class="w">    </span><span class="n">ConnectionAuthenticating</span><span class="p">,</span>
<span class="w">    </span><span class="n">ConnectionAuthenticated</span>
<span class="p">}</span><span class="w"> </span><span class="n">connection_state_t</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="screaming-snake-case">
<h4>SCREAMING_SNAKE_CASE<a class="headerlink" href="#screaming-snake-case" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>Manifest constants</strong>: All compile-time constants, regardless of definition method [AVMCCS-N005]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define BUFFER_SIZE 1024</span>
<span class="cp">#define PI 3.14159265359</span>

<span class="k">enum</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">MAX_FILENAME_LENGTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span>
<span class="w">    </span><span class="n">DEFAULT_TIMEOUT_MS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5000</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><strong>Flag constants</strong>: Bit flags for bitwise operations [AVMCCS-N006]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">FONT_REGULAR</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span>
<span class="w">    </span><span class="n">FONT_BOLD</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
<span class="w">    </span><span class="n">FONT_ITALIC</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span>
<span class="w">    </span><span class="n">FONT_UNDERLINE</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x04</span>
<span class="p">}</span><span class="w"> </span><span class="n">font_style_t</span><span class="p">;</span>

<span class="c1">// Usage: FONT_BOLD | FONT_ITALIC</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="lower-snake-case">
<h4>lower_snake_case<a class="headerlink" href="#lower-snake-case" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Functions</strong>: All function names [AVMCCS-N007]</p></li>
<li><p><strong>Variables</strong>: Local and global variables (including struct fields) [AVMCCS-N008]</p></li>
<li><p><strong>Function parameters</strong>: All parameter names [AVMCCS-N009]</p></li>
<li><p><strong>Type aliases for scalars</strong>: When creating scalar type aliases [AVMCCS-N010]</p></li>
</ul>
</section>
</section>
<section id="naming-patterns">
<h3>Naming Patterns<a class="headerlink" href="#naming-patterns" title="Link to this heading"></a></h3>
<section id="arrays-and-collections">
<h4>Arrays and Collections<a class="headerlink" href="#arrays-and-collections" title="Link to this heading"></a></h4>
<p>Clear distinction between arrays and other collection types prevents confusion:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Arrays: Use plural names with matching _len suffix</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">user_ids</span><span class="p">[</span><span class="n">MAX_USERS</span><span class="p">];</span><span class="w">      </span><span class="c1">// Plural for array</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">user_ids_len</span><span class="p">;</span><span class="w">          </span><span class="c1">// Length matches array name</span>

<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">names</span><span class="p">[];</span><span class="w">                </span><span class="c1">// Plural for array</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">names_len</span><span class="p">;</span><span class="w">             </span><span class="c1">// Length matches array name</span>
<span class="p">}</span><span class="w"> </span><span class="n">ArrayExample</span><span class="p">;</span>

<span class="c1">// Usage is clear:</span>
<span class="n">example</span><span class="o">-&gt;</span><span class="n">user_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span><span class="w">       </span><span class="c1">// Valid: plural indicates array</span>
<span class="n">example</span><span class="o">-&gt;</span><span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strdup</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w"> </span><span class="c1">// Valid: plural indicates array</span>

<span class="c1">// Non-array collections: Use descriptive names with type suffix</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">List</span><span class="w"> </span><span class="n">user_list</span><span class="p">;</span><span class="w">               </span><span class="c1">// Not &quot;users&quot; - can&#39;t index directly</span>
<span class="w">    </span><span class="n">Map</span><span class="w"> </span><span class="n">name_to_id_map</span><span class="p">;</span><span class="w">          </span><span class="c1">// Descriptive of contents</span>
<span class="w">    </span><span class="n">Set</span><span class="w"> </span><span class="n">permission_set</span><span class="p">;</span><span class="w">          </span><span class="c1">// Clear it&#39;s a set</span>
<span class="w">    </span><span class="n">Tree</span><span class="w"> </span><span class="n">category_tree</span><span class="p">;</span><span class="w">          </span><span class="c1">// Clear it&#39;s a tree</span>
<span class="p">}</span><span class="w"> </span><span class="n">CollectionExample</span><span class="p">;</span>

<span class="c1">// Usage makes type obvious:</span>
<span class="n">list_append</span><span class="p">(</span><span class="o">&amp;</span><span class="n">example</span><span class="o">-&gt;</span><span class="n">user_list</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="p">);</span><span class="w">    </span><span class="c1">// Can&#39;t do user_list[0]</span>
<span class="n">map_get</span><span class="p">(</span><span class="o">&amp;</span><span class="n">example</span><span class="o">-&gt;</span><span class="n">name_to_id_map</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Clearly a map operation</span>

<span class="c1">// Avoid ambiguous plurals for non-arrays</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">List</span><span class="w"> </span><span class="n">users</span><span class="p">;</span><span class="w">     </span><span class="c1">// Bad: looks like array (users[0] seems valid)</span>
<span class="w">    </span><span class="n">Set</span><span class="w"> </span><span class="n">permissions</span><span class="p">;</span><span class="w"> </span><span class="c1">// Bad: looks like array</span>
<span class="p">}</span><span class="w"> </span><span class="n">BadExample</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Key rules</strong>:</p>
<ul class="simple">
<li><p>Arrays get plural names (<code class="docutils literal notranslate"><span class="pre">users[]</span></code>, <code class="docutils literal notranslate"><span class="pre">paths[]</span></code>) [AVMCCS-N011]</p></li>
<li><p>Array lengths match the array name (<code class="docutils literal notranslate"><span class="pre">users_len</span></code>, <code class="docutils literal notranslate"><span class="pre">paths_len</span></code>) [AVMCCS-N012]</p></li>
<li><p>Non-array collections get descriptive names with type suffix (<code class="docutils literal notranslate"><span class="pre">user_list</span></code>, <code class="docutils literal notranslate"><span class="pre">id_set</span></code>) [AVMCCS-N013]</p></li>
<li><p>This prevents confusion about direct indexability</p></li>
</ul>
</section>
<section id="conversion-functions-avmccs-n014">
<h4>Conversion Functions [AVMCCS-N014]<a class="headerlink" href="#conversion-functions-avmccs-n014" title="Link to this heading"></a></h4>
<ul>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">_to</span></code> / <code class="docutils literal notranslate"><span class="pre">_from</span></code></strong>: Use for infallible, straightforward type conversions</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Note: Examples show naming pattern only - in practice pass and return by pointer</span>
<span class="c1">// See also: AVMCCS-A007</span>

<span class="c1">// Module to other type</span>
<span class="n">hsv_t</span><span class="w"> </span><span class="nf">color_to_hsv</span><span class="p">(</span><span class="n">Color</span><span class="w"> </span><span class="n">color</span><span class="p">);</span>
<span class="n">rgb_t</span><span class="w"> </span><span class="nf">color_to_rgb</span><span class="p">(</span><span class="n">Color</span><span class="w"> </span><span class="n">color</span><span class="p">);</span>

<span class="c1">// Other type to module</span>
<span class="n">Color</span><span class="w"> </span><span class="nf">color_from_hsv</span><span class="p">(</span><span class="n">hsv_t</span><span class="w"> </span><span class="n">hsv</span><span class="p">);</span>
<span class="n">Color</span><span class="w"> </span><span class="nf">color_from_rgb</span><span class="p">(</span><span class="n">rgb_t</span><span class="w"> </span><span class="n">rgb</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong>Requirements</strong>:</p>
<ul class="simple">
<li><p>Conversions must be infallible (cannot fail)</p></li>
<li><p>Destination type has trivial initialization (<code class="docutils literal notranslate"><span class="pre">_init</span></code> pattern or simpler)</p></li>
<li><p>No complex parsing or validation needed</p></li>
</ul>
</li>
<li><p><strong>Avoid <code class="docutils literal notranslate"><span class="pre">_to</span></code>/<code class="docutils literal notranslate"><span class="pre">_from</span></code> when</strong>:</p>
<ul class="simple">
<li><p>Conversion can fail (use <code class="docutils literal notranslate"><span class="pre">parse</span></code>, <code class="docutils literal notranslate"><span class="pre">decode</span></code>, etc.)</p></li>
<li><p>Destination requires <code class="docutils literal notranslate"><span class="pre">_create</span></code> or <code class="docutils literal notranslate"><span class="pre">_new</span></code> (implies resource management)</p></li>
<li><p>Complex validation or parsing is involved</p></li>
</ul>
</li>
</ul>
</section>
<section id="predicate-functions-avmccs-n015">
<h4>Predicate Functions [AVMCCS-N015]<a class="headerlink" href="#predicate-functions-avmccs-n015" title="Link to this heading"></a></h4>
<ul>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">_is</span></code> / <code class="docutils literal notranslate"><span class="pre">_has</span></code> / <code class="docutils literal notranslate"><span class="pre">_can</span></code></strong>: Return <code class="docutils literal notranslate"><span class="pre">bool</span></code> and take <code class="docutils literal notranslate"><span class="pre">const</span></code> pointers</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// State queries</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">date_time_is_valid</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">dt</span><span class="p">);</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">buffer_is_empty</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Buffer</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="p">);</span>

<span class="c1">// Property queries</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">string_has_spaces</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">str</span><span class="p">);</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">user_has_permission</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="o">*</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">permission_t</span><span class="w"> </span><span class="n">perm</span><span class="p">);</span>

<span class="c1">// Capability queries</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">text_input_can_undo</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">TextInput</span><span class="w"> </span><span class="o">*</span><span class="n">input</span><span class="p">);</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">connection_can_send</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Connection</span><span class="w"> </span><span class="o">*</span><span class="n">conn</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong>Naming pattern</strong>: <code class="docutils literal notranslate"><span class="pre">module_predicate_property</span></code></p></li>
<li><p><strong>Always</strong>: Take <code class="docutils literal notranslate"><span class="pre">const</span></code> pointers when checking object state</p></li>
<li><p><strong>Return</strong>: Only <code class="docutils literal notranslate"><span class="pre">bool</span></code> (use other patterns for error codes)</p></li>
</ul>
</section>
<section id="string-and-buffer-naming-avmccs-n016">
<h4>String and Buffer Naming [AVMCCS-N016]<a class="headerlink" href="#string-and-buffer-naming-avmccs-n016" title="Link to this heading"></a></h4>
<ul>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">string</span></code></strong>: Always means NULL-terminated C string</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="nf">int32_to_string</span><span class="p">(</span><span class="kt">int32_t</span><span class="w"> </span><span class="n">v</span><span class="p">);</span>

<span class="n">int32_to_string</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span><span class="w"> </span><span class="c1">// -&gt; &quot;42&quot;, that is {&#39;4&#39;, &#39;2&#39;, &#39;\0&#39;}</span>
</pre></div>
</div>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">_buf</span></code> suffix</strong>: Non-NULL-terminated buffer (requires length)</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Buffer variants require explicit length</span>
<span class="kt">size_t</span><span class="w"> </span><span class="nf">count_spaces_in_buf</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">buf</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buf_len</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong>No <code class="docutils literal notranslate"><span class="pre">cstring</span></code> prefix/suffix</strong>: Redundant - strings are C strings by default</p></li>
<li><p><strong>Omit <code class="docutils literal notranslate"><span class="pre">string</span></code> when obvious</strong>: <code class="docutils literal notranslate"><span class="pre">parse_iso8601(void)</span></code> not <code class="docutils literal notranslate"><span class="pre">parse_iso8601_string(void)</span></code></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Default assumes string (NULL-terminated)</span>
<span class="kt">size_t</span><span class="w"> </span><span class="nf">count_spaces</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">str</span><span class="p">);</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">starts_with</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">prefix</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong>Conversely</strong>: <code class="docutils literal notranslate"><span class="pre">parse_iso8601_buf()</span></code> needs <code class="docutils literal notranslate"><span class="pre">_buf</span></code> suffix when parsing from a buffer</p></li>
</ul>
</section>
<section id="module-prefixing-avmccs-n017">
<h4>Module Prefixing [AVMCCS-N017]<a class="headerlink" href="#module-prefixing-avmccs-n017" title="Link to this heading"></a></h4>
<p>Functions must be prefixed with their logical module name to establish clear namespacing:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// DateTime module</span>
<span class="kt">int64_t</span><span class="w"> </span><span class="nf">date_time_diff_seconds</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">);</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">date_time_is_valid</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">dt</span><span class="p">);</span>
<span class="c1">// ...</span>

<span class="c1">// Buffer utilities module</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">buffer_append</span><span class="p">(</span><span class="n">Buffer</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">buffer_clear</span><span class="p">(</span><span class="n">Buffer</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</section>
<section id="static-functions-avmccs-n018">
<h4>Static Functions [AVMCCS-N018]<a class="headerlink" href="#static-functions-avmccs-n018" title="Link to this heading"></a></h4>
<p>Static functions (file-local) should not use module prefixes since they don’t pollute the global namespace:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// In date_time.c</span>
<span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">is_date_valid</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">day</span><span class="p">);</span>
<span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">days_in_month</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">);</span>

<span class="c1">// Public functions still use module prefix</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">date_time_is_valid</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">dt</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">is_date_valid</span><span class="p">(</span><span class="n">dt</span><span class="o">-&gt;</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="o">-&gt;</span><span class="n">month</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="o">-&gt;</span><span class="n">day</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Naming pattern</strong>: Consider verb-first naming for static helpers to distinguish from public APIs:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Public API: module prefix first</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">date_time_is_valid</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">dt</span><span class="p">);</span>

<span class="c1">// Static helper: verb first</span>
<span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">is_valid_date_time</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">dt</span><span class="p">);</span>
<span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">get_days_in_month</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="macros">
<h4>Macros<a class="headerlink" href="#macros" title="Link to this heading"></a></h4>
<p>All macros use SCREAMING_SNAKE_CASE [AVMCCS-N019]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span>
<span class="cp">#define ARRAY_SIZE(arr) (sizeof(arr) / sizeof((arr)[0]))</span>
<span class="cp">#define DEFAULT_BUFFER_SIZE 1024</span>
</pre></div>
</div>
</section>
<section id="type-suffix-convention-avmccs-n020">
<h4>Type Suffix Convention [AVMCCS-N020]<a class="headerlink" href="#type-suffix-convention-avmccs-n020" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>Scalar type aliases</strong>: Use <code class="docutils literal notranslate"><span class="pre">_t</span></code> suffix for type definitions representing scalar or opaque types</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">user_id_t</span><span class="p">;</span>
<span class="k">typedef</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">timestamp_t</span><span class="p">;</span>
<span class="k">typedef</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">handle_t</span><span class="p">;</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">FileImpl</span><span class="w"> </span><span class="o">*</span><span class="n">file_handle_t</span><span class="p">;</span><span class="w">  </span><span class="c1">// Opaque pointer</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">f</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">float_or_int32_t</span><span class="p">;</span><span class="w">  </span><span class="c1">// Type-punning union</span>
</pre></div>
</div>
<p><strong>Note on POSIX compliance</strong>: POSIX reserves the <code class="docutils literal notranslate"><span class="pre">_t</span></code> suffix for its own type definitions. However, this convention is widely adopted in C projects for its clarity. If strict POSIX compliance is required, consider project-specific prefixes. For most applications, the clarity benefit of <code class="docutils literal notranslate"><span class="pre">_t</span></code> outweighs the theoretical namespace conflict.</p>
<p><strong>Semantic hint</strong>: The <code class="docutils literal notranslate"><span class="pre">_t</span></code> suffix signals that a type is a scalar or pointer that can be efficiently passed by value, stored on the stack, and used directly without dynamic allocation. When you see <code class="docutils literal notranslate"><span class="pre">user_id_t</span> <span class="pre">id;</span></code>, you know it’s safe to declare it as a local variable, pass it by value to functions, and return it by value - no <code class="docutils literal notranslate"><span class="pre">malloc()</span></code> needed. This convention helps distinguish simple value types from complex structures that require pointer passing and careful memory management.</p>
</li>
<li><p><strong>Composite types</strong>: No suffix required (already using PascalCase)</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">user_id_t</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">name</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
<span class="p">}</span><span class="w"> </span><span class="n">User</span><span class="p">;</span><span class="w">  </span><span class="c1">// Not User_t</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="enumeration-namespace-management-avmccs-n021">
<h4>Enumeration Namespace Management [AVMCCS-N021]<a class="headerlink" href="#enumeration-namespace-management-avmccs-n021" title="Link to this heading"></a></h4>
<p>Enum values exist in the global namespace and can cause collisions. Use a common prefix derived from the enum type name to avoid conflicts:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">DigitalLow</span><span class="p">,</span>
<span class="w">    </span><span class="n">DigitalHigh</span><span class="p">,</span>
<span class="w">    </span><span class="n">DigitalReadFailed</span>
<span class="p">}</span><span class="w"> </span><span class="n">digital_read_result_t</span><span class="p">;</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">enum</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ConnectionDisconnected</span><span class="p">,</span>
<span class="w">    </span><span class="n">ConnectionConnected</span><span class="p">,</span>
<span class="w">    </span><span class="n">ConnectionAuthenticating</span><span class="p">,</span>
<span class="w">    </span><span class="n">ConnectionAuthenticated</span>
<span class="p">}</span><span class="w"> </span><span class="n">connection_state_t</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="enum-and-flag-naming">
<h4>Enum and Flag Naming<a class="headerlink" href="#enum-and-flag-naming" title="Link to this heading"></a></h4>
<p><strong>Naming Convention</strong>:</p>
<ul class="simple">
<li><p>Use singular names for exclusive state enums [AVMCCS-N022]</p></li>
<li><p>Use singular + <code class="docutils literal notranslate"><span class="pre">_flags_t</span></code> suffix for combined flags types [AVMCCS-N023]</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Exclusive states: use singular (only one at a time)</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">FileOpen</span><span class="p">,</span>
<span class="w">    </span><span class="n">FileClosed</span><span class="p">,</span>
<span class="w">    </span><span class="n">FileError</span>
<span class="p">}</span><span class="w"> </span><span class="n">file_state_t</span><span class="p">;</span><span class="w">  </span><span class="c1">// Singular</span>

<span class="c1">// Combinable flags: enum is singular, flags type is plural</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PERM_READ</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
<span class="w">    </span><span class="n">PERM_WRITE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span>
<span class="w">    </span><span class="n">PERM_EXEC</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x04</span>
<span class="p">}</span><span class="w"> </span><span class="n">permission_t</span><span class="p">;</span><span class="w">  </span><span class="c1">// Singular for the enum</span>

<span class="k">typedef</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">permission_flags_t</span><span class="p">;</span><span class="w">  </span><span class="c1">// Singular + flags_t suffix</span>
</pre></div>
</div>
</section>
<section id="measurement-units-avmccs-n024">
<h4>Measurement Units [AVMCCS-N024]<a class="headerlink" href="#measurement-units-avmccs-n024" title="Link to this heading"></a></h4>
<p>Include units in names to prevent errors and improve clarity:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Functions: unit suffix indicates primary parameter or return value units</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">delay_ms</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">milliseconds</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">set_timeout_ms</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">timeout</span><span class="p">);</span><span class="w">  </span><span class="c1">// Action on parameter</span>
<span class="kt">int64_t</span><span class="w"> </span><span class="nf">get_timestamp_us</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w">             </span><span class="c1">// Return value unit</span>
<span class="kt">float</span><span class="w"> </span><span class="nf">calculate_distance_km</span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>

<span class="c1">// Parameters: make units explicit</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">screen_rotate_deg</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">rotation_deg</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">motor_set_speed_rpm</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">speed_rpm</span><span class="p">);</span>

<span class="c1">// No units needed when using enum types</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">screen_set_orientation</span><span class="p">(</span><span class="n">screen_orientation_t</span><span class="w"> </span><span class="n">orientation</span><span class="p">);</span>

<span class="c1">// Variables and constants: prevent unit confusion</span>
<span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">MAX_SPEED_KMH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">120</span><span class="p">;</span>
<span class="kt">float</span><span class="w"> </span><span class="n">temperature_celsius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">25.5</span><span class="p">;</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">file_size_bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span>
</pre></div>
</div>
<p>Common unit suffixes:</p>
<ul class="simple">
<li><p>Time: <code class="docutils literal notranslate"><span class="pre">_ms</span></code>, <code class="docutils literal notranslate"><span class="pre">_us</span></code>, <code class="docutils literal notranslate"><span class="pre">_ns</span></code>, <code class="docutils literal notranslate"><span class="pre">_sec</span></code>, <code class="docutils literal notranslate"><span class="pre">_min</span></code></p></li>
<li><p>Distance: <code class="docutils literal notranslate"><span class="pre">_mm</span></code>, <code class="docutils literal notranslate"><span class="pre">_cm</span></code>, <code class="docutils literal notranslate"><span class="pre">_m</span></code>, <code class="docutils literal notranslate"><span class="pre">_km</span></code></p></li>
<li><p>Angles: <code class="docutils literal notranslate"><span class="pre">_deg</span></code>, <code class="docutils literal notranslate"><span class="pre">_rad</span></code></p></li>
<li><p>Data: <code class="docutils literal notranslate"><span class="pre">_bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">_kib</span></code>, <code class="docutils literal notranslate"><span class="pre">_mib</span></code>, <code class="docutils literal notranslate"><span class="pre">_gib</span></code> (use binary prefixes for clarity)</p></li>
<li><p>Frequency: <code class="docutils literal notranslate"><span class="pre">_hz</span></code>, <code class="docutils literal notranslate"><span class="pre">_khz</span></code>, <code class="docutils literal notranslate"><span class="pre">_mhz</span></code></p></li>
<li><p>Speed: <code class="docutils literal notranslate"><span class="pre">_rpm</span></code>, <code class="docutils literal notranslate"><span class="pre">_kmh</span></code>, <code class="docutils literal notranslate"><span class="pre">_mps</span></code></p></li>
</ul>
<p><strong>Note</strong>: Bytes can be omitted for common memory operations where the unit is obvious:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="nf">malloc</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">);</span><span class="w">          </span><span class="c1">// Not malloc_bytes</span>
<span class="n">buffer_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span><span class="w">          </span><span class="c1">// Not buffer_create_bytes</span>
<span class="cp">#define MAX_BUFFER_SIZE 4096        </span><span class="c1">// Not MAX_BUFFER_SIZE_BYTES</span>
</pre></div>
</div>
</section>
<section id="size-terminology">
<h4>Size Terminology<a class="headerlink" href="#size-terminology" title="Link to this heading"></a></h4>
<p>Use consistent suffixes for counts and sizes [AVMCCS-N025]:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">len</span></code>/<code class="docutils literal notranslate"><span class="pre">length</span></code></strong>: Number of elements in arrays/buffers</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">size</span></code></strong>: Number of bytes (as in <code class="docutils literal notranslate"><span class="pre">sizeof</span></code>)</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">count</span></code></strong>: Number of items in any collection</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">process_items</span><span class="p">(</span><span class="n">Item</span><span class="w"> </span><span class="n">items</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">items_len</span><span class="p">);</span><span class="w">      </span><span class="c1">// Not items_size</span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="nf">buffer_allocate</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">buffer_size</span><span class="p">);</span><span class="w">               </span><span class="c1">// In bytes</span>
<span class="kt">size_t</span><span class="w"> </span><span class="nf">get_user_count</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Database</span><span class="w"> </span><span class="o">*</span><span class="n">db</span><span class="p">);</span><span class="w">               </span><span class="c1">// Number of users</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="api-design">
<h2>API Design<a class="headerlink" href="#api-design" title="Link to this heading"></a></h2>
<section id="function-parameter-ordering-avmccs-a001">
<h3>Function Parameter Ordering [AVMCCS-A001]<a class="headerlink" href="#function-parameter-ordering-avmccs-a001" title="Link to this heading"></a></h3>
<p>Follow this consistent parameter order for better API clarity:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>func(target, inputs, outputs, options, environment)
</pre></div>
</div>
<section id="parameter-types">
<h4>Parameter Types<a class="headerlink" href="#parameter-types" title="Link to this heading"></a></h4>
<ol class="arabic">
<li><p><strong>target</strong>: The primary parameter being operated on (must be initialized)</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="nf">date_time_is_valid</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">dt</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">date_time_add_days</span><span class="p">(</span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">dt</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">days</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">buffer_append</span><span class="p">(</span><span class="n">Buffer</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">);</span>
</pre></div>
</div>
<p>Exception: <code class="docutils literal notranslate"><span class="pre">_init</span></code> and <code class="docutils literal notranslate"><span class="pre">_create</span></code> functions initialize the target parameter</p>
</li>
<li><p><strong>inputs</strong>: Additional input data with <code class="docutils literal notranslate"><span class="pre">const</span></code> qualification</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Arrays/buffers must always be followed by their length</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">hash_update</span><span class="p">(</span><span class="n">Hash</span><span class="w"> </span><span class="o">*</span><span class="n">h</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">data</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">data_len</span><span class="p">);</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">string_find_all</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">haystack</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">needle</span><span class="p">,</span>
<span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">positions</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">positions_len</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong>outputs</strong>: Usually uninitialized output parameters (come after inputs)</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Parse functions: input data first, then output location</span>
<span class="n">parse_int_result_t</span><span class="w"> </span><span class="nf">parse_int</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="o">*</span><span class="n">out</span><span class="p">);</span>
<span class="n">base64_decode_result_t</span><span class="w"> </span><span class="nf">base64_decode</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">encoded</span><span class="p">,</span>
<span class="w">                                     </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">decoded</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="n">decoded_len</span><span class="p">);</span>
</pre></div>
</div>
<p>Note: Additional read-write parameters may precede pure output parameters when it makes semantic sense</p>
</li>
<li><p><strong>options</strong>: Function options (prefer enums for clarity)</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">user_message_show</span><span class="p">(</span><span class="n">Display</span><span class="w"> </span><span class="o">*</span><span class="n">display</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">msg</span><span class="p">,</span>
<span class="w">                       </span><span class="n">user_message_style_t</span><span class="w"> </span><span class="n">style</span><span class="p">);</span>
<span class="n">csv_parse_result_t</span><span class="w"> </span><span class="nf">parse_csv</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="o">*</span><span class="n">out</span><span class="p">,</span>
<span class="w">                             </span><span class="n">csv_options_t</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong>environment</strong>: Context or environment pointers (avoid globals)</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">log_message</span><span class="p">(</span><span class="n">Logger</span><span class="w"> </span><span class="o">*</span><span class="n">logger</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">msg</span><span class="p">,</span><span class="w"> </span><span class="n">log_level_t</span><span class="w"> </span><span class="n">level</span><span class="p">,</span>
<span class="w">                 </span><span class="n">Environment</span><span class="w"> </span><span class="o">*</span><span class="n">env</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="key-principle">
<h4>Key Principle<a class="headerlink" href="#key-principle" title="Link to this heading"></a></h4>
<p>The target parameter must be initialized (except for <code class="docutils literal notranslate"><span class="pre">_init</span></code>/<code class="docutils literal notranslate"><span class="pre">_create</span></code>), while output parameters are usually uninitialized:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// acc must be initialized - it&#39;s the target parameter</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">int32_add_parsed</span><span class="p">(</span><span class="kt">int32_t</span><span class="w"> </span><span class="o">*</span><span class="n">acc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">str</span><span class="p">);</span>

<span class="c1">// out is uninitialized - it&#39;s an output parameter</span>
<span class="n">parse_int_result_t</span><span class="w"> </span><span class="nf">int32_parse</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="o">*</span><span class="n">out</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="api-clarity">
<h3>API Clarity<a class="headerlink" href="#api-clarity" title="Link to this heading"></a></h3>
<section id="prefer-enums-over-bools-avmccs-a002">
<h4>Prefer Enums Over Bools [AVMCCS-A002]<a class="headerlink" href="#prefer-enums-over-bools-avmccs-a002" title="Link to this heading"></a></h4>
<p>Use enums for function options to create self-documenting APIs:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Intent is clear at call site</span>
<span class="n">user_message_show</span><span class="p">(</span><span class="o">&amp;</span><span class="n">display</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">UserMessageBlinking</span><span class="p">);</span>
<span class="n">connection_open</span><span class="p">(</span><span class="o">&amp;</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ConnectionSecure</span><span class="p">);</span>

<span class="c1">// Bad: Unclear boolean parameters</span>
<span class="n">user_message_show</span><span class="p">(</span><span class="o">&amp;</span><span class="n">display</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w">  </span><span class="c1">// What does true mean?</span>
<span class="n">connection_open</span><span class="p">(</span><span class="o">&amp;</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span><span class="w"> </span><span class="c1">// Encrypted? Async?</span>
</pre></div>
</div>
<p>Enums are also more maintainable - adding a third option doesn’t break existing code.</p>
</section>
<section id="return-values-for-error-handling-avmccs-a003">
<h4>Return Values for Error Handling [AVMCCS-A003]<a class="headerlink" href="#return-values-for-error-handling-avmccs-a003" title="Link to this heading"></a></h4>
<p>Use return values for status/errors, output parameters for actual results:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Can check errors inline</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">parse_int</span><span class="p">(</span><span class="s">&quot;123&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">ParseIntOk</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">handle_error</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// value is now safe to use</span>

<span class="c1">// Follows standard C patterns</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sscanf</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">number</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Handle parse error</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Consider using function-specific or module-specific result enums for clearer error handling:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Function-specific result enum</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">enum</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ParseConfigOk</span><span class="p">,</span>
<span class="w">    </span><span class="n">ParseConfigFileOpenFailed</span><span class="p">,</span>
<span class="w">    </span><span class="n">ParseConfigOutOfMemory</span><span class="p">,</span>
<span class="w">    </span><span class="n">ParseConfigInvalidSyntax</span><span class="p">,</span>
<span class="w">    </span><span class="n">ParseConfigMissingRequired</span>
<span class="p">}</span><span class="w"> </span><span class="n">parse_config_result_t</span><span class="p">;</span>

<span class="c1">// Usage provides clear, specific error information</span>
<span class="n">parse_config_result_t</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse_config</span><span class="p">(</span><span class="s">&quot;app.conf&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">config</span><span class="p">);</span>
<span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">ParseConfigOk</span><span class="p">:</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">ParseConfigFileOpenFailed</span><span class="p">:</span>
<span class="w">        </span><span class="n">log_error</span><span class="p">(</span><span class="s">&quot;Cannot open configuration file&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">ParseConfigInvalidSyntax</span><span class="p">:</span>
<span class="w">        </span><span class="n">log_error</span><span class="p">(</span><span class="s">&quot;Configuration syntax error&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This pattern provides context-specific errors without polluting the global namespace.</p>
</section>
</section>
<section id="array-vs-pointer-syntax-avmccs-a004">
<h3>Array vs Pointer Syntax [AVMCCS-A004]<a class="headerlink" href="#array-vs-pointer-syntax-avmccs-a004" title="Link to this heading"></a></h3>
<p>Use syntax that communicates intent:</p>
<ul class="simple">
<li><p><strong>Array syntax</strong> for multiple elements: <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">sort_numbers(int32_t</span> <span class="pre">arr[],</span> <span class="pre">size_t</span> <span class="pre">len)</span></code></p></li>
<li><p><strong>Pointer syntax</strong> for single objects: <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">increment(int32_t</span> <span class="pre">*value)</span></code></p></li>
<li><p><strong>Pointer syntax</strong> for strings: <code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">strlen(const</span> <span class="pre">char</span> <span class="pre">*str)</span></code></p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">[]</span></code> syntax in parameters documents that multiple items are expected.</p>
</section>
<section id="global-state-management">
<h3>Global State Management<a class="headerlink" href="#global-state-management" title="Link to this heading"></a></h3>
<p>Global variables should be avoided. Instead, use a context structure [AVMCCS-A005]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define a context structure for all &quot;global&quot; state</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">Logger</span><span class="w"> </span><span class="o">*</span><span class="n">logger</span><span class="p">;</span>
<span class="w">    </span><span class="n">Database</span><span class="w"> </span><span class="o">*</span><span class="n">db</span><span class="p">;</span>
<span class="w">    </span><span class="n">Config</span><span class="w"> </span><span class="o">*</span><span class="n">config</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">request_count</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">system_initialized</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">GlobalContext</span><span class="p">;</span>

<span class="c1">// Pass the context to functions that need it</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">process_request</span><span class="p">(</span><span class="n">Request</span><span class="w"> </span><span class="o">*</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">GlobalContext</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">request_count</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="n">log_message</span><span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">logger</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Processing request&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">database_query</span><span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">req</span><span class="o">-&gt;</span><span class="n">query</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This approach provides:</p>
<ul class="simple">
<li><p><strong>Clear dependencies</strong>: Functions explicitly receive context</p></li>
<li><p><strong>Easier testing</strong>: Can create test contexts</p></li>
<li><p><strong>Better thread safety</strong>: Each thread can have its own context</p></li>
<li><p><strong>No hidden global state</strong>: All dependencies are visible</p></li>
</ul>
<p>Note: Sometimes globals cannot be avoided (e.g., signal handlers, certain embedded systems constraints), but the context pattern should be the default approach.</p>
</section>
<section id="flag-type-design">
<h3>Flag Type Design<a class="headerlink" href="#flag-type-design" title="Link to this heading"></a></h3>
<p>Define separate types for flag combinations to avoid semantic issues [AVMCCS-A006]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define individual flags in an enum (for grouping and documentation)</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">enum</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">FONT_REGULAR</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span>
<span class="w">    </span><span class="n">FONT_BOLD</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
<span class="w">    </span><span class="n">FONT_ITALIC</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span>
<span class="w">    </span><span class="n">FONT_UNDERLINE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x04</span>
<span class="p">}</span><span class="w"> </span><span class="n">font_style_t</span><span class="p">;</span>

<span class="c1">// Define a separate type for combined flags</span>
<span class="k">typedef</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">font_style_flags_t</span><span class="p">;</span>

<span class="c1">// Functions take the flags type, not the enum type</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">text_render</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">font_style_flags_t</span><span class="w"> </span><span class="n">style_flags</span><span class="p">);</span>

<span class="c1">// Usage is clear and type-safe</span>
<span class="n">font_style_flags_t</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FONT_BOLD</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FONT_ITALIC</span><span class="p">;</span>
<span class="n">text_render</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">style</span><span class="p">);</span>
</pre></div>
</div>
<p>This pattern solves a fundamental type safety issue: when you OR flags together (<code class="docutils literal notranslate"><span class="pre">FONT_BOLD</span> <span class="pre">|</span> <span class="pre">FONT_ITALIC</span></code>), the result is not a member of the enum type. By using a separate <code class="docutils literal notranslate"><span class="pre">_flags_t</span></code> type, we acknowledge this reality while maintaining clarity.</p>
<p><strong>API clearly shows intent</strong>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">file_set_state</span><span class="p">(</span><span class="n">file_state_t</span><span class="w"> </span><span class="n">state</span><span class="p">);</span><span class="w">              </span><span class="c1">// One state</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">file_set_permissions</span><span class="p">(</span><span class="n">permission_flags_t</span><span class="w"> </span><span class="n">perms</span><span class="p">);</span><span class="w">  </span><span class="c1">// Multiple flags</span>
</pre></div>
</div>
<p><strong>C23 Enhancement</strong>: When C23 is available, specify the enum’s underlying type for perfect compatibility:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// C23: Ensures enum and flags type are compatible</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">font_style_t</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">uint32_t</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">FONT_REGULAR</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span>
<span class="w">    </span><span class="n">FONT_BOLD</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
<span class="w">    </span><span class="n">FONT_ITALIC</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span>
<span class="w">    </span><span class="n">FONT_UNDERLINE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x04</span>
<span class="p">}</span><span class="w"> </span><span class="n">font_style_t</span><span class="p">;</span>

<span class="k">typedef</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">font_style_flags_t</span><span class="p">;</span><span class="w">  </span><span class="c1">// Guaranteed compatible with enum</span>
</pre></div>
</div>
</section>
<section id="struct-parameter-passing">
<h3>Struct Parameter Passing<a class="headerlink" href="#struct-parameter-passing" title="Link to this heading"></a></h3>
<p>Always use pointers for structs (efficiency and API consistency) [AVMCCS-A007]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Pass structs by pointer</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">date_time_add_days</span><span class="p">(</span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">dt</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">days</span><span class="p">);</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">user_is_valid</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="o">*</span><span class="n">user</span><span class="p">);</span>
<span class="n">Config</span><span class="w"> </span><span class="o">*</span><span class="nf">config_new</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">ConfigOptions</span><span class="w"> </span><span class="o">*</span><span class="n">options</span><span class="p">);</span>

<span class="c1">// Bad: Pass by value (inefficient, inconsistent)</span>
<span class="n">DateTime</span><span class="w"> </span><span class="nf">date_time_add_days</span><span class="p">(</span><span class="n">DateTime</span><span class="w"> </span><span class="n">dt</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">days</span><span class="p">);</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">user_validate</span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">);</span>
</pre></div>
</div>
<p>If pass-by-value cannot be avoided for any reason, structure should be small (≤ 16 bytes):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Acceptable only for very small structs</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">Color</span><span class="p">;</span><span class="w">  </span><span class="c1">// 4 bytes - OK for pass-by-value if necessary</span>

<span class="c1">// Too large for pass-by-value</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">Vector3D</span><span class="p">;</span><span class="w">  </span><span class="c1">// 24 bytes - always use pointers</span>
</pre></div>
</div>
</section>
</section>
<section id="type-selection-and-usage">
<h2>Type Selection and Usage<a class="headerlink" href="#type-selection-and-usage" title="Link to this heading"></a></h2>
<section id="integer-type-selection">
<h3>Integer Type Selection<a class="headerlink" href="#integer-type-selection" title="Link to this heading"></a></h3>
<section id="size-and-index-types-avmccs-t001">
<h4>Size and Index Types [AVMCCS-T001]<a class="headerlink" href="#size-and-index-types-avmccs-t001" title="Link to this heading"></a></h4>
<p>Use <code class="docutils literal notranslate"><span class="pre">size_t</span></code> for sizes, lengths, and array indices:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Correct type for sizes</span>
<span class="kt">size_t</span><span class="w"> </span><span class="n">buffer_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">array_len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>

<span class="c1">// Bad: Using int for sizes</span>
<span class="kt">int</span><span class="w"> </span><span class="n">buffer_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span><span class="w">  </span><span class="c1">// Can&#39;t represent large sizes</span>
</pre></div>
</div>
<p><strong>Warning</strong>: Be careful with reverse iteration using <code class="docutils literal notranslate"><span class="pre">size_t</span></code>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Bad: This is an infinite loop!</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span><span class="w">  </span><span class="c1">// i is never &lt; 0</span>

<span class="c1">// Good: Alternative approaches</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">process</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">]);</span>
<span class="p">}</span>

<span class="c1">// Good: Use signed type when available</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">ssize_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="pointer-arithmetic-avmccs-t002">
<h4>Pointer Arithmetic [AVMCCS-T002]<a class="headerlink" href="#pointer-arithmetic-avmccs-t002" title="Link to this heading"></a></h4>
<p>Use proper types for pointer operations:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Types designed for pointer operations</span>
<span class="kt">uintptr_t</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">uintptr_t</span><span class="p">)</span><span class="w"> </span><span class="n">ptr</span><span class="p">;</span>
<span class="kt">ptrdiff_t</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ptr2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">ptr1</span><span class="p">;</span>

<span class="c1">// Bad: Using long for pointers (not portable)</span>
<span class="kt">long</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="w"> </span><span class="n">ptr</span><span class="p">;</span><span class="w">  </span><span class="c1">// Wrong size on some platforms</span>
</pre></div>
</div>
</section>
<section id="fixed-width-types-avmccs-t003">
<h4>Fixed-Width Types [AVMCCS-T003]<a class="headerlink" href="#fixed-width-types-avmccs-t003" title="Link to this heading"></a></h4>
<p>Use explicit-width types from <code class="docutils literal notranslate"><span class="pre">&lt;stdint.h&gt;</span></code> for portable size guarantees:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Clear about size requirements</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">crc32_calculate</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">len</span><span class="p">);</span>
<span class="kt">int64_t</span><span class="w"> </span><span class="nf">timestamp_microseconds</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="c1">// Bad: Platform-dependent sizes</span>
<span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span><span class="w">  </span><span class="c1">// 32 or 64 bits?</span>
<span class="kt">int</span><span class="w"> </span><span class="n">counter</span><span class="p">;</span><span class="w">         </span><span class="c1">// Usually 32 bits, but not guaranteed</span>
</pre></div>
</div>
</section>
</section>
<section id="pointer-type-usage-avmccs-t004">
<h3>Pointer Type Usage [AVMCCS-T004]<a class="headerlink" href="#pointer-type-usage-avmccs-t004" title="Link to this heading"></a></h3>
<p>Choose the appropriate pointer type based on semantic intent:</p>
<ul>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code></strong>: Generic memory operations</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="nf">malloc</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">free</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="nf">memcpy</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">dest</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">uint8_t</span> <span class="pre">*</span></code></strong>: Binary data buffers</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// For raw binary data including null bytes, binary protocols</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">hash_update</span><span class="p">(</span><span class="n">Hash</span><span class="w"> </span><span class="o">*</span><span class="n">h</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">data</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">data_len</span><span class="p">);</span>
<span class="kt">size_t</span><span class="w"> </span><span class="nf">base64_encode</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">src</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">src_len</span><span class="p">,</span>
<span class="w">                     </span><span class="kt">char</span><span class="w"> </span><span class="n">dst</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">dst_len</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*</span></code></strong>: C strings or character buffers</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// For text data (NULL-terminated or buffer with length)</span>
<span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="nf">strcpy</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">dest</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">src</span><span class="p">);</span>
<span class="kt">size_t</span><span class="w"> </span><span class="nf">utf8_validate</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">buf</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buf_len</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">char8_t</span> <span class="pre">*</span></code></strong>: UTF-8 strings (C23)</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// When UTF-8 encoding must be explicit</span>
<span class="kt">size_t</span><span class="w"> </span><span class="nf">utf8_strlen</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">char8_t</span><span class="w"> </span><span class="o">*</span><span class="n">str</span><span class="p">);</span>
<span class="n">char8_t</span><span class="w"> </span><span class="o">*</span><span class="nf">utf8_normalize</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">char8_t</span><span class="w"> </span><span class="o">*</span><span class="n">str</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="const-correctness">
<h3>Const Correctness<a class="headerlink" href="#const-correctness" title="Link to this heading"></a></h3>
<p>Guidelines:</p>
<ul class="simple">
<li><p>Always use <code class="docutils literal notranslate"><span class="pre">const</span></code> for read-only parameters [AVMCCS-T005]</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">const</span></code> for arrays of strings to ensure they’re stored in read-only memory [AVMCCS-T006]</p></li>
<li><p>Place <code class="docutils literal notranslate"><span class="pre">const</span></code> before the type for readability [AVMCCS-T007]</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="p">;</span><span class="w">        </span><span class="c1">// Preferred: pointer to const data</span>
<span class="kt">char</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="p">;</span><span class="w">        </span><span class="c1">// Equivalent but avoid</span>

<span class="c1">// Const pointer to const data</span>
<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">ptr</span><span class="p">;</span>

<span class="c1">// Common patterns:</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">string_print</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">str</span><span class="p">);</span><span class="w">        </span><span class="c1">// Can&#39;t modify string contents</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">buffer_process</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">len</span><span class="p">);</span><span class="w">  </span><span class="c1">// Can&#39;t modify buffer</span>

<span class="c1">// Making string arrays fully const for .rodata section</span>
<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">month_names</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s">&quot;January&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;February&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;March&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;April&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;May&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;June&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;July&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;August&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;September&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;October&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;November&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;December&quot;</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="typedef-usage">
<h3>Typedef Usage<a class="headerlink" href="#typedef-usage" title="Link to this heading"></a></h3>
<ul>
<li><p><strong>Public API types</strong>: Use typedef for types exposed in headers [AVMCCS-T008]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// In public header (date_time.h)</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">day</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">DateTime</span><span class="p">;</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">enum</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ResultOk</span><span class="p">,</span>
<span class="w">    </span><span class="n">ResultError</span><span class="p">,</span>
<span class="w">    </span><span class="n">ResultTimeout</span><span class="p">,</span>
<span class="w">    </span><span class="n">ResultFileOpenFailed</span><span class="p">,</span>
<span class="w">    </span><span class="n">ResultOutOfMemory</span>
<span class="p">}</span><span class="w"> </span><span class="n">result_t</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p><strong>Internal types</strong>: Use explicit struct/enum/union keywords for implementation details</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// In implementation file (date_time.c)</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">ParserState</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">input</span><span class="p">;</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">position</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">has_error</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Usage requires struct keyword</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">ParserState</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><strong>Function pointers</strong>: Always use typedef for readability [AVMCCS-T009]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Clear and readable</span>
<span class="k">typedef</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">event_handler_t</span><span class="p">)(</span><span class="n">Event</span><span class="w"> </span><span class="o">*</span><span class="n">event</span><span class="p">);</span>
<span class="k">typedef</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">comparator_t</span><span class="p">)(</span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">);</span>

<span class="c1">// Bad: Hard to read without typedef</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">register_callback</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">handler</span><span class="p">)(</span><span class="n">Event</span><span class="w"> </span><span class="o">*</span><span class="p">));</span><span class="w">  </span><span class="c1">// Avoid</span>

<span class="c1">// Good: Much clearer with typedef</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">register_callback</span><span class="p">(</span><span class="n">event_handler_t</span><span class="w"> </span><span class="n">handler</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="forward-declarations">
<h3>Forward Declarations<a class="headerlink" href="#forward-declarations" title="Link to this heading"></a></h3>
<p>Use forward declarations to minimize dependencies and hide implementation details:</p>
<ul>
<li><p><strong>Opaque types in public headers</strong>: Hide struct internals from API users [AVMCCS-T010]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// In public header (buffer.h)</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Buffer</span><span class="w"> </span><span class="n">Buffer</span><span class="p">;</span><span class="w">  </span><span class="c1">// Users can&#39;t see internal fields</span>

<span class="c1">// API works with pointers only</span>
<span class="n">Buffer</span><span class="w"> </span><span class="o">*</span><span class="nf">buffer_new</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">initial_size</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">buffer_delete</span><span class="p">(</span><span class="n">Buffer</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">);</span>
<span class="kt">size_t</span><span class="w"> </span><span class="nf">buffer_length</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Buffer</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">);</span>

<span class="c1">// In implementation (buffer.c)</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Buffer</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">;</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">length</span><span class="p">;</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">capacity</span><span class="p">;</span>
<span class="p">};</span><span class="w">  </span><span class="c1">// Definition hidden from users</span>
</pre></div>
</div>
</li>
<li><p><strong>Minimize header dependencies</strong>: Forward declare to avoid unnecessary includes [AVMCCS-T011]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// In header - don&#39;t need full definition</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Logger</span><span class="p">;</span><span class="w">  </span><span class="c1">// Forward declaration</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">process_with_logging</span><span class="p">(</span><span class="n">Data</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Logger</span><span class="w"> </span><span class="o">*</span><span class="n">logger</span><span class="p">);</span>

<span class="c1">// Only include full header in .c file where needed</span>
</pre></div>
</div>
</li>
<li><p><strong>Break circular dependencies</strong>: Use forward declarations when types reference each other [AVMCCS-T012]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Forward declarations allow mutual references</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Node</span><span class="w"> </span><span class="n">Node</span><span class="p">;</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Tree</span><span class="w"> </span><span class="n">Tree</span><span class="p">;</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">Node</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Tree</span><span class="w"> </span><span class="o">*</span><span class="n">owner</span><span class="p">;</span><span class="w">     </span><span class="c1">// Can reference Tree</span>
<span class="w">    </span><span class="n">Node</span><span class="w"> </span><span class="o">*</span><span class="n">next</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">Tree</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Node</span><span class="w"> </span><span class="o">*</span><span class="n">root</span><span class="p">;</span><span class="w">      </span><span class="c1">// Can reference Node</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
</ul>
<p>Benefits:</p>
<ul class="simple">
<li><p><strong>Faster compilation</strong>: Fewer headers to parse</p></li>
<li><p><strong>Better encapsulation</strong>: Implementation details stay private</p></li>
<li><p><strong>Stable APIs</strong>: Internal changes don’t affect users</p></li>
</ul>
</section>
</section>
<section id="memory-layout">
<h2>Memory Layout<a class="headerlink" href="#memory-layout" title="Link to this heading"></a></h2>
<section id="structure-alignment">
<h3>Structure Alignment<a class="headerlink" href="#structure-alignment" title="Link to this heading"></a></h3>
<p>Proper structure member ordering improves performance and reduces memory usage:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Largest to smallest ordering</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w">        </span><span class="c1">// 8 bytes</span>
<span class="w">    </span><span class="kt">int64_t</span><span class="w"> </span><span class="n">timestamp</span><span class="p">;</span><span class="w">   </span><span class="c1">// 8 bytes</span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w">         </span><span class="c1">// 4 bytes</span>
<span class="w">    </span><span class="kt">int16_t</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span><span class="w">      </span><span class="c1">// 2 bytes</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">status</span><span class="p">;</span><span class="w">        </span><span class="c1">// 1 byte</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">type</span><span class="p">;</span><span class="w">          </span><span class="c1">// 1 byte</span>
<span class="p">}</span><span class="w"> </span><span class="n">Measurement</span><span class="p">;</span><span class="w">  </span><span class="c1">// 24 bytes, well-packed</span>

<span class="c1">// Bad: Poor ordering wastes memory</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">status</span><span class="p">;</span><span class="w">        </span><span class="c1">// 1 byte + 7 padding</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w">       </span><span class="c1">// 8 bytes</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">type</span><span class="p">;</span><span class="w">          </span><span class="c1">// 1 byte + 3 padding</span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w">         </span><span class="c1">// 4 bytes</span>
<span class="p">}</span><span class="w"> </span><span class="n">WastefulMeasurement</span><span class="p">;</span><span class="w">  </span><span class="c1">// 24 bytes with 10 bytes wasted</span>
</pre></div>
</div>
<p><strong>Order structure members from largest to smallest</strong> [AVMCCS-M001]</p>
<p><strong>Benefits of proper alignment:</strong></p>
<ul class="simple">
<li><p><strong>Cache-efficient</strong>: Less padding means more data fits in cache lines</p></li>
<li><p><strong>Required on some platforms</strong>: Misaligned access can crash</p></li>
<li><p><strong>Space-efficient</strong>: Critical for arrays - saving 8 bytes per struct means 8MB saved per million elements</p></li>
</ul>
</section>
<section id="bit-field-conventions">
<h3>Bit Field Conventions<a class="headerlink" href="#bit-field-conventions" title="Link to this heading"></a></h3>
<p>Use bit fields sparingly for hardware interfaces, wire protocols, and advanced space saving [AVMCCS-M002]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Hardware register mapping</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">enable</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">priority</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">reserved</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">24</span><span class="p">;</span><span class="w">  </span><span class="c1">// Explicit padding</span>
<span class="p">}</span><span class="w"> </span><span class="n">ControlRegister</span><span class="p">;</span>

<span class="c1">// Good: Network protocol</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">header_length</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">PacketHeader</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Note</strong>: These examples assume natural alignment. For packed structures or specific alignment requirements, use compiler-specific attributes.</p>
<p><strong>Rules:</strong></p>
<ul class="simple">
<li><p><strong>Always use unsigned types</strong> for bit fields</p></li>
<li><p><strong>Explicitly pad</strong> to natural boundaries</p></li>
<li><p><strong>Avoid signed bit fields</strong> - behavior is confusing</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Bad: Signed bit field</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">BadExample</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">  </span><span class="c1">// Can only hold -1 or 0, not 0 or 1!</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="external-data-considerations">
<h3>External Data Considerations<a class="headerlink" href="#external-data-considerations" title="Link to this heading"></a></h3>
<p><strong>Byte order (endianness)</strong>: Network and file data may differ from CPU native order.
Convert network/file data to host byte order [AVMCCS-M003]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Network data is big-endian, most CPUs are little-endian</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">network_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">recv_from_network</span><span class="p">();</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">host_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ntohl</span><span class="p">(</span><span class="n">network_value</span><span class="p">);</span><span class="w">  </span><span class="c1">// Network to host long</span>
</pre></div>
</div>
<p><strong>Alignment of external data</strong>: Direct access to network/file buffers can cause crashes.
Use memcpy for potentially unaligned external data [AVMCCS-M004]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Bad: Direct cast of network buffer (may be misaligned)</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="n">network_buffer</span><span class="p">[</span><span class="n">offset</span><span class="p">];</span><span class="w">  </span><span class="c1">// Dangerous!</span>

<span class="c1">// Good: Use memcpy for potentially unaligned data</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="n">memcpy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">network_buffer</span><span class="p">[</span><span class="n">offset</span><span class="p">],</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">value</span><span class="p">));</span>
<span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ntohl</span><span class="p">(</span><span class="n">value</span><span class="p">);</span><span class="w">  </span><span class="c1">// Then convert byte order</span>
</pre></div>
</div>
</section>
</section>
<section id="object-management">
<h2>Object Management<a class="headerlink" href="#object-management" title="Link to this heading"></a></h2>
<section id="memory-management">
<h3>Memory Management<a class="headerlink" href="#memory-management" title="Link to this heading"></a></h3>
<section id="heap-allocation">
<h4>Heap Allocation<a class="headerlink" href="#heap-allocation" title="Link to this heading"></a></h4>
<p>Always check allocation failures [AVMCCS-M005]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Check and handle failure appropriately</span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">size</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">buffer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// For embedded systems: propagate error</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ERROR_OUT_OF_MEMORY</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// For applications: abort may be acceptable</span>
<span class="w">    </span><span class="n">abort</span><span class="p">();</span><span class="w">  </span><span class="c1">// Or log_fatal(&quot;Out of memory&quot;);</span>
<span class="p">}</span>

<span class="c1">// Consider calloc for zero-initialized memory</span>
<span class="n">User</span><span class="w"> </span><span class="o">*</span><span class="n">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calloc</span><span class="p">(</span><span class="n">count</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">User</span><span class="p">));</span><span class="w">  </span><span class="c1">// Already zeroed</span>
</pre></div>
</div>
<p>Every allocation must have a corresponding deallocation [AVMCCS-M006]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Balanced allocation and deallocation</span>
<span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">buffer_size</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">buffer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ERROR_OUT_OF_MEMORY</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// ... use buffer ...</span>
<span class="n">free</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span><span class="w">  </span><span class="c1">// Always free what you malloc</span>

<span class="c1">// Good: Track ownership carefully</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">;</span><span class="w">           </span><span class="c1">// Owned by this struct</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">ref</span><span class="p">;</span><span class="w">      </span><span class="c1">// Borrowed reference, don&#39;t free</span>
<span class="p">}</span><span class="w"> </span><span class="n">Example</span><span class="p">;</span>

<span class="n">Example</span><span class="w"> </span><span class="o">*</span><span class="nf">example_new</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">ref</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">Example</span><span class="w"> </span><span class="o">*</span><span class="n">ex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">Example</span><span class="p">));</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">ex</span><span class="o">-&gt;</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strdup</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w">  </span><span class="c1">// We allocate, we must free</span>
<span class="w">    </span><span class="n">ex</span><span class="o">-&gt;</span><span class="n">ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ref</span><span class="p">;</span><span class="w">            </span><span class="c1">// Borrowed, don&#39;t free</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">ex</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">free</span><span class="p">(</span><span class="n">ex</span><span class="p">);</span><span class="w">  </span><span class="c1">// Clean up on failure</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ex</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">example_delete</span><span class="p">(</span><span class="n">Example</span><span class="w"> </span><span class="o">*</span><span class="n">ex</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">free</span><span class="p">(</span><span class="n">ex</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">);</span><span class="w">  </span><span class="c1">// Free what we allocated</span>
<span class="w">        </span><span class="c1">// Don&#39;t free ex-&gt;ref - we don&#39;t own it</span>
<span class="w">        </span><span class="n">free</span><span class="p">(</span><span class="n">ex</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Key principles:</strong></p>
<ul class="simple">
<li><p>Every <code class="docutils literal notranslate"><span class="pre">malloc()</span></code>/<code class="docutils literal notranslate"><span class="pre">calloc()</span></code>/<code class="docutils literal notranslate"><span class="pre">realloc()</span></code> must have a matching <code class="docutils literal notranslate"><span class="pre">free()</span></code></p></li>
<li><p>Document ownership in structs and function documentation</p></li>
<li><p>Free in reverse order of allocation when possible</p></li>
<li><p>Set pointers to NULL after freeing to avoid use-after-free</p></li>
</ul>
<p><strong>Key principles:</strong></p>
<ul class="simple">
<li><p>Every <code class="docutils literal notranslate"><span class="pre">malloc()</span></code>/<code class="docutils literal notranslate"><span class="pre">calloc()</span></code>/<code class="docutils literal notranslate"><span class="pre">realloc()</span></code> must have a matching <code class="docutils literal notranslate"><span class="pre">free()</span></code></p></li>
<li><p>Document ownership in structs and function documentation</p></li>
<li><p>Free in reverse order of allocation when possible</p></li>
<li><p>Set pointers to NULL after freeing to avoid use-after-free</p></li>
</ul>
</section>
<section id="stack-allocation-limits">
<h4>Stack Allocation Limits<a class="headerlink" href="#stack-allocation-limits" title="Link to this heading"></a></h4>
<p>Avoid large stack allocations and variable-length arrays (VLAs):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Bad: VLAs are dangerous</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">];</span><span class="w">  </span><span class="c1">// Stack overflow risk, no compile-time checks</span>
<span class="p">}</span>

<span class="c1">// Bad: Large stack arrays</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="mi">8192</span><span class="p">];</span><span class="w">  </span><span class="c1">// Too large for stack</span>
<span class="p">}</span>

<span class="c1">// Good: Use heap for large or variable sizes</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// handle error here</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Guidelines:</strong></p>
<ul class="simple">
<li><p>Limit stack arrays to ~256 bytes [AVMCCS-M007]</p></li>
<li><p>Only use big stack arrays in leaf functions (don’t call other functions) [AVMCCS-M008]</p></li>
<li><p>Never use VLAs or <code class="docutils literal notranslate"><span class="pre">alloca()</span></code> - they prevent static stack analysis [AVMCCS-M009]</p></li>
<li><p>Prefer fixed-size arrays over VLAs - predictable is better than minimal [AVMCCS-M010]</p></li>
</ul>
<p><strong>Memory tips:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">free(NULL)</span></code> is safe - no need to check</p></li>
<li><p>Initialize pointers to NULL for clean cleanup paths</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">malloc(0)</span></code> is valid but implementation-defined - avoid if possible</p></li>
</ul>
</section>
</section>
<section id="initialization-and-cleanup-patterns">
<h3>Initialization and Cleanup Patterns<a class="headerlink" href="#initialization-and-cleanup-patterns" title="Link to this heading"></a></h3>
<p>C structures often require initialization and cleanup. Use consistent function naming to distinguish between simple initialization, complex resource management, and heap allocation:</p>
<section id="simple-initialization-avmccs-m011">
<h4>Simple Initialization [AVMCCS-M011]<a class="headerlink" href="#simple-initialization-avmccs-m011" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">_init</span></code></strong>: Initialize an object in-place (no cleanup needed)</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Simple initialization - no cleanup required</span>
<span class="n">DateTime</span><span class="w"> </span><span class="n">my_date</span><span class="p">;</span>
<span class="n">date_time_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">my_date</span><span class="p">,</span><span class="w"> </span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">);</span>
<span class="c1">// No cleanup needed - can safely go out of scope</span>
</pre></div>
</div>
</section>
<section id="stack-friendly-resource-management-avmccs-m012">
<h4>Stack-Friendly Resource Management [AVMCCS-M012]<a class="headerlink" href="#stack-friendly-resource-management-avmccs-m012" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">_create</span></code></strong>: Initialize complex object with internal resources (no malloc)</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">_destroy</span></code></strong>: Clean up internal resources (no free)</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Stack allocation with resource management</span>
<span class="n">Buffer</span><span class="w"> </span><span class="n">buffer</span><span class="p">;</span>
<span class="n">buffer_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span><span class="w">  </span><span class="c1">// Allocates internal buffer</span>
<span class="c1">// ... use buffer</span>
<span class="n">buffer_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">buffer</span><span class="p">);</span><span class="w">        </span><span class="c1">// Frees internal buffer</span>
</pre></div>
</div>
</section>
<section id="heap-allocated-objects-avmccs-m013">
<h4>Heap-Allocated Objects [AVMCCS-M013]<a class="headerlink" href="#heap-allocated-objects-avmccs-m013" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">_new</span></code></strong>: Allocate and initialize (malloc + create)</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">_delete</span></code></strong>: Clean up and deallocate (destroy + free)</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Heap allocation pattern</span>
<span class="n">User</span><span class="w"> </span><span class="o">*</span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user_new</span><span class="p">(</span><span class="s">&quot;Alice&quot;</span><span class="p">);</span>
<span class="c1">// ... use user</span>
<span class="n">user_delete</span><span class="p">(</span><span class="n">user</span><span class="p">);</span><span class="w">  </span><span class="c1">// Full cleanup and deallocation</span>
</pre></div>
</div>
</section>
</section>
<section id="usage-guidelines">
<h3>Usage Guidelines<a class="headerlink" href="#usage-guidelines" title="Link to this heading"></a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">_init</span></code> when:</p>
<ul class="simple">
<li><p>Object requires only simple field initialization</p></li>
<li><p>No internal resources are allocated</p></li>
<li><p>No corresponding cleanup is needed</p></li>
</ul>
<p>Use <code class="docutils literal notranslate"><span class="pre">_create</span></code>/<code class="docutils literal notranslate"><span class="pre">_destroy</span></code> when:</p>
<ul class="simple">
<li><p>Object is already allocated (e.g., on the stack)</p></li>
<li><p>Internal resources need allocation/cleanup (buffers, file handles, etc.)</p></li>
<li><p><strong>Important</strong>: <code class="docutils literal notranslate"><span class="pre">_destroy</span></code> must be called before the object goes out of scope</p></li>
</ul>
<p>Use <code class="docutils literal notranslate"><span class="pre">_new</span></code>/<code class="docutils literal notranslate"><span class="pre">_delete</span></code> when:</p>
<ul class="simple">
<li><p>Dynamic heap allocation is needed or preferred</p></li>
<li><p>Working with opaque types where size is not known to the caller</p></li>
<li><p>Object lifetime spans multiple scopes</p></li>
</ul>
</section>
</section>
<section id="documentation-and-comments">
<h2>Documentation and Comments<a class="headerlink" href="#documentation-and-comments" title="Link to this heading"></a></h2>
<section id="documentation-philosophy">
<h3>Documentation Philosophy<a class="headerlink" href="#documentation-philosophy" title="Link to this heading"></a></h3>
<p>Documentation should enhance code clarity without stating the obvious. Focus on contracts, safety requirements, and non-obvious behavior rather than restating what the code already expresses.</p>
<section id="what-to-document">
<h4>What to Document<a class="headerlink" href="#what-to-document" title="Link to this heading"></a></h4>
<p><strong>Always document:</strong></p>
<ul class="simple">
<li><p>All public APIs (minimum: brief description) [AVMCCS-D001]</p></li>
<li><p>Parameter relationships (array/length pairs, interdependencies) [AVMCCS-D002]</p></li>
<li><p>Memory ownership and lifetime requirements [AVMCCS-D003]</p></li>
<li><p>Units of measurement (even when already in parameter names) [AVMCCS-D004]</p></li>
<li><p>Preconditions and postconditions [AVMCCS-D005]</p></li>
<li><p>Side effects and thread safety [AVMCCS-D006]</p></li>
<li><p>Error handling behavior [AVMCCS-D007]</p></li>
<li><p>Non-obvious algorithmic complexity [AVMCCS-D008]</p></li>
</ul>
<p><strong>Avoid documenting:</strong></p>
<ul class="simple">
<li><p>Self-evident information (e.g., “increments the counter” for <code class="docutils literal notranslate"><span class="pre">counter_increment()</span></code>)</p></li>
<li><p>Implementation details in public API docs</p></li>
<li><p>Obvious parameters (e.g., “the string to process” for a <code class="docutils literal notranslate"><span class="pre">str</span></code> parameter)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span></code> direction for any parameters (it’s the default)</p></li>
</ul>
</section>
<section id="public-vs-private-apis">
<h4>Public vs Private APIs<a class="headerlink" href="#public-vs-private-apis" title="Link to this heading"></a></h4>
<p><strong>Public APIs</strong> (in headers):</p>
<ul class="simple">
<li><p>Use formal documentation system (e.g., Doxygen) [AVMCCS-D009]</p></li>
<li><p>Use Javadoc-style comments (<code class="docutils literal notranslate"><span class="pre">/**</span></code>) for Doxygen [AVMCCS-D010]</p></li>
<li><p>Complete parameter documentation with directions [AVMCCS-D011]</p></li>
<li><p>Include examples for non-trivial usage [AVMCCS-D012]</p></li>
<li><p>Document all error conditions [AVMCCS-D013]</p></li>
</ul>
<p><strong>Private APIs</strong> (static functions, internal headers):</p>
<ul class="simple">
<li><p>Use informal comments when clarification needed</p></li>
<li><p>Focus on “why” rather than “what”</p></li>
<li><p>Document only non-obvious behavior</p></li>
<li><p>Keep documentation close to code</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Public API in header - formal documentation</span>
<span class="cm">/**</span>
<span class="cm"> * @brief Calculate CRC32 checksum of data buffer</span>
<span class="cm"> *</span>
<span class="cm"> * @param data Buffer containing data to checksum</span>
<span class="cm"> * @param data_len Number of bytes in data buffer</span>
<span class="cm"> * @return CRC32 checksum value</span>
<span class="cm"> */</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">crc32_calculate</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">data</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">data_len</span><span class="p">);</span>

<span class="c1">// Private API in implementation - informal comment</span>
<span class="c1">// Uses lookup table for speed - see Sarwate&#39;s algorithm</span>
<span class="k">static</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="nf">crc32_byte</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">crc</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">byte</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="documentation-levels">
<h4>Documentation Levels<a class="headerlink" href="#documentation-levels" title="Link to this heading"></a></h4>
<p>Choose documentation depth based on API complexity and safety requirements:</p>
<ol class="arabic">
<li><p><strong>Minimal</strong>: Self-documenting functions need only brief description</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Check if buffer is empty</span>
<span class="cm"> */</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">buffer_is_empty</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Buffer</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong>Standard</strong>: Add parameters, return values, and specific error codes [AVMCCS-D014]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Parse integer from string</span>
<span class="cm"> *</span>
<span class="cm"> * @param str String containing integer representation</span>
<span class="cm"> * @param[out] out Parsed integer value (unchanged on error)</span>
<span class="cm"> * @return ParseIntOk on success, specific error code on failure</span>
<span class="cm"> * @retval ParseIntOk Successfully parsed</span>
<span class="cm"> * @retval ParseIntOverflow Value exceeds int32_t range</span>
<span class="cm"> * @retval ParseIntInvalidFormat Not a valid integer format</span>
<span class="cm"> */</span>
<span class="n">parse_int_result_t</span><span class="w"> </span><span class="nf">parse_int</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="o">*</span><span class="n">out</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong>Safety-Critical</strong>: Add preconditions, warnings, and detailed behavior [AVMCCS-D015]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Resize dynamic buffer</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in,out] buf Buffer to resize (must be initialized)</span>
<span class="cm"> * @param new_size New size in bytes</span>
<span class="cm"> * @pre buf != NULL &amp;&amp; buffer_is_valid(buf)</span>
<span class="cm"> * @post buf-&gt;capacity &gt;= new_size || return != ResizeOk</span>
<span class="cm"> * @warning Existing data preserved up to min(old_size, new_size)</span>
<span class="cm"> * @warning Pointers to buffer data invalidated after resize</span>
<span class="cm"> * @return ResizeOk on success, error code on failure</span>
<span class="cm"> */</span>
<span class="n">resize_result_t</span><span class="w"> </span><span class="nf">buffer_resize</span><span class="p">(</span><span class="n">Buffer</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">new_size</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="key-documentation-patterns">
<h4>Key Documentation Patterns<a class="headerlink" href="#key-documentation-patterns" title="Link to this heading"></a></h4>
<p><strong>Parameter Direction</strong>: Only annotate output and bidirectional parameters [AVMCCS-D016]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Parse configuration from string</span>
<span class="cm"> *</span>
<span class="cm"> * @param config_str Configuration string to parse</span>
<span class="cm"> * @param[in,out] line_count On input: max lines; on output: lines parsed</span>
<span class="cm"> * @param[out] result Parsed configuration (undefined on error)</span>
<span class="cm"> */</span>
<span class="n">config_parse_result_t</span><span class="w"> </span><span class="nf">config_parse</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">config_str</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="n">line_count</span><span class="p">,</span>
<span class="w">                                   </span><span class="n">Config</span><span class="w"> </span><span class="o">*</span><span class="n">result</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Array/Length Parameters</strong>: Always document the relationship [AVMCCS-D017]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Hash multiple data buffers</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in,out] hash Hash context (must be initialized)</span>
<span class="cm"> * @param chunks Array of data buffers to hash</span>
<span class="cm"> * @param sizes Array of buffer sizes (sizes[i] = length of chunks[i])</span>
<span class="cm"> * @param count Number of chunks (length of both arrays)</span>
<span class="cm"> */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">hash_update_multiple</span><span class="p">(</span><span class="n">Hash</span><span class="w"> </span><span class="o">*</span><span class="n">hash</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">chunks</span><span class="p">[],</span>
<span class="w">                         </span><span class="k">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">sizes</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">count</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Dual-Purpose Parameters</strong>: Clearly explain both uses [AVMCCS-D018]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Decode base64 data</span>
<span class="cm"> *</span>
<span class="cm"> * @param encoded Base64 encoded string</span>
<span class="cm"> * @param[out] decoded Output buffer for decoded data</span>
<span class="cm"> * @param[in,out] decoded_len On input: buffer capacity; on output: bytes written</span>
<span class="cm"> * @warning Output buffer must have capacity for at least (strlen(encoded) * 3/4) bytes</span>
<span class="cm"> */</span>
<span class="n">base64_result_t</span><span class="w"> </span><span class="nf">base64_decode</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">encoded</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">decoded</span><span class="p">[],</span>
<span class="w">                              </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="n">decoded_len</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Memory Ownership</strong>: Be explicit about allocation and lifetime [AVMCCS-D019]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Get configuration value</span>
<span class="cm"> *</span>
<span class="cm"> * @param config Configuration object</span>
<span class="cm"> * @param key Configuration key to look up</span>
<span class="cm"> * @return Pointer to configuration value (borrowed reference)</span>
<span class="cm"> * @warning Returned pointer valid only while config object exists</span>
<span class="cm"> * @warning Do not free returned pointer</span>
<span class="cm"> */</span>
<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="nf">config_get</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="o">*</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">key</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Take ownership of allocated buffer</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in,out] pool Memory pool</span>
<span class="cm"> * @param size Buffer size to allocate</span>
<span class="cm"> * @return Allocated buffer (caller owns memory)</span>
<span class="cm"> * @post Caller must free returned buffer with memory_pool_free()</span>
<span class="cm"> * @retval NULL Allocation failed</span>
<span class="cm"> */</span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="nf">memory_pool_alloc</span><span class="p">(</span><span class="n">MemoryPool</span><span class="w"> </span><span class="o">*</span><span class="n">pool</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Units</strong>: Document even when parameter names include units [AVMCCS-D020]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Set network timeout</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in,out] conn Connection object</span>
<span class="cm"> * @param timeout_ms Timeout in milliseconds (0 = no timeout)</span>
<span class="cm"> * @note Actual timeout may be rounded to system timer resolution</span>
<span class="cm"> */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">connection_set_timeout_ms</span><span class="p">(</span><span class="n">Connection</span><span class="w"> </span><span class="o">*</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">timeout_ms</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Macro Documentation</strong>: All public macros require documentation [AVMCCS-D021]</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @def MAX_PATH_LENGTH</span>
<span class="cm"> * @brief Maximum path length including null terminator</span>
<span class="cm"> */</span>
<span class="cp">#define MAX_PATH_LENGTH 4096</span>

<span class="cm">/**</span>
<span class="cm"> * @def ARRAY_SIZE(arr)</span>
<span class="cm"> * @brief Calculate number of elements in array</span>
<span class="cm"> * @param arr Array variable (not pointer)</span>
<span class="cm"> * @warning Only works with actual arrays, not pointers</span>
<span class="cm"> */</span>
<span class="cp">#define ARRAY_SIZE(arr) (sizeof(arr) / sizeof((arr)[0]))</span>
</pre></div>
</div>
</section>
</section>
<section id="code-comments">
<h3>Code Comments<a class="headerlink" href="#code-comments" title="Link to this heading"></a></h3>
<section id="comment-style">
<h4>Comment Style<a class="headerlink" href="#comment-style" title="Link to this heading"></a></h4>
<p>Use comments to explain why, not what. Default to comments above code blocks [AVMCCS-D022]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Explains why, not what</span>
<span class="c1">// Client expects response within 100ms, so we try cheaper cache first</span>
<span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cache_lookup</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">database_query</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
<span class="w">    </span><span class="n">cache_store</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Bad: States the obvious</span>
<span class="c1">// Look up in cache, then database</span>
<span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cache_lookup</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">database_query</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Use end-of-line comments sparingly, only for emphasis [AVMCCS-D023]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Good: Emphasizing critical detail</span>
<span class="n">do1</span><span class="p">();</span>
<span class="n">cache_invalidate</span><span class="p">();</span><span class="w">  </span><span class="c1">// Must invalidate after do1, before do2</span>
<span class="n">do2</span><span class="p">();</span>

<span class="c1">// Bad: Regular comments at end of line</span>
<span class="kt">int</span><span class="w"> </span><span class="n">counter</span><span class="p">;</span><span class="w">         </span><span class="c1">// Counter variable</span>
</pre></div>
</div>
</section>
<section id="comment-tags">
<h4>Comment Tags<a class="headerlink" href="#comment-tags" title="Link to this heading"></a></h4>
<p>Use standardized tags for actionable comments [AVMCCS-D024]:</p>
<ul class="simple">
<li><p><strong>TODO</strong>: Planned improvements or missing features</p></li>
<li><p><strong>FIXME</strong>: Known bugs that need fixing</p></li>
<li><p><strong>HACK</strong>: Temporary workarounds that should be improved</p></li>
<li><p><strong>WORKAROUND</strong>: Permanent workarounds for external issues</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// TODO: Add support for IPv6 addresses</span>
<span class="c1">// FIXME: Buffer overflow when input &gt; 1024 bytes</span>
<span class="c1">// HACK: Sleep to avoid race condition (remove after fixing event system)</span>
<span class="c1">// WORKAROUND: Library bug requires manual byte swapping</span>
</pre></div>
</div>
</section>
<section id="what-to-avoid">
<h4>What to Avoid<a class="headerlink" href="#what-to-avoid" title="Link to this heading"></a></h4>
<p>Never commit commented-out code without explanation [AVMCCS-D025]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Bad: No explanation</span>
<span class="c1">// old_function();</span>
<span class="c1">// more_old_code();</span>

<span class="c1">// Good: Explained reference</span>
<span class="cm">/*</span>
<span class="cm"> * Previous algorithm kept for reference (O(n²) but clearer):</span>
<span class="cm"> * for (i = 0; i &lt; n; i++)</span>
<span class="cm"> *     for (j = 0; j &lt; n; j++)</span>
<span class="cm"> *         process(i, j);</span>
<span class="cm"> */</span>
</pre></div>
</div>
<p>Avoid decorative comment blocks [AVMCCS-D026]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Bad: Unnecessary decoration</span>
<span class="cm">/************************</span>
<span class="cm"> * END OF INCLUDES      *</span>
<span class="cm"> ************************/</span>

<span class="c1">// Good: Simple section marker if needed</span>
<span class="c1">// === Public API ===</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="file-structure">
<h2>File Structure<a class="headerlink" href="#file-structure" title="Link to this heading"></a></h2>
<section id="style-exception-documentation">
<h3>Style Exception Documentation<a class="headerlink" href="#style-exception-documentation" title="Link to this heading"></a></h3>
<p>When a source file deviates from these guidelines, document the exception at the file’s beginning [AVMCCS-S001]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Copyright Header */</span>

<span class="cm">/* STYLE EXCEPTION: This file uses camelCase to maintain compatibility</span>
<span class="cm"> * with the third-party FooBar API. Function parameter order follows</span>
<span class="cm"> * FooBar conventions rather than our standard order.</span>
<span class="cm"> */</span>

<span class="cm">/* STYLE EXCEPTION: Legacy code - gradual migration in progress.</span>
<span class="cm"> * New functions follow the style guide.</span>
<span class="cm"> */</span>
</pre></div>
</div>
<p>Common exceptions:</p>
<ul class="simple">
<li><p>Third-party API compatibility</p></li>
<li><p>Platform-specific conventions</p></li>
<li><p>Legacy code under gradual migration</p></li>
<li><p>Generated code that cannot be modified</p></li>
</ul>
<p>Document exceptions clearly to prevent “fixing” during maintenance.</p>
</section>
<section id="header-files-h">
<h3>Header Files (.h)<a class="headerlink" href="#header-files-h" title="Link to this heading"></a></h3>
<p>Headers should follow this organization [AVMCCS-S002]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Copyright Header */</span>

<span class="cp">#ifndef _DATE_TIME_H_</span>
<span class="cp">#define _DATE_TIME_H_</span>

<span class="cp">#ifdef __cplusplus</span>
<span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="cp">#endif</span>

<span class="cm">/* System includes (alphabetical) */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdbool.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdint.h&gt;</span>

<span class="cm">/* Project includes (alphabetical) */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mylib/result.h&gt;</span>

<span class="cm">/* Macro definitions */</span>
<span class="cp">#define DATE_TIME_MAX_YEAR 9999</span>
<span class="cp">#define DATE_TIME_MIN_YEAR 1970</span>

<span class="cm">/* Type definitions */</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">day</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">DateTime</span><span class="p">;</span>

<span class="cm">/* Function declarations */</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">date_time_is_valid</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">dt</span><span class="p">);</span>
<span class="kt">int64_t</span><span class="w"> </span><span class="nf">date_time_diff_seconds</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">);</span>

<span class="cp">#ifdef __cplusplus</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cp">#endif </span><span class="cm">/* _DATE_TIME_H_ */</span>
</pre></div>
</div>
</section>
<section id="source-files-c">
<h3>Source Files (.c)<a class="headerlink" href="#source-files-c" title="Link to this heading"></a></h3>
<p>Source files should follow this organization [AVMCCS-S003]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Copyright Header */</span>

<span class="cm">/* Own header first */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;date_time.h&quot;</span>

<span class="cm">/* System includes (grouped and alphabetical) */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>

<span class="cm">/* POSIX/platform includes */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>

<span class="cm">/* Project includes */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mylib/logging.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mylib/validation.h&gt;</span>

<span class="cm">/* Private macro definitions */</span>
<span class="cp">#define DAYS_PER_WEEK 7</span>
<span class="cp">#define MONTHS_PER_YEAR 12</span>

<span class="cm">/* Private type definitions */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">ParserState</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">input</span><span class="p">;</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">position</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Static function declarations (if needed) */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">is_leap_year</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">);</span>

<span class="cm">/* Static function definitions (helpers first) */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">is_leap_year</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">400</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* Public function definitions (API functions last) */</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">date_time_is_valid</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">dt</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">dt</span><span class="o">-&gt;</span><span class="n">year</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">DATE_TIME_MIN_YEAR</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">dt</span><span class="o">-&gt;</span><span class="n">year</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">DATE_TIME_MAX_YEAR</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ... validation logic</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int64_t</span><span class="w"> </span><span class="nf">date_time_diff_seconds</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// ... implementation</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="include-guards">
<h3>Include Guards<a class="headerlink" href="#include-guards" title="Link to this heading"></a></h3>
<p>Use traditional include guards for maximum compatibility [AVMCCS-S004]:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifndef _MODULE_NAME_H_</span>
<span class="cp">#define _MODULE_NAME_H_</span>
<span class="cm">/* content */</span>
<span class="cp">#endif </span><span class="cm">/* _MODULE_NAME_H_ */</span>
</pre></div>
</div>
<p>Modern compilers may use <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">once</span></code> as an alternative.</p>
</section>
<section id="include-ordering">
<h3>Include Ordering<a class="headerlink" href="#include-ordering" title="Link to this heading"></a></h3>
<p>Group includes by origin, with alphabetical ordering within each group [AVMCCS-S005]:</p>
<ul class="simple">
<li><p><strong>Own module header</strong> (first in .c files only)</p></li>
<li><p><strong>C standard library</strong> (<code class="docutils literal notranslate"><span class="pre">&lt;stdio.h&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;string.h&gt;</span></code>, etc.)</p></li>
<li><p><strong>POSIX/system headers</strong> (<code class="docutils literal notranslate"><span class="pre">&lt;unistd.h&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;fcntl.h&gt;</span></code>, etc.)</p></li>
<li><p><strong>Third-party libraries</strong> (<code class="docutils literal notranslate"><span class="pre">&lt;curl/curl.h&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;sqlite3.h&gt;</span></code>, etc.)</p></li>
<li><p><strong>Project headers</strong> (<code class="docutils literal notranslate"><span class="pre">&lt;mylib/...&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;...&quot;</span></code> for local)</p></li>
</ul>
<p>Separate each group with a blank line for clarity.</p>
</section>
<section id="header-file-naming">
<h3>Header File Naming<a class="headerlink" href="#header-file-naming" title="Link to this heading"></a></h3>
<p>Header files should match their module names using underscores [AVMCCS-S006]:</p>
<ul class="simple">
<li><p>Module <code class="docutils literal notranslate"><span class="pre">date_time</span></code> → header file <code class="docutils literal notranslate"><span class="pre">date_time.h</span></code></p></li>
<li><p>Not <code class="docutils literal notranslate"><span class="pre">datetime.h</span></code> or <code class="docutils literal notranslate"><span class="pre">DateTime.h</span></code></p></li>
</ul>
<p>This maintains consistency with the module naming convention.</p>
</section>
</section>
<section id="rationale">
<h2>Rationale<a class="headerlink" href="#rationale" title="Link to this heading"></a></h2>
<section id="type-safety-through-explicit-interfaces">
<h3>Type Safety Through Explicit Interfaces<a class="headerlink" href="#type-safety-through-explicit-interfaces" title="Link to this heading"></a></h3>
<p>Using <code class="docutils literal notranslate"><span class="pre">(void)</span></code> for zero-parameter functions enables crucial compiler type checking. In pre-C23 versions of C, empty parentheses <code class="docutils literal notranslate"><span class="pre">()</span></code> create an old-style function declaration that accepts any number of arguments without type checking. This is a dangerous legacy feature that can hide serious bugs:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dangerous: compiler won&#39;t catch errors</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">process</span><span class="p">();</span><span class="w">          </span><span class="c1">// Old K&amp;R style - unspecified parameters</span>
<span class="n">process</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;error&quot;</span><span class="p">);</span><span class="w">    </span><span class="c1">// Compiles without warning!</span>

<span class="c1">// Safe: compiler enforces zero parameters</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w">      </span><span class="c1">// Explicit zero parameters</span>
<span class="n">process</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;error&quot;</span><span class="p">);</span><span class="w">    </span><span class="c1">// Compiler error: too many arguments</span>
</pre></div>
</div>
<p>While C23 changes <code class="docutils literal notranslate"><span class="pre">()</span></code> to mean zero parameters, using <code class="docutils literal notranslate"><span class="pre">(void)</span></code> ensures compatibility across all modern C versions and makes the intent explicit.</p>
</section>
<section id="type-safety-through-naming">
<h3>Type Safety Through Naming<a class="headerlink" href="#type-safety-through-naming" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">_t</span></code> suffix distinguishes scalar type aliases from composite types, making type relationships explicit. This enhances code readability and helps prevent type confusion:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Clear distinction between scalar and composite types</span>
<span class="n">user_id_t</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span><span class="w">           </span><span class="c1">// Scalar alias</span>
<span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">};</span><span class="w">      </span><span class="c1">// Composite type</span>
</pre></div>
</div>
</section>
<section id="type-suffix-convention-and-posix">
<h3>Type Suffix Convention and POSIX<a class="headerlink" href="#type-suffix-convention-and-posix" title="Link to this heading"></a></h3>
<p>While POSIX technically reserves the <code class="docutils literal notranslate"><span class="pre">_t</span></code> suffix for its own type definitions, this convention has become so widespread in C programming that avoiding it would be counterproductive. The <code class="docutils literal notranslate"><span class="pre">_t</span></code> suffix clearly distinguishes type aliases from variables and functions, improving code readability. Most modern C projects use this convention without issues, as name collisions with POSIX types are rare in practice when using descriptive, project-specific type names (e.g., <code class="docutils literal notranslate"><span class="pre">rgb_t</span></code> is unlikely to conflict with any POSIX type).</p>
<p>For projects requiring strict POSIX compliance, consider project-specific prefixes like <code class="docutils literal notranslate"><span class="pre">avm_rgb_t</span></code>.</p>
<p>This guide recommends continuing with <code class="docutils literal notranslate"><span class="pre">_t</span></code> for its widespread recognition and clarity benefits.</p>
</section>
<section id="namespace-simulation">
<h3>Namespace Simulation<a class="headerlink" href="#namespace-simulation" title="Link to this heading"></a></h3>
<p>Module prefixing simulates namespaces in C, reducing naming conflicts and improving code organization. This makes it easy to:</p>
<ul class="simple">
<li><p>Find all functions related to a module with grep</p></li>
<li><p>Avoid naming collisions in large projects</p></li>
<li><p>Understand code dependencies at a glance</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Clear module boundaries</span>
<span class="n">DateTime</span><span class="w"> </span><span class="n">start_time</span><span class="p">,</span><span class="w"> </span><span class="n">end_time</span><span class="p">;</span>
<span class="c1">// ...</span>
<span class="kt">int64_t</span><span class="w"> </span><span class="n">elapsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date_time_diff_seconds</span><span class="p">(</span><span class="o">&amp;</span><span class="n">start_time</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">end_time</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="implementation-flexibility">
<h3>Implementation Flexibility<a class="headerlink" href="#implementation-flexibility" title="Link to this heading"></a></h3>
<p>Using SCREAMING_SNAKE_CASE for all constants provides implementation flexibility - switching between <code class="docutils literal notranslate"><span class="pre">#define</span></code> and <code class="docutils literal notranslate"><span class="pre">enum</span></code> definitions is transparent to client code:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// These are interchangeable from a naming perspective</span>
<span class="cp">#define MAX_RETRIES 3</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">MAX_RETRIES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
</section>
<section id="visual-type-distinction">
<h3>Visual Type Distinction<a class="headerlink" href="#visual-type-distinction" title="Link to this heading"></a></h3>
<p>PascalCase for composite types creates immediate visual distinction, making it clear when a variable represents a structured data type rather than a scalar value:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">DateTime</span><span class="w"> </span><span class="n">meeting_time</span><span class="p">;</span><span class="w">    </span><span class="c1">// Clearly a struct/composite type</span>
<span class="kt">int32_t</span><span class="w"> </span><span class="n">user_id</span><span class="p">;</span><span class="w">         </span><span class="c1">// Clearly a scalar value</span>
</pre></div>
</div>
</section>
<section id="enumeration-vs-flag-semantics">
<h3>Enumeration vs Flag Semantics<a class="headerlink" href="#enumeration-vs-flag-semantics" title="Link to this heading"></a></h3>
<p>The casing distinction between enum values (PascalCase) and flag constants (SCREAMING_SNAKE_CASE) signals different usage patterns:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// PascalCase enums: finite, mutually exclusive - use switch statements</span>
<span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">connection_state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">ConnectionDisconnected</span><span class="p">:</span><span class="w"> </span><span class="cm">/* handle */</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">ConnectionConnected</span><span class="p">:</span><span class="w"> </span><span class="cm">/* handle */</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">ConnectionAuthenticating</span><span class="p">:</span><span class="w"> </span><span class="cm">/* handle */</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// Compiler can warn about missing cases</span>
<span class="p">}</span>

<span class="c1">// SCREAMING_SNAKE_CASE flags: combinable - use bit operations</span>
<span class="n">font_style_flags_t</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FONT_BOLD</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FONT_ITALIC</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">style</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">FONT_BOLD</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Handle bold styling</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="early-return-pattern">
<h3>Early Return Pattern<a class="headerlink" href="#early-return-pattern" title="Link to this heading"></a></h3>
<p>The early return pattern reduces cognitive load by handling edge cases first, leaving the main logic unindented and easier to follow. This mirrors how we naturally think about problems - deal with special cases, then focus on the core logic.</p>
</section>
<section id="goto-for-cleanup">
<h3>Goto for Cleanup<a class="headerlink" href="#goto-for-cleanup" title="Link to this heading"></a></h3>
<p>Using <code class="docutils literal notranslate"><span class="pre">goto</span></code> for cleanup provides a structured, predictable pattern that:</p>
<ul class="simple">
<li><p>Avoids code duplication (single cleanup path)</p></li>
<li><p>Handles all error cases consistently</p></li>
<li><p>Follows a well-established C idiom</p></li>
<li><p>Is more maintainable than nested if-else chains</p></li>
</ul>
</section>
<section id="context-structs-over-globals">
<h3>Context Structs Over Globals<a class="headerlink" href="#context-structs-over-globals" title="Link to this heading"></a></h3>
<p>The context struct pattern provides numerous benefits:</p>
<ul class="simple">
<li><p><strong>Testability</strong>: Easy to create isolated test contexts</p></li>
<li><p><strong>Thread safety</strong>: Each thread can have its own context</p></li>
<li><p><strong>Explicit dependencies</strong>: Functions clearly state what they need</p></li>
<li><p><strong>No hidden state</strong>: All dependencies are visible in function signatures</p></li>
</ul>
</section>
<section id="separate-flag-types">
<h3>Separate Flag Types<a class="headerlink" href="#separate-flag-types" title="Link to this heading"></a></h3>
<p>Distinguishing between enum definitions and flag types solves a fundamental type safety issue in C. When you OR flags together (<code class="docutils literal notranslate"><span class="pre">FONT_BOLD</span> <span class="pre">|</span> <span class="pre">FONT_ITALIC</span></code>), the result is not a member of the enum. By using a separate <code class="docutils literal notranslate"><span class="pre">_flags_t</span></code> type, we acknowledge this reality while maintaining clarity about what values are acceptable.</p>
</section>
<section id="documentation-as-contract">
<h3>Documentation as Contract<a class="headerlink" href="#documentation-as-contract" title="Link to this heading"></a></h3>
<p>Well-documented APIs form contracts between implementers and users. Documentation that focuses on preconditions, postconditions, and invariants helps understand safe usage patterns. This is especially critical in C where type systems cannot express ownership, lifetime, or thread safety requirements.</p>
</section>
<section id="avoiding-documentation-debt">
<h3>Avoiding Documentation Debt<a class="headerlink" href="#avoiding-documentation-debt" title="Link to this heading"></a></h3>
<p>Over-documentation creates maintenance burden and obscures important information. By documenting only what adds value beyond the code itself, we keep documentation synchronized with implementation. Self-documenting code through good naming reduces documentation needs - when <code class="docutils literal notranslate"><span class="pre">buffer_is_empty()</span></code> clearly returns a boolean indicating emptiness, extensive documentation adds no value.</p>
</section>
<section id="public-private-distinction">
<h3>Public/Private Distinction<a class="headerlink" href="#public-private-distinction" title="Link to this heading"></a></h3>
<p>Using formal documentation only for public APIs creates clear boundaries in generated documentation. This helps users focus on intended interfaces without being distracted by implementation details. Private functions can still have informal comments for maintainers without cluttering public documentation.</p>
<p>This convention system creates self-documenting code where the naming pattern immediately conveys the semantic role of each identifier.</p>
</section>
</section>
<section id="quick-reference">
<h2>Quick Reference<a class="headerlink" href="#quick-reference" title="Link to this heading"></a></h2>
<section id="formatting-rules">
<h3>Formatting Rules<a class="headerlink" href="#formatting-rules" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Rule</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Braces</p></td>
<td><p>K&amp;R variant (new line for functions/types)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">f(void)\n{</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Indentation</p></td>
<td><p>4 spaces, no tabs</p></td>
<td><p><code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(x)</span> <span class="pre">{</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Pointer <code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td><p>With variable name</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*name</span></code> not <code class="docutils literal notranslate"><span class="pre">char*</span> <span class="pre">name</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Line length</p></td>
<td><p>&lt; 100 columns</p></td>
<td><p>Use intermediate variables</p></td>
</tr>
<tr class="row-even"><td><p>Hex numbers</p></td>
<td><p>Uppercase letters</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0xDEADBEEF</span></code> not <code class="docutils literal notranslate"><span class="pre">0xdeadbeef</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Variable declarations</p></td>
<td><p>One per line (generally)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*first;\nchar</span> <span class="pre">*last;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Function spacing</p></td>
<td><p>One empty line between</p></td>
<td><p>See AVMCCS-F008</p></td>
</tr>
<tr class="row-odd"><td><p>Initializer braces</p></td>
<td><p>Same line as declaration</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">values[]</span> <span class="pre">=</span> <span class="pre">{1,</span> <span class="pre">2,</span> <span class="pre">3};</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="spacing-rules">
<h3>Spacing Rules<a class="headerlink" href="#spacing-rules" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Context</p></th>
<th class="head"><p>Rule</p></th>
<th class="head"><p>Good</p></th>
<th class="head"><p>Bad</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Control structures</p></td>
<td><p>Space after keyword</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(x)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">if(x)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Function calls</p></td>
<td><p>No space before <code class="docutils literal notranslate"><span class="pre">(</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">func()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">func</span> <span class="pre">()</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Comments</p></td>
<td><p>Space after marker</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">//</span> <span class="pre">text</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">//text</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Operators</p></td>
<td><p>Spaces around binary ops</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a+b</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Braces</p></td>
<td><p>Space before <code class="docutils literal notranslate"><span class="pre">{</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(x)</span> <span class="pre">{</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(x){</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Casts</p></td>
<td><p>Space after <code class="docutils literal notranslate"><span class="pre">)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(int</span> <span class="pre">*)</span> <span class="pre">ptr</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(int</span> <span class="pre">*)ptr</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="empty-line-guidelines">
<h3>Empty Line Guidelines<a class="headerlink" href="#empty-line-guidelines" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Location</p></th>
<th class="head"><p>When to Use</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Before return</p></td>
<td><p>Functions &gt; 3 lines</p></td>
</tr>
<tr class="row-odd"><td><p>Between logical blocks</p></td>
<td><p>Separate steps in functions</p></td>
</tr>
<tr class="row-even"><td><p>Between cases</p></td>
<td><p>Switch cases &gt; 3 lines</p></td>
</tr>
<tr class="row-odd"><td><p>After guard clauses</p></td>
<td><p>Separate validation from logic</p></td>
</tr>
<tr class="row-even"><td><p>Control flow blocks</p></td>
<td><p>Compact for ≤3 lines, spaced for longer</p></td>
</tr>
<tr class="row-odd"><td><p>Between functions</p></td>
<td><p>Exactly one empty line</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id1">
<h3>Language Constructs<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Rule</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Variable declaration</p></td>
<td><p>Declare at first use (C99+)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">(int</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">0;</span> <span class="pre">i</span> <span class="pre">&lt;</span> <span class="pre">n;</span> <span class="pre">i++)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Empty parameters</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">(void)</span></code> not <code class="docutils literal notranslate"><span class="pre">()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">get_count(void);</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Modern headers</p></td>
<td><p>Use standard headers</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;stdint.h&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;stdbool.h&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Declaration order</p></td>
<td><p>storage, qualifiers, type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">const</span> <span class="pre">int</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Increment preference</p></td>
<td><p>Post-increment for idiom</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">(int</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">0;</span> <span class="pre">i</span> <span class="pre">&lt;</span> <span class="pre">n;</span> <span class="pre">i++)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Early exit</p></td>
<td><p>Guard clauses reduce nesting</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(!valid)</span> <span class="pre">{</span> <span class="pre">return;</span> <span class="pre">}</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Switch preference</p></td>
<td><p>Use for 3+ comparisons</p></td>
<td><p>Clearer than if-else chains</p></td>
</tr>
<tr class="row-odd"><td><p>Goto usage</p></td>
<td><p>Only for cleanup patterns</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">goto</span> <span class="pre">cleanup;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Static assertions</p></td>
<td><p>Compile-time validation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_Static_assert(sizeof(T)</span> <span class="pre">==</span> <span class="pre">24,</span> <span class="pre">&quot;msg&quot;);</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="id2">
<h3>Naming Conventions<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Element</p></th>
<th class="head"><p>Convention</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Composite types</p></td>
<td><p>PascalCase</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DateTime</span></code>, <code class="docutils literal notranslate"><span class="pre">User</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Enum types</p></td>
<td><p>lower_snake_case + <code class="docutils literal notranslate"><span class="pre">_t</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">result_t</span></code>, <code class="docutils literal notranslate"><span class="pre">connection_state_t</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Enum values</p></td>
<td><p>PascalCase + prefix</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ConnectionConnected</span></code>, <code class="docutils literal notranslate"><span class="pre">DigitalReadFailed</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Flag enums</p></td>
<td><p>Singular + <code class="docutils literal notranslate"><span class="pre">_t</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">permission_t</span></code>, <code class="docutils literal notranslate"><span class="pre">font_style_t</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Flag types</p></td>
<td><p>Singular + <code class="docutils literal notranslate"><span class="pre">_flags_t</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">permission_flags_t</span></code>, <code class="docutils literal notranslate"><span class="pre">font_style_flags_t</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Constants/Flags</p></td>
<td><p>SCREAMING_SNAKE_CASE</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MAX_RETRIES</span></code>, <code class="docutils literal notranslate"><span class="pre">FONT_BOLD</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Functions/Variables</p></td>
<td><p>lower_snake_case</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">date_time_diff</span></code>, <code class="docutils literal notranslate"><span class="pre">user_id</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Scalar type aliases</p></td>
<td><p>lower_snake_case + <code class="docutils literal notranslate"><span class="pre">_t</span></code> suffix</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">user_id_t</span></code>, <code class="docutils literal notranslate"><span class="pre">float_or_int32_t</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Function prefixes</p></td>
<td><p>Module-based</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">date_time_*</span></code>, <code class="docutils literal notranslate"><span class="pre">buffer_*</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Static functions</p></td>
<td><p>No module prefix</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">validate_date()</span></code> not <code class="docutils literal notranslate"><span class="pre">date_time_validate_date()</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Struct fields</p></td>
<td><p>lower_snake_case</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hour_offset</span></code> not <code class="docutils literal notranslate"><span class="pre">hourOffset</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Macros</p></td>
<td><p>SCREAMING_SNAKE_CASE</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MAX()</span></code>, <code class="docutils literal notranslate"><span class="pre">ARRAY_SIZE()</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Internal structs</p></td>
<td><p>PascalCase with <code class="docutils literal notranslate"><span class="pre">struct</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ParserState</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="acronym-handling">
<h3>Acronym Handling<a class="headerlink" href="#acronym-handling" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Context</p></th>
<th class="head"><p>Rule</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PascalCase</p></td>
<td><p>Keep capitalized</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CSVParser</span></code>, <code class="docutils literal notranslate"><span class="pre">URLHandler</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>To snake_case</p></td>
<td><p>Treat as one word</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CSVParser</span></code> → <code class="docutils literal notranslate"><span class="pre">csv_parser</span></code></p></td>
</tr>
<tr class="row-even"><td><p>To SCREAMING_SNAKE</p></td>
<td><p>Treat as one word</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CSVParser</span></code> → <code class="docutils literal notranslate"><span class="pre">CSV_PARSER</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="declaration-order">
<h3>Declaration Order<a class="headerlink" href="#declaration-order" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Element</p></th>
<th class="head"><p>Order</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Functions</p></td>
<td><p>storage, function-spec, return-type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">inline</span> <span class="pre">void</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Variables</p></td>
<td><p>storage, type-qualifier, type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">const</span> <span class="pre">int</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Constants</p></td>
<td><p>storage, const, type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*const</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>With restrict</p></td>
<td><p>After other qualifiers</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*restrict</span> <span class="pre">src</span></code></p></td>
</tr>
<tr class="row-even"><td><p>With volatile</p></td>
<td><p>Between storage and type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">volatile</span> <span class="pre">sig_atomic_t</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>With _Atomic</p></td>
<td><p>As type qualifier</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_Atomic</span> <span class="pre">int</span> <span class="pre">counter</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="flag-type-summary">
<h3>Flag Type Summary<a class="headerlink" href="#flag-type-summary" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Naming</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>State enums</p></td>
<td><p>Mutually exclusive states</p></td>
<td><p>Singular: <code class="docutils literal notranslate"><span class="pre">file_state_t</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Flag enum definition</p></td>
<td><p>Individual flag constants</p></td>
<td><p>Singular: <code class="docutils literal notranslate"><span class="pre">permission_t</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Combined flags type</p></td>
<td><p>Bitwise combinations</p></td>
<td><p>Singular + <code class="docutils literal notranslate"><span class="pre">_flags_t</span></code>: <code class="docutils literal notranslate"><span class="pre">permission_flags_t</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="collection-naming">
<h3>Collection Naming<a class="headerlink" href="#collection-naming" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Context</p></th>
<th class="head"><p>Convention</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Arrays</p></td>
<td><p>Plural with <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">User</span> <span class="pre">users[]</span></code>, <code class="docutils literal notranslate"><span class="pre">Node</span> <span class="pre">nodes[]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Array lengths</p></td>
<td><p>Match array name + <code class="docutils literal notranslate"><span class="pre">_len</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">users_len</span></code>, <code class="docutils literal notranslate"><span class="pre">nodes_len</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Non-array collections</p></td>
<td><p>Type suffix recommended</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">user_list</span></code>, <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">id_set</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Element counts</p></td>
<td><p>Singular + <code class="docutils literal notranslate"><span class="pre">_count</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">user_count</span></code>, <code class="docutils literal notranslate"><span class="pre">node_count</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Functions returning one</p></td>
<td><p>Singular</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">find_user()</span></code>, <code class="docutils literal notranslate"><span class="pre">get_node()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Functions returning many</p></td>
<td><p>Plural</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">get_users()</span></code>, <code class="docutils literal notranslate"><span class="pre">find_nodes()</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="function-naming-patterns">
<h3>Function Naming Patterns<a class="headerlink" href="#function-naming-patterns" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pattern</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_to</span></code> / <code class="docutils literal notranslate"><span class="pre">_from</span></code></p></td>
<td><p>Infallible conversions</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">color_to_hsv()</span></code>, <code class="docutils literal notranslate"><span class="pre">color_from_rgb()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_is</span></code> / <code class="docutils literal notranslate"><span class="pre">_has</span></code> / <code class="docutils literal notranslate"><span class="pre">_can</span></code></p></td>
<td><p>Predicates (return bool)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">date_time_is_valid()</span></code>, <code class="docutils literal notranslate"><span class="pre">user_has_permission()</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_buf</span></code> suffix</p></td>
<td><p>Non-NULL-terminated buffers</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">count_spaces_in_buf(buf,</span> <span class="pre">buf_len)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Unit suffixes</p></td>
<td><p>Measurement clarity</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">delay_ms()</span></code>, <code class="docutils literal notranslate"><span class="pre">rotate_deg()</span></code></p></td>
</tr>
<tr class="row-even"><td><p>No <code class="docutils literal notranslate"><span class="pre">string</span></code> suffix</p></td>
<td><p>Default is C string</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">parse_iso8601()</span></code> not <code class="docutils literal notranslate"><span class="pre">parse_iso8601_string()</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="id3">
<h3>Object Management<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function Pattern</p></th>
<th class="head"><p>Allocation</p></th>
<th class="head"><p>Cleanup Required</p></th>
<th class="head"><p>Usage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_init</span></code></p></td>
<td><p>Stack-friendly</p></td>
<td><p>No</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">date_time_init(&amp;obj,</span> <span class="pre">2025,</span> <span class="pre">4,</span> <span class="pre">25)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_create</span></code> / <code class="docutils literal notranslate"><span class="pre">_destroy</span></code></p></td>
<td><p>Stack with resources</p></td>
<td><p>Yes</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">buffer_create(&amp;obj,</span> <span class="pre">1024)</span></code>, <code class="docutils literal notranslate"><span class="pre">buffer_destroy(&amp;obj)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_new</span></code> / <code class="docutils literal notranslate"><span class="pre">_delete</span></code></p></td>
<td><p>Heap-allocated</p></td>
<td><p>Yes</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">user_new(&quot;Alice&quot;)</span></code>, <code class="docutils literal notranslate"><span class="pre">user_delete(obj)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="pointer-type-usage">
<h3>Pointer Type Usage<a class="headerlink" href="#pointer-type-usage" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Purpose</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code></p></td>
<td><p>Generic memory operations</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">malloc()</span></code>, <code class="docutils literal notranslate"><span class="pre">memcpy()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">uint8_t</span> <span class="pre">*</span></code></p></td>
<td><p>Binary data buffers</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hash_compute()</span></code>, <code class="docutils literal notranslate"><span class="pre">base64_encode()</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*</span></code></p></td>
<td><p>C strings or text buffers</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">strcpy()</span></code>, <code class="docutils literal notranslate"><span class="pre">utf8_validate()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">char8_t</span> <span class="pre">*</span></code></p></td>
<td><p>Explicit UTF-8 (C23)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">utf8_normalize()</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="const-placement">
<h3>Const Placement<a class="headerlink" href="#const-placement" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pattern</p></th>
<th class="head"><p>Meaning</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">T</span> <span class="pre">*ptr</span></code></p></td>
<td><p>Pointer to const data</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*str</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">*const</span> <span class="pre">ptr</span></code></p></td>
<td><p>Const pointer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*const</span> <span class="pre">buffer</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">T</span> <span class="pre">*const</span> <span class="pre">ptr</span></code></p></td>
<td><p>Const pointer to const data</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*const</span> <span class="pre">names[]</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="control-flow-guidelines">
<h3>Control Flow Guidelines<a class="headerlink" href="#control-flow-guidelines" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pattern</p></th>
<th class="head"><p>When to Use</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Early exit</p></td>
<td><p>Reduce nesting</p></td>
<td><p>Guard clause with braces</p></td>
</tr>
<tr class="row-odd"><td><p>Switch</p></td>
<td><p>Testing one variable for 3+ values</p></td>
<td><p>More efficient and clear</p></td>
</tr>
<tr class="row-even"><td><p>Empty lines in switch</p></td>
<td><p>Cases &gt; 3 lines</p></td>
<td><p>Improves readability</p></td>
</tr>
<tr class="row-odd"><td><p>Goto for cleanup</p></td>
<td><p>Resource management</p></td>
<td><p>Single cleanup path</p></td>
</tr>
</tbody>
</table>
</section>
<section id="api-design-patterns">
<h3>API Design Patterns<a class="headerlink" href="#api-design-patterns" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pattern</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Parameter order</p></td>
<td><p>target, inputs, outputs, options, environment</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">parse_csv(data,</span> <span class="pre">len,</span> <span class="pre">&amp;table,</span> <span class="pre">opts,</span> <span class="pre">env)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Array + length</p></td>
<td><p>Arrays always followed by length</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">process(arr,</span> <span class="pre">arr_len)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Error handling</p></td>
<td><p>Return status, output via parameters</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(parse_int(str,</span> <span class="pre">&amp;val)</span> <span class="pre">!=</span> <span class="pre">ParseIntOk)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Enums over bools</p></td>
<td><p>Self-documenting options</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">UserMessageBlinking</span></code> not <code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Array syntax</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code> for multiple items, <code class="docutils literal notranslate"><span class="pre">*</span></code> for single</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">sort(int</span> <span class="pre">arr[],</span> <span class="pre">size_t</span> <span class="pre">len)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Global state</p></td>
<td><p>Use context struct, not globals</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">process(Request</span> <span class="pre">*req,</span> <span class="pre">GlobalContext</span> <span class="pre">*ctx)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Struct parameters</p></td>
<td><p>Always pass by pointer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">update(User</span> <span class="pre">*user)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="type-selection">
<h3>Type Selection<a class="headerlink" href="#type-selection" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Purpose</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Sizes/lengths</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">size_t</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">len</span> <span class="pre">=</span> <span class="pre">strlen(str)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Pointer as integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">uintptr_t</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">uintptr_t</span> <span class="pre">addr</span> <span class="pre">=</span> <span class="pre">(uintptr_t)ptr</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Pointer difference</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ptrdiff_t</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ptrdiff_t</span> <span class="pre">off</span> <span class="pre">=</span> <span class="pre">p2</span> <span class="pre">-</span> <span class="pre">p1</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Fixed sizes</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">uint32_t</span></code>, <code class="docutils literal notranslate"><span class="pre">int64_t</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">crc32</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Binary data</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">uint8_t</span> <span class="pre">*</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hash_compute(uint8_t</span> <span class="pre">data[])</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Function pointers</p></td>
<td><p>Always typedef</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">typedef</span> <span class="pre">void</span> <span class="pre">(*callback_t)(int)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="id4">
<h3>Macro Safety<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Rule</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Parenthesize parameters</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">SQUARE(x)</span> <span class="pre">((x)</span> <span class="pre">*</span> <span class="pre">(x))</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Parenthesize entire expression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">MAX(a,</span> <span class="pre">b)</span> <span class="pre">((a)</span> <span class="pre">&gt;</span> <span class="pre">(b)</span> <span class="pre">?</span> <span class="pre">(a)</span> <span class="pre">:</span> <span class="pre">(b))</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Multi-statement pattern</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">SWAP(a,</span> <span class="pre">b)</span> <span class="pre">do</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span> <span class="pre">while</span> <span class="pre">(0)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Watch for side effects</p></td>
<td><p>Don’t use with <code class="docutils literal notranslate"><span class="pre">++</span></code> or function calls</p></td>
</tr>
<tr class="row-even"><td><p>Avoid variable shadowing</p></td>
<td><p>Use unique names in macros</p></td>
</tr>
</tbody>
</table>
</section>
<section id="memory-guidelines">
<h3>Memory Guidelines<a class="headerlink" href="#memory-guidelines" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Topic</p></th>
<th class="head"><p>Rule</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Stack arrays</p></td>
<td><p>~256 bytes max</p></td>
<td><p>Larger needs heap allocation</p></td>
</tr>
<tr class="row-odd"><td><p>VLAs</p></td>
<td><p>Never use</p></td>
<td><p>Security risk, prevents analysis</p></td>
</tr>
<tr class="row-even"><td><p>Allocation checks</p></td>
<td><p>Always check malloc</p></td>
<td><p>Handle or abort</p></td>
</tr>
<tr class="row-odd"><td><p>Allocation pairing</p></td>
<td><p>Every malloc needs a free</p></td>
<td><p>Track ownership carefully</p></td>
</tr>
<tr class="row-even"><td><p>Cleanup</p></td>
<td><p>Use goto pattern</p></td>
<td><p>Initialize pointers to NULL</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">free(NULL)</span></code></p></td>
<td><p>Safe, no check needed</p></td>
<td><p>Simplifies cleanup</p></td>
</tr>
<tr class="row-even"><td><p>Struct alignment</p></td>
<td><p>Largest to smallest</p></td>
<td><p>Minimize padding</p></td>
</tr>
<tr class="row-odd"><td><p>Bit fields</p></td>
<td><p>Always use unsigned types</p></td>
<td><p>Signed bit fields have confusing behavior</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id5">
<h3>Static Assertions<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Use Case</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Struct size verification</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_Static_assert(sizeof(T)</span> <span class="pre">==</span> <span class="pre">24,</span> <span class="pre">&quot;Size</span> <span class="pre">changed&quot;)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Layout assumptions</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_Static_assert(offsetof(T,</span> <span class="pre">field)</span> <span class="pre">==</span> <span class="pre">8,</span> <span class="pre">&quot;Layout</span> <span class="pre">changed&quot;)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Config validation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_Static_assert(MAX</span> <span class="pre">&gt;=</span> <span class="pre">MIN,</span> <span class="pre">&quot;Invalid</span> <span class="pre">config&quot;)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Platform assumptions</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_Static_assert(sizeof(int)</span> <span class="pre">==</span> <span class="pre">4,</span> <span class="pre">&quot;Needs</span> <span class="pre">32-bit</span> <span class="pre">int&quot;)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Enum bounds</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_Static_assert(StateMax</span> <span class="pre">&lt;=</span> <span class="pre">255,</span> <span class="pre">&quot;Exceeds</span> <span class="pre">uint8_t&quot;)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="header-naming-convention">
<h3>Header Naming Convention<a class="headerlink" href="#header-naming-convention" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Module Name</p></th>
<th class="head"><p>Header File</p></th>
<th class="head"><p>Not</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">date_time</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">date_time.h</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">datetime.h</span></code>, <code class="docutils literal notranslate"><span class="pre">DateTime.h</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">csv_parser</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">csv_parser.h</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">csvparser.h</span></code>, <code class="docutils literal notranslate"><span class="pre">CSVParser.h</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">buffer_pool</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">buffer_pool.h</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BufferPool.h</span></code>, <code class="docutils literal notranslate"><span class="pre">buffer-pool.h</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="common-unit-suffixes">
<h3>Common Unit Suffixes<a class="headerlink" href="#common-unit-suffixes" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Category</p></th>
<th class="head"><p>Suffixes</p></th>
<th class="head"><p>Examples</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Time</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_ms</span></code>, <code class="docutils literal notranslate"><span class="pre">_us</span></code>, <code class="docutils literal notranslate"><span class="pre">_ns</span></code>, <code class="docutils literal notranslate"><span class="pre">_sec</span></code>, <code class="docutils literal notranslate"><span class="pre">_min</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">delay_ms(100)</span></code>, <code class="docutils literal notranslate"><span class="pre">timeout_sec</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Distance</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_mm</span></code>, <code class="docutils literal notranslate"><span class="pre">_cm</span></code>, <code class="docutils literal notranslate"><span class="pre">_m</span></code>, <code class="docutils literal notranslate"><span class="pre">_km</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">distance_km</span></code>, <code class="docutils literal notranslate"><span class="pre">gap_mm</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Angles</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_deg</span></code>, <code class="docutils literal notranslate"><span class="pre">_rad</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rotate_deg(90)</span></code>, <code class="docutils literal notranslate"><span class="pre">angle_rad</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Data</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">_kib</span></code>, <code class="docutils literal notranslate"><span class="pre">_mib</span></code>, <code class="docutils literal notranslate"><span class="pre">_gib</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">buffer_size_bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">cache_mib</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Frequency</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_hz</span></code>, <code class="docutils literal notranslate"><span class="pre">_khz</span></code>, <code class="docutils literal notranslate"><span class="pre">_mhz</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sample_rate_khz</span></code>, <code class="docutils literal notranslate"><span class="pre">clock_mhz</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Speed</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_rpm</span></code>, <code class="docutils literal notranslate"><span class="pre">_kmh</span></code>, <code class="docutils literal notranslate"><span class="pre">_mps</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">motor_rpm</span></code>, <code class="docutils literal notranslate"><span class="pre">velocity_mps</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="typedef-and-forward-declarations">
<h3>Typedef and Forward Declarations<a class="headerlink" href="#typedef-and-forward-declarations" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pattern</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Public API types</p></td>
<td><p>Use typedef in headers</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">typedef</span> <span class="pre">struct</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span> <span class="pre">DateTime;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Internal types</p></td>
<td><p>Use explicit struct keyword</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ParserState</span> <span class="pre">state;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Function pointers</p></td>
<td><p>Always use typedef</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">typedef</span> <span class="pre">void</span> <span class="pre">(*handler_t)(Event</span> <span class="pre">*);</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Opaque types</p></td>
<td><p>Forward declare in headers</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">typedef</span> <span class="pre">struct</span> <span class="pre">Buffer</span> <span class="pre">Buffer;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Circular dependencies</p></td>
<td><p>Use forward declarations</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">typedef</span> <span class="pre">struct</span> <span class="pre">Node</span> <span class="pre">Node;</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="external-data-handling">
<h3>External Data Handling<a class="headerlink" href="#external-data-handling" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Issue</p></th>
<th class="head"><p>Solution</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Byte order</p></td>
<td><p>Convert to host order</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">=</span> <span class="pre">ntohl(network_value)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Alignment</p></td>
<td><p>Use memcpy for safety</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">memcpy(&amp;val,</span> <span class="pre">&amp;buffer[off],</span> <span class="pre">4)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="id6">
<h3>Comment Tags<a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Tag</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TODO</p></td>
<td><p>Planned improvements</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">//</span> <span class="pre">TODO:</span> <span class="pre">Add</span> <span class="pre">IPv6</span> <span class="pre">support</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>FIXME</p></td>
<td><p>Known bugs</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">//</span> <span class="pre">FIXME:</span> <span class="pre">Buffer</span> <span class="pre">overflow</span> <span class="pre">risk</span></code></p></td>
</tr>
<tr class="row-even"><td><p>HACK</p></td>
<td><p>Temporary workarounds</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">//</span> <span class="pre">HACK:</span> <span class="pre">Sleep</span> <span class="pre">to</span> <span class="pre">avoid</span> <span class="pre">race</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>WORKAROUND</p></td>
<td><p>Permanent fixes for external issues</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">//</span> <span class="pre">WORKAROUND:</span> <span class="pre">Library</span> <span class="pre">bug</span> <span class="pre">#123</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="documentation-guidelines">
<h3>Documentation Guidelines<a class="headerlink" href="#documentation-guidelines" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>What to Document</p></th>
<th class="head"><p>When</p></th>
<th class="head"><p>Level of Detail</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>All public APIs</p></td>
<td><p>Always</p></td>
<td><p>Minimum: &#64;brief description</p></td>
</tr>
<tr class="row-odd"><td><p>Parameter directions</p></td>
<td><p>Output/bidirectional pointers</p></td>
<td><p>&#64;param[out] or [in,out]</p></td>
</tr>
<tr class="row-even"><td><p>Array/length relationships</p></td>
<td><p>Always</p></td>
<td><p>Explicit connection in &#64;param</p></td>
</tr>
<tr class="row-odd"><td><p>Memory ownership</p></td>
<td><p>When not obvious</p></td>
<td><p>Who allocates, who frees</p></td>
</tr>
<tr class="row-even"><td><p>Lifetime requirements</p></td>
<td><p>Borrowed pointers</p></td>
<td><p>How long reference is valid</p></td>
</tr>
<tr class="row-odd"><td><p>Units</p></td>
<td><p>Always</p></td>
<td><p>Even if in parameter name</p></td>
</tr>
<tr class="row-even"><td><p>Error behavior</p></td>
<td><p>Non-trivial functions</p></td>
<td><p>What happens to outputs on error</p></td>
</tr>
<tr class="row-odd"><td><p>Preconditions</p></td>
<td><p>When assumptions exist</p></td>
<td><p>&#64;pre conditions</p></td>
</tr>
<tr class="row-even"><td><p>Side effects</p></td>
<td><p>Always</p></td>
<td><p>Threading, global state, etc.</p></td>
</tr>
<tr class="row-odd"><td><p>Complexity</p></td>
<td><p>When not O(1) or O(n)</p></td>
<td><p>Big-O notation</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>What NOT to Document</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Obvious parameters</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;param</span> <span class="pre">str</span> <span class="pre">the</span> <span class="pre">string</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Self-evident behavior</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">increments</span> <span class="pre">the</span> <span class="pre">counter</span></code> for <code class="docutils literal notranslate"><span class="pre">counter_increment()</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Implementation details</p></td>
<td><p>Internal algorithms in public API docs</p></td>
</tr>
<tr class="row-odd"><td><p>Input direction [in]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;param[in]</span> <span class="pre">str</span></code> redundant (it’s the default)</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Documentation Patterns</p></th>
<th class="head"><p>Usage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Minimal (brief only)</p></td>
<td><p>Simple predicates, getters</p></td>
</tr>
<tr class="row-odd"><td><p>Standard (+params, return)</p></td>
<td><p>Most public functions</p></td>
</tr>
<tr class="row-even"><td><p>Safety-critical (+pre/post/warning)</p></td>
<td><p>Functions with preconditions</p></td>
</tr>
<tr class="row-odd"><td><p>Complete (+examples, see also)</p></td>
<td><p>Complex APIs, templates for users</p></td>
</tr>
</tbody>
</table>
</section>
<section id="file-organization">
<h3>File Organization<a class="headerlink" href="#file-organization" title="Link to this heading"></a></h3>
<p><strong>Header files (.h):</strong></p>
<ol class="arabic simple">
<li><p>Copyright header</p></li>
<li><p>Include guard (<code class="docutils literal notranslate"><span class="pre">#ifndef</span></code>)</p></li>
<li><p>C++ guard (<code class="docutils literal notranslate"><span class="pre">#ifdef</span> <span class="pre">__cplusplus</span></code>)</p></li>
<li><p>System includes (alphabetical)</p></li>
<li><p>Project includes (alphabetical)</p></li>
<li><p>Macro definitions</p></li>
<li><p>Type definitions</p></li>
<li><p>Function declarations</p></li>
<li><p>C++ guard close</p></li>
<li><p>Include guard close (<code class="docutils literal notranslate"><span class="pre">#endif</span></code>)</p></li>
</ol>
<p><strong>Source files (.c):</strong></p>
<ol class="arabic simple">
<li><p>Copyright header</p></li>
<li><p>Own header include</p></li>
<li><p>System includes (alphabetical)</p></li>
<li><p>POSIX/platform includes</p></li>
<li><p>Project includes</p></li>
<li><p>Private macro definitions</p></li>
<li><p>Private type definitions</p></li>
<li><p>Static function declarations</p></li>
<li><p>Static function definitions</p></li>
<li><p>Public function definitions</p></li>
</ol>
</section>
</section>
<section id="appendix-tool-configuration">
<h2>Appendix: Tool Configuration<a class="headerlink" href="#appendix-tool-configuration" title="Link to this heading"></a></h2>
<section id="clang-format">
<h3>clang-format<a class="headerlink" href="#clang-format" title="Link to this heading"></a></h3>
<p>This style guide can be largely enforced using clang-format. Create a <code class="docutils literal notranslate"><span class="pre">.clang-format</span></code> file in your project root:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># AtomVM C Coding Style Guide - clang-format configuration</span>
<span class="c1"># Place this in .clang-format at your project root</span>

<span class="nt">BasedOnStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LLVM</span>

<span class="c1"># Indentation (rules: AVMCCS-F003)</span>
<span class="nt">IndentWidth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="nt">TabWidth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="nt">UseTab</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Never</span>

<span class="c1"># Line length (rules: AVMCCS-F006)</span>
<span class="nt">ColumnLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>

<span class="c1"># Brace placement (rules: AVMCCS-F001, AVMCCS-F002)</span>
<span class="nt">BreakBeforeBraces</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Custom</span>
<span class="nt">BraceWrapping</span><span class="p">:</span>
<span class="w">  </span><span class="nt">AfterFunction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">AfterStruct</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">AfterEnum</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">AfterUnion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">AfterControlStatement</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">BeforeElse</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">BeforeWhile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="c1"># Spacing (rules: AVMCCS-F004, AVMCCS-F015, AVMCCS-F016, AVMCCS-F018, AVMCCS-F020)</span>
<span class="nt">PointerAlignment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Right</span><span class="w">                     </span><span class="c1"># AVMCCS-F004: * with variable</span>
<span class="nt">SpaceAfterCStyleCast</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">                  </span><span class="c1"># AVMCCS-F018: Space after cast</span>
<span class="nt">SpacesInCStyleCastParentheses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">SpaceBeforeParens</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlStatements</span><span class="w">        </span><span class="c1"># AVMCCS-F015: Space after keywords</span>
<span class="nt">SpaceBeforeAssignmentOperators</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">       </span><span class="c1"># AVMCCS-F020: Spaces around operators</span>
<span class="nt">SpaceInEmptyParentheses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w">              </span><span class="c1"># AVMCCS-F016: No space in function calls</span>

<span class="c1"># Line breaking (rules: AVMCCS-F002)</span>
<span class="nt">AllowShortFunctionsOnASingleLine</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>
<span class="nt">AllowShortIfStatementsOnASingleLine</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Never</span>
<span class="nt">AllowShortLoopsOnASingleLine</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">AlwaysBreakAfterReturnType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>
<span class="nt">BreakBeforeBinaryOperators</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="c1"># Other formatting (rules: AVMCCS-F008, AVMCCS-F017)</span>
<span class="nt">MaxEmptyLinesToKeep</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w">                      </span><span class="c1"># AVMCCS-F008: One empty line between functions</span>
<span class="nt">SpacesBeforeTrailingComments</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w">             </span><span class="c1"># AVMCCS-F017: Space after //</span>

<span class="c1"># Include ordering (rules: AVMCCS-S005)</span>
<span class="nt">SortIncludes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CaseSensitive</span>
<span class="nt">IncludeBlocks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Preserve</span>
<span class="nt">IncludeCategories</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Regex</span><span class="p">:</span><span class="w">           </span><span class="s">&#39;^&quot;.*\.h&quot;&#39;</span><span class="w">              </span><span class="c1"># Own headers</span>
<span class="w">    </span><span class="nt">Priority</span><span class="p">:</span><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Regex</span><span class="p">:</span><span class="w">           </span><span class="s">&#39;^&lt;(assert|ctype|errno|float|limits|locale|math|setjmp|signal|stdarg|stddef|stdio|stdlib|string|time)\.h&gt;&#39;</span>
<span class="w">    </span><span class="nt">Priority</span><span class="p">:</span><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w">                       </span><span class="c1"># C standard library</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Regex</span><span class="p">:</span><span class="w">           </span><span class="s">&#39;^&lt;(aio|arpa/|cpio|dirent|dlfcn|fcntl|fmtmsg|fnmatch|ftw|glob|grp|iconv|langinfo|libgen|monetary|mqueue|ndbm|net/|netdb|netinet/|nl_types|poll|pthread|pwd|regex|sched|search|semaphore|spawn|strings|stropts|sys/|syslog|tar|termios|trace|ulimit|unistd|utime|utmpx|wordexp)\.h&gt;&#39;</span>
<span class="w">    </span><span class="nt">Priority</span><span class="p">:</span><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w">                       </span><span class="c1"># POSIX headers</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Regex</span><span class="p">:</span><span class="w">           </span><span class="s">&#39;^&lt;.*&gt;&#39;</span>
<span class="w">    </span><span class="nt">Priority</span><span class="p">:</span><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">4</span><span class="w">                       </span><span class="c1"># Third-party libraries</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Regex</span><span class="p">:</span><span class="w">           </span><span class="s">&#39;.*&#39;</span>
<span class="w">    </span><span class="nt">Priority</span><span class="p">:</span><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w">                       </span><span class="c1"># Project headers</span>
</pre></div>
</div>
<p><strong>Usage</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Format a single file</span>
clang-format<span class="w"> </span>-i<span class="w"> </span>source.c

<span class="c1"># Format all C files in project</span>
find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.c&quot;</span><span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.h&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>clang-format<span class="w"> </span>-i

<span class="c1"># Check formatting without modifying</span>
clang-format<span class="w"> </span>--dry-run<span class="w"> </span>--Werror<span class="w"> </span>source.c
</pre></div>
</div>
</section>
<section id="limitations-of-clang-format">
<h3>Limitations of clang-format<a class="headerlink" href="#limitations-of-clang-format" title="Link to this heading"></a></h3>
<p>clang-format cannot enforce many aspects of this style guide:</p>
<p><strong>Not enforced by clang-format:</strong></p>
<ul class="simple">
<li><p>Naming conventions (functions, variables, types) - use clang-tidy instead</p></li>
<li><p>Header file organization and include grouping semantics beyond alphabetical sorting</p></li>
<li><p>Function parameter ordering patterns (AVMCCS-A001)</p></li>
<li><p>Semantic spacing (empty lines between logical blocks within functions - AVMCCS-F012)</p></li>
<li><p>Empty lines before return statements (AVMCCS-F011)</p></li>
<li><p>Comment quality or presence</p></li>
<li><p>Static assertion placement</p></li>
<li><p>Memory management patterns</p></li>
<li><p>API design patterns (enums vs bools)</p></li>
<li><p>Declaration order semantics (AVMCCS-L004)</p></li>
<li><p>Array vs pointer syntax choices (AVMCCS-A004)</p></li>
<li><p>Hexadecimal letter case (AVMCCS-F019) - clang-format preserves existing case</p></li>
<li><p>Initializer brace placement (AVMCCS-F021) - limited control available</p></li>
</ul>
<p><strong>These require additional tools:</strong></p>
<ul class="simple">
<li><p><strong>clang-tidy</strong>: For naming conventions and deeper analysis</p></li>
<li><p><strong>Code review</strong>: For semantic patterns and API design</p></li>
<li><p><strong>Custom linters</strong>: For project-specific rules</p></li>
<li><p><strong>Developer discipline</strong>: For consistency</p></li>
</ul>
</section>
<section id="clang-tidy-configuration">
<h3>clang-tidy Configuration<a class="headerlink" href="#clang-tidy-configuration" title="Link to this heading"></a></h3>
<p>To enforce naming conventions and additional checks, create <code class="docutils literal notranslate"><span class="pre">.clang-tidy</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># AtomVM C Coding Style Guide - clang-tidy configuration</span>

<span class="c1"># Enable only specific checks (avoid using wildcards)</span>
<span class="nt">Checks</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">  </span><span class="no">-*,</span>
<span class="w">  </span><span class="no">readability-identifier-naming,</span>
<span class="w">  </span><span class="no">readability-isolate-declaration,</span>
<span class="w">  </span><span class="no">readability-else-after-return,</span>
<span class="w">  </span><span class="no">readability-braces-around-statements,</span>
<span class="w">  </span><span class="no">misc-definitions-in-headers,</span>
<span class="w">  </span><span class="no">bugprone-macro-parentheses</span>

<span class="nt">CheckOptions</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Naming conventions (rules: AVMCCS-N003, AVMCCS-N004, AVMCCS-N005, AVMCCS-N007, AVMCCS-N008, AVMCCS-N009, AVMCCS-N019, AVMCCS-N020)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-identifier-naming.FunctionCase</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lower_case</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-identifier-naming.VariableCase</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lower_case</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-identifier-naming.ParameterCase</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lower_case</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-identifier-naming.GlobalVariableCase</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lower_case</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-identifier-naming.LocalVariableCase</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lower_case</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-identifier-naming.StructCase</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CamelCase</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-identifier-naming.UnionCase</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CamelCase</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-identifier-naming.EnumCase</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lower_case</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-identifier-naming.EnumConstantCase</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CamelCase</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-identifier-naming.MacroDefinitionCase</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">UPPER_CASE</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-identifier-naming.TypedefCase</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lower_case</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-identifier-naming.TypedefSuffix</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;_t&#39;</span>

<span class="w">  </span><span class="c1"># One variable per declaration (rule: AVMCCS-F005)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-isolate-declaration.Enabled</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">  </span><span class="c1"># Early return pattern (rule: AVMCCS-L009)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-else-after-return.WarnOnUnfixable</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="w">  </span><span class="c1"># Always use braces (rule: AVMCCS-F002)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">readability-braces-around-statements.ShortStatementLines</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0&#39;</span>
</pre></div>
</div>
<p><strong>Usage</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run clang-tidy on a file</span>
clang-tidy<span class="w"> </span>source.c<span class="w"> </span>--<span class="w"> </span>-I./include

<span class="c1"># Run on entire project with compile_commands.json</span>
clang-tidy<span class="w"> </span>-p<span class="w"> </span>build/<span class="w"> </span>source.c
</pre></div>
</div>
</section>
<section id="limitations-of-clang-tidy">
<h3>Limitations of clang-tidy<a class="headerlink" href="#limitations-of-clang-tidy" title="Link to this heading"></a></h3>
<p>clang-tidy cannot enforce all AVMCCS rules:</p>
<p><strong>Not enforced by clang-tidy:</strong></p>
<ul class="simple">
<li><p>Empty parameter lists using <code class="docutils literal notranslate"><span class="pre">(void)</span></code> (AVMCCS-L002) - no C-specific check available</p></li>
<li><p>Specific module prefixing patterns (AVMCCS-N017, AVMCCS-N018)</p></li>
<li><p>Complex naming patterns like array pluralization (AVMCCS-N011, AVMCCS-N012)</p></li>
<li><p>API parameter ordering (AVMCCS-A001)</p></li>
<li><p>Context structure usage over globals (AVMCCS-A005)</p></li>
<li><p>Memory allocation size limits (AVMCCS-M007, AVMCCS-M008)</p></li>
<li><p>Goto cleanup patterns (AVMCCS-L011)</p></li>
<li><p>Documentation requirements (AVMCCS-D001 through AVMCCS-D026)</p></li>
<li><p>File structure organization (AVMCCS-S002, AVMCCS-S003)</p></li>
</ul>
<p><strong>Limited enforcement:</strong></p>
<ul class="simple">
<li><p>Some checks are C++-oriented and may produce false positives for C code</p></li>
<li><p>Macro safety (AVMCCS-L015-L017) is only partially checked by <code class="docutils literal notranslate"><span class="pre">bugprone-macro-parentheses</span></code></p></li>
<li><p>Memory management patterns require multiple checks that may not cover all cases</p></li>
</ul>
</section>
<section id="editor-integration">
<h3>Editor Integration<a class="headerlink" href="#editor-integration" title="Link to this heading"></a></h3>
<p>Most modern editors support clang-format integration:</p>
<ul class="simple">
<li><p><strong>VS Code</strong>: Install the C/C++ extension, format on save</p></li>
<li><p><strong>Vim</strong>: Use vim-clang-format plugin</p></li>
<li><p><strong>Emacs</strong>: Use clang-format.el</p></li>
<li><p><strong>CLion</strong>: Built-in support under Code Style settings</p></li>
</ul>
</section>
<section id="git-hooks">
<h3>Git Hooks<a class="headerlink" href="#git-hooks" title="Link to this heading"></a></h3>
<p>Add a pre-commit hook to ensure consistent formatting:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="c1"># .git/hooks/pre-commit</span>

<span class="c1"># Format staged C files</span>
<span class="k">for</span><span class="w"> </span>file<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>git<span class="w"> </span>diff<span class="w"> </span>--cached<span class="w"> </span>--name-only<span class="w"> </span>--diff-filter<span class="o">=</span>ACM<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;\.(c|h)$&#39;</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span>clang-format<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span>
<span class="w">    </span>git<span class="w"> </span>add<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span>
<span class="k">done</span>
</pre></div>
</div>
</section>
<section id="static-analysis">
<h3>Static Analysis<a class="headerlink" href="#static-analysis" title="Link to this heading"></a></h3>
<p>Consider using additional tools alongside formatting:</p>
<ul class="simple">
<li><p><strong>cppcheck</strong>: For additional static analysis</p></li>
<li><p><strong>include-what-you-use</strong>: To maintain clean includes</p></li>
<li><p><strong>Custom scripts</strong>: For project-specific naming patterns and conventions</p></li>
</ul>
</section>
</section>
<section id="appendix-doxygen-documentation-examples">
<h2>Appendix: Doxygen Documentation Examples<a class="headerlink" href="#appendix-doxygen-documentation-examples" title="Link to this heading"></a></h2>
<p>This appendix provides Doxygen documentation examples using Javadoc-style comments (<code class="docutils literal notranslate"><span class="pre">/**</span></code>). All examples follow standard Doxygen syntax without custom extensions.</p>
<section id="basic-predicate-documentation">
<h3>Basic Predicate Documentation<a class="headerlink" href="#basic-predicate-documentation" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Check if date/time is valid</span>
<span class="cm"> *</span>
<span class="cm"> * @param dt DateTime structure to validate</span>
<span class="cm"> * @return true if all fields contain valid values, false otherwise</span>
<span class="cm"> */</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">date_time_is_valid</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">dt</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Test if user has specific permission</span>
<span class="cm"> *</span>
<span class="cm"> * @param user User object to check</span>
<span class="cm"> * @param perm Permission flag to test</span>
<span class="cm"> * @return true if user has permission, false otherwise</span>
<span class="cm"> */</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">user_has_permission</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="o">*</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">permission_t</span><span class="w"> </span><span class="n">perm</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="standard-function-documentation">
<h3>Standard Function Documentation<a class="headerlink" href="#standard-function-documentation" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Parse ISO 8601 date/time from buffer</span>
<span class="cm"> *</span>
<span class="cm"> * Parses timestamps in RFC 3339 format from a non-null-terminated buffer.</span>
<span class="cm"> * Supports fractional seconds up to microsecond precision and timezone</span>
<span class="cm"> * offsets. The buffer may contain additional data after the timestamp.</span>
<span class="cm"> *</span>
<span class="cm"> * @param buf Buffer containing ISO 8601 formatted string</span>
<span class="cm"> * @param buf_len Length of buffer in bytes</span>
<span class="cm"> * @param[out] dt Parsed DateTime structure (undefined on error)</span>
<span class="cm"> *</span>
<span class="cm"> * @return Parsing result code</span>
<span class="cm"> * @retval ParseIso8601Ok Successfully parsed complete timestamp</span>
<span class="cm"> * @retval ParseIso8601InvalidFormat Format does not match ISO 8601</span>
<span class="cm"> * @retval ParseIso8601InvalidDate Date values out of valid range</span>
<span class="cm"> * @retval ParseIso8601BufferTooSmall Buffer smaller than minimum timestamp</span>
<span class="cm"> *</span>
<span class="cm"> * @note Accepts formats: &quot;2025-04-25T10:30:00Z&quot;, &quot;2025-04-25T10:30:00.123456Z&quot;,</span>
<span class="cm"> *       &quot;2025-04-25T10:30:00+05:30&quot;, &quot;2025-04-25T10:30:00.123-08:00&quot;</span>
<span class="cm"> *</span>
<span class="cm"> * @code</span>
<span class="cm"> * // Parse timestamp from network packet</span>
<span class="cm"> * DateTime dt;</span>
<span class="cm"> * parse_iso8601_result_t result = date_time_parse_iso8601_buf(packet-&gt;data,</span>
<span class="cm"> *                                                             packet-&gt;data_len, &amp;dt);</span>
<span class="cm"> * if (result != ParseIso8601Ok) {</span>
<span class="cm"> *     log_error(&quot;Invalid timestamp: %s&quot;,</span>
<span class="cm"> *               parse_iso8601_result_string(result));</span>
<span class="cm"> *     return PROTOCOL_ERROR;</span>
<span class="cm"> * }</span>
<span class="cm"> * // dt now contains parsed timestamp</span>
<span class="cm"> * @endcode</span>
<span class="cm"> *</span>
<span class="cm"> * @see date_time_parse_iso8601() for null-terminated string variant</span>
<span class="cm"> * @see date_time_format_iso8601() for formatting timestamps</span>
<span class="cm"> */</span>
<span class="n">parse_iso8601_result_t</span><span class="w"> </span><span class="nf">date_time_parse_iso8601_buf</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">buf</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buf_len</span><span class="p">,</span>
<span class="w">                                                   </span><span class="n">DateTime</span><span class="w"> </span><span class="o">*</span><span class="n">dt</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="complex-api-documentation-with-safety-requirements">
<h3>Complex API Documentation with Safety Requirements<a class="headerlink" href="#complex-api-documentation-with-safety-requirements" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Create hash context for incremental hashing</span>
<span class="cm"> *</span>
<span class="cm"> * Allocates and initializes a new hash context for the specified algorithm.</span>
<span class="cm"> * The context allows incremental hashing of data through multiple update calls.</span>
<span class="cm"> *</span>
<span class="cm"> * @param algorithm Hashing algorithm to use</span>
<span class="cm"> * @param options Algorithm-specific options (may be NULL for defaults)</span>
<span class="cm"> *</span>
<span class="cm"> * @return Newly allocated hash context</span>
<span class="cm"> * @retval NULL Allocation failed or unsupported algorithm</span>
<span class="cm"> *</span>
<span class="cm"> * @post Caller must free context with hash_delete()</span>
<span class="cm"> * @post Context is initialized and ready for hash_update() calls</span>
<span class="cm"> *</span>
<span class="cm"> * @warning Do not use context after hash_finalize() without reset</span>
<span class="cm"> * @warning Context is not thread-safe; use one context per thread</span>
<span class="cm"> *</span>
<span class="cm"> * @code</span>
<span class="cm"> * // Hash a large file in chunks</span>
<span class="cm"> * Hash *hash = hash_new(HashSHA256, NULL);</span>
<span class="cm"> * if (!hash) {</span>
<span class="cm"> *     return ERROR_OUT_OF_MEMORY;</span>
<span class="cm"> * }</span>
<span class="cm"> *</span>
<span class="cm"> * uint8_t buffer[4096];</span>
<span class="cm"> * size_t bytes_read;</span>
<span class="cm"> * while ((bytes_read = fread(buffer, 1, sizeof(buffer), file)) &gt; 0) {</span>
<span class="cm"> *     hash_update(hash, buffer, bytes_read);</span>
<span class="cm"> * }</span>
<span class="cm"> *</span>
<span class="cm"> * uint8_t result[HASH_SHA256_SIZE];</span>
<span class="cm"> * hash_finalize(hash, result);</span>
<span class="cm"> * hash_delete(hash);</span>
<span class="cm"> * @endcode</span>
<span class="cm"> *</span>
<span class="cm"> * @see hash_update() to add data to hash</span>
<span class="cm"> * @see hash_finalize() to compute final hash value</span>
<span class="cm"> * @see hash_reset() to reuse context for new hash</span>
<span class="cm"> * @since v2.0</span>
<span class="cm"> */</span>
<span class="n">Hash</span><span class="w"> </span><span class="o">*</span><span class="nf">hash_new</span><span class="p">(</span><span class="n">hash_algorithm_t</span><span class="w"> </span><span class="n">algorithm</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">HashOptions</span><span class="w"> </span><span class="o">*</span><span class="n">options</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Update hash with additional data</span>
<span class="cm"> *</span>
<span class="cm"> * Processes additional data through the hash algorithm. Can be called</span>
<span class="cm"> * multiple times to hash data incrementally.</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in,out] hash Hash context (must be initialized)</span>
<span class="cm"> * @param data Data buffer to hash</span>
<span class="cm"> * @param data_len Number of bytes to hash from data buffer</span>
<span class="cm"> *</span>
<span class="cm"> * @pre hash != NULL &amp;&amp; hash_is_valid(hash)</span>
<span class="cm"> * @pre data != NULL || data_len == 0</span>
<span class="cm"> * @pre hash_finalize() not yet called on this context</span>
<span class="cm"> *</span>
<span class="cm"> * @note Zero-length updates are valid but do not change hash state</span>
<span class="cm"> * @warning Data is processed immediately; buffer can be reused after return</span>
<span class="cm"> */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">hash_update</span><span class="p">(</span><span class="n">Hash</span><span class="w"> </span><span class="o">*</span><span class="n">hash</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">data</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">data_len</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Finalize hash calculation and retrieve result</span>
<span class="cm"> *</span>
<span class="cm"> * Completes the hash calculation and writes the result to the output buffer.</span>
<span class="cm"> * After finalization, the context cannot accept more data without reset.</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in,out] hash Hash context with data to finalize</span>
<span class="cm"> * @param[out] result Output buffer for hash result</span>
<span class="cm"> *</span>
<span class="cm"> * @pre hash != NULL &amp;&amp; hash_is_valid(hash)</span>
<span class="cm"> * @pre result != NULL &amp;&amp; has sufficient size for algorithm</span>
<span class="cm"> * @post Context is finalized; hash_update() will fail until reset</span>
<span class="cm"> * @post result contains computed hash value</span>
<span class="cm"> *</span>
<span class="cm"> * @warning Output buffer must be at least hash_size(hash-&gt;algorithm) bytes</span>
<span class="cm"> * @note Context remains allocated; use hash_delete() to free</span>
<span class="cm"> *</span>
<span class="cm"> * @code</span>
<span class="cm"> * uint8_t sha256_hash[HASH_SHA256_SIZE];</span>
<span class="cm"> * hash_finalize(hash, sha256_hash);</span>
<span class="cm"> * // sha256_hash now contains the computed SHA-256 hash</span>
<span class="cm"> * @endcode</span>
<span class="cm"> */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">hash_finalize</span><span class="p">(</span><span class="n">Hash</span><span class="w"> </span><span class="o">*</span><span class="n">hash</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">result</span><span class="p">[]);</span>
</pre></div>
</div>
</section>
<section id="memory-management-documentation">
<h3>Memory Management Documentation<a class="headerlink" href="#memory-management-documentation" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Allocate buffer from memory pool</span>
<span class="cm"> *</span>
<span class="cm"> * Allocates a buffer of the requested size from the pool. The allocation</span>
<span class="cm"> * is tracked by the pool and must be freed using memory_pool_free() or released</span>
<span class="cm"> * when the entire pool is destroyed.</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in,out] pool Memory pool to allocate from</span>
<span class="cm"> * @param size Number of bytes to allocate</span>
<span class="cm"> * @param alignment Required alignment (must be power of 2)</span>
<span class="cm"> *</span>
<span class="cm"> * @return Pointer to allocated memory</span>
<span class="cm"> * @retval NULL Allocation failed (pool exhausted or size too large)</span>
<span class="cm"> *</span>
<span class="cm"> * @pre pool != NULL &amp;&amp; memory_pool_is_valid(pool)</span>
<span class="cm"> * @pre alignment &gt; 0 &amp;&amp; (alignment &amp; (alignment - 1)) == 0</span>
<span class="cm"> * @post Returned memory is aligned to requested boundary</span>
<span class="cm"> * @post Returned memory is uninitialized</span>
<span class="cm"> *</span>
<span class="cm"> * @warning Memory becomes invalid when pool is destroyed</span>
<span class="cm"> * @warning Do not use standard free() on returned pointer</span>
<span class="cm"> *</span>
<span class="cm"> * @note Consider memory_pool_calloc() for zero-initialized memory</span>
<span class="cm"> * @note Pool may allocate more than requested for alignment</span>
<span class="cm"> *</span>
<span class="cm"> * @code</span>
<span class="cm"> * // Allocate aligned buffer for SIMD operations</span>
<span class="cm"> * float *vectors = memory_pool_alloc_aligned(pool, 100 * sizeof(float), 16);</span>
<span class="cm"> * if (!vectors) {</span>
<span class="cm"> *     return ERROR_OUT_OF_MEMORY;</span>
<span class="cm"> * }</span>
<span class="cm"> * // vectors is now 16-byte aligned for SSE operations</span>
<span class="cm"> * @endcode</span>
<span class="cm"> *</span>
<span class="cm"> * @see memory_pool_free() to release individual allocations</span>
<span class="cm"> * @see memory_pool_destroy() to release entire pool</span>
<span class="cm"> */</span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="nf">memory_pool_alloc_aligned</span><span class="p">(</span><span class="n">MemoryPool</span><span class="w"> </span><span class="o">*</span><span class="n">pool</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">alignment</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="array-parameter-documentation">
<h3>Array Parameter Documentation<a class="headerlink" href="#array-parameter-documentation" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Sort array of integers in-place</span>
<span class="cm"> *</span>
<span class="cm"> * Uses introsort algorithm for O(n log n) worst-case performance.</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in,out] values Array of integers to sort</span>
<span class="cm"> * @param values_len Number of elements in values array</span>
<span class="cm"> * @param compare Comparison function (NULL for ascending order)</span>
<span class="cm"> *</span>
<span class="cm"> * @pre values != NULL || values_len == 0</span>
<span class="cm"> * @post values[0] &lt;= values[1] &lt;= ... &lt;= values[values_len-1] (for default compare)</span>
<span class="cm"> *</span>
<span class="cm"> * @code</span>
<span class="cm"> * int numbers[] = {5, 2, 8, 1, 9};</span>
<span class="cm"> * int_array_sort(numbers, ARRAY_SIZE(numbers), NULL);</span>
<span class="cm"> * // numbers is now {1, 2, 5, 8, 9}</span>
<span class="cm"> *</span>
<span class="cm"> * // Custom comparison for descending order</span>
<span class="cm"> * int compare_desc(const void *a, const void *b)</span>
<span class="cm"> * {</span>
<span class="cm"> *     return *(const int *)b - *(const int *)a;</span>
<span class="cm"> * }</span>
<span class="cm"> * int_array_sort(numbers, ARRAY_SIZE(numbers), compare_desc);</span>
<span class="cm"> * // numbers is now {9, 8, 5, 2, 1}</span>
<span class="cm"> * @endcode</span>
<span class="cm"> */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">int_array_sort</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">values</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">values_len</span><span class="p">,</span>
<span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">compare</span><span class="p">)(</span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">));</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Find all occurrences of pattern in text</span>
<span class="cm"> *</span>
<span class="cm"> * Searches for all non-overlapping occurrences of the pattern within</span>
<span class="cm"> * the text and stores their positions in the output array.</span>
<span class="cm"> *</span>
<span class="cm"> * @param text Text to search within</span>
<span class="cm"> * @param text_len Length of text in bytes</span>
<span class="cm"> * @param pattern Pattern to search for</span>
<span class="cm"> * @param pattern_len Length of pattern in bytes</span>
<span class="cm"> * @param[out] positions Array to store match positions</span>
<span class="cm"> * @param positions_capacity Maximum matches to store</span>
<span class="cm"> * @param[out] match_count Number of matches found (may exceed capacity)</span>
<span class="cm"> *</span>
<span class="cm"> * @return Search result status</span>
<span class="cm"> * @retval TextSearchOk All matches found and stored</span>
<span class="cm"> * @retval TextSearchTruncated More matches exist than positions_capacity</span>
<span class="cm"> * @retval TextSearchInvalidInput NULL pointers or zero lengths</span>
<span class="cm"> *</span>
<span class="cm"> * @note positions array contains byte offsets from start of text</span>
<span class="cm"> * @note match_count is set even if positions array is too small</span>
<span class="cm"> *</span>
<span class="cm"> * @code</span>
<span class="cm"> * const char *text = &quot;the quick the brown the fox&quot;;</span>
<span class="cm"> * const char *pattern = &quot;the&quot;;</span>
<span class="cm"> * size_t positions[10];</span>
<span class="cm"> * size_t count;</span>
<span class="cm"> *</span>
<span class="cm"> * text_search_result_t result = text_find_all_occurrences(</span>
<span class="cm"> *     text, strlen(text),</span>
<span class="cm"> *     pattern, strlen(pattern),</span>
<span class="cm"> *     positions, ARRAY_SIZE(positions),</span>
<span class="cm"> *     &amp;count</span>
<span class="cm"> * );</span>
<span class="cm"> *</span>
<span class="cm"> * // positions[0] = 0, positions[1] = 10, positions[2] = 20</span>
<span class="cm"> * // count = 3</span>
<span class="cm"> * @endcode</span>
<span class="cm"> */</span>
<span class="n">text_search_result_t</span><span class="w"> </span><span class="nf">text_find_all_occurrences</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">text</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">text_len</span><span class="p">,</span>
<span class="w">                                                </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">pattern</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">pattern_len</span><span class="p">,</span>
<span class="w">                                                </span><span class="kt">size_t</span><span class="w"> </span><span class="n">positions</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">positions_capacity</span><span class="p">,</span>
<span class="w">                                                </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="n">match_count</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="macro-documentation-examples">
<h3>Macro Documentation Examples<a class="headerlink" href="#macro-documentation-examples" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @def MIN(a, b)</span>
<span class="cm"> * @brief Return minimum of two values</span>
<span class="cm"> *</span>
<span class="cm"> * @param a First value</span>
<span class="cm"> * @param b Second value</span>
<span class="cm"> * @return The smaller of a and b</span>
<span class="cm"> *</span>
<span class="cm"> * @warning Arguments are evaluated twice; avoid side effects</span>
<span class="cm"> * @note Type-generic; works with any comparable types</span>
<span class="cm"> *</span>
<span class="cm"> * @code</span>
<span class="cm"> * int x = MIN(10, 20);        // x = 10</span>
<span class="cm"> * float y = MIN(3.14f, 2.71f); // y = 2.71f</span>
<span class="cm"> *</span>
<span class="cm"> * // WARNING: Don&#39;t do this (undefined behavior)</span>
<span class="cm"> * int z = MIN(i++, j++);  // Multiple evaluation!</span>
<span class="cm"> * @endcode</span>
<span class="cm"> */</span>
<span class="cp">#define MIN(a, b) ((a) &lt; (b) ? (a) : (b))</span>

<span class="cm">/**</span>
<span class="cm"> * @def CONTAINER_OF(ptr, type, member)</span>
<span class="cm"> * @brief Get pointer to containing structure from member pointer</span>
<span class="cm"> *</span>
<span class="cm"> * @param ptr Pointer to the member</span>
<span class="cm"> * @param type Type of the containing structure</span>
<span class="cm"> * @param member Name of the member within the structure</span>
<span class="cm"> * @return Pointer to the containing structure</span>
<span class="cm"> *</span>
<span class="cm"> * @warning ptr must actually point to member within a type structure</span>
<span class="cm"> * @warning Undefined behavior if ptr is not from specified member</span>
<span class="cm"> *</span>
<span class="cm"> * @code</span>
<span class="cm"> * struct Person</span>
<span class="cm"> * {</span>
<span class="cm"> *     char name[50];</span>
<span class="cm"> *     int age;</span>
<span class="cm"> *     struct Node node;  // For linked list</span>
<span class="cm"> * };</span>
<span class="cm"> *</span>
<span class="cm"> * void process_node(struct Node *n)</span>
<span class="cm"> * {</span>
<span class="cm"> *     struct Person *person = CONTAINER_OF(n, struct Person, node);</span>
<span class="cm"> *     printf(&quot;Person: %s, age %d\n&quot;, person-&gt;name, person-&gt;age);</span>
<span class="cm"> * }</span>
<span class="cm"> * @endcode</span>
<span class="cm"> */</span>
<span class="cp">#define CONTAINER_OF(ptr, type, member) \</span>
<span class="cp">    ((type *)((char *)(ptr) - offsetof(type, member)))</span>
</pre></div>
</div>
</section>
<section id="module-level-documentation">
<h3>Module-Level Documentation<a class="headerlink" href="#module-level-documentation" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @file memory_pool.h</span>
<span class="cm"> * @brief Fast memory pool allocator for fixed-lifetime allocations</span>
<span class="cm"> *</span>
<span class="cm"> * This module provides a memory pool allocator optimized for scenarios where</span>
<span class="cm"> * many allocations share the same lifetime. All allocations from a pool can</span>
<span class="cm"> * be freed simultaneously by destroying the pool.</span>
<span class="cm"> *</span>
<span class="cm"> * @note Thread-safety: Pools are not thread-safe. Use one pool per thread</span>
<span class="cm"> *       or add external synchronization.</span>
<span class="cm"> *</span>
<span class="cm"> * @warning Never mix memory_pool_free() with standard free() calls</span>
<span class="cm"> *</span>
<span class="cm"> * Example usage:</span>
<span class="cm"> * @code</span>
<span class="cm"> * MemoryPool *pool = memory_pool_new(64 * 1024);  // 64KB pool</span>
<span class="cm"> *</span>
<span class="cm"> * // Allocate from pool - no individual free needed</span>
<span class="cm"> * User *user = memory_pool_alloc(pool, sizeof(User));</span>
<span class="cm"> * user-&gt;name = memory_pool_strdup(pool, &quot;Alice&quot;);</span>
<span class="cm"> * user-&gt;data = memory_pool_alloc(pool, user-&gt;data_size);</span>
<span class="cm"> *</span>
<span class="cm"> * // Process user...</span>
<span class="cm"> *</span>
<span class="cm"> * // Free everything at once</span>
<span class="cm"> * memory_pool_delete(pool);</span>
<span class="cm"> * @endcode</span>
<span class="cm"> *</span>
<span class="cm"> * @see memory_pool_new() to create a pool</span>
<span class="cm"> * @see memory_pool_alloc() for basic allocation</span>
<span class="cm"> * @see memory_pool_alloc_aligned() for aligned allocation</span>
<span class="cm"> */</span>
</pre></div>
</div>
</section>
<section id="error-handling-documentation">
<h3>Error Handling Documentation<a class="headerlink" href="#error-handling-documentation" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @brief Open configuration file</span>
<span class="cm"> *</span>
<span class="cm"> * Opens and parses a configuration file, returning a configuration object.</span>
<span class="cm"> * The file must be in valid INI format with UTF-8 encoding.</span>
<span class="cm"> *</span>
<span class="cm"> * @param path Path to configuration file</span>
<span class="cm"> * @param[out] config Newly created configuration object</span>
<span class="cm"> * @param[out] error Detailed error information (optional, may be NULL)</span>
<span class="cm"> *</span>
<span class="cm"> * @return Status code indicating success or failure</span>
<span class="cm"> * @retval ConfigOk Successfully loaded configuration</span>
<span class="cm"> * @retval ConfigFileNotFound Specified file does not exist</span>
<span class="cm"> * @retval ConfigAccessDenied Insufficient permissions to read file</span>
<span class="cm"> * @retval ConfigInvalidFormat File is not valid INI format</span>
<span class="cm"> * @retval ConfigOutOfMemory Memory allocation failed</span>
<span class="cm"> *</span>
<span class="cm"> * @post On success, *config is valid and must be freed with config_delete()</span>
<span class="cm"> * @post On failure, *config is NULL and *error contains details (if provided)</span>
<span class="cm"> *</span>
<span class="cm"> * @code</span>
<span class="cm"> * Config *config;</span>
<span class="cm"> * ConfigError error;</span>
<span class="cm"> *</span>
<span class="cm"> * config_result_t result = config_open(&quot;app.ini&quot;, &amp;config, &amp;error);</span>
<span class="cm"> * if (result != ConfigOk) {</span>
<span class="cm"> *     fprintf(stderr, &quot;Failed to load config: %s (line %d: %s)\n&quot;,</span>
<span class="cm"> *             config_result_string(result),</span>
<span class="cm"> *             error.line_number,</span>
<span class="cm"> *             error.details);</span>
<span class="cm"> *     return EXIT_FAILURE;</span>
<span class="cm"> * }</span>
<span class="cm"> *</span>
<span class="cm"> * // Use configuration</span>
<span class="cm"> * const char *db_path = config_get(config, &quot;database&quot;, &quot;path&quot;);</span>
<span class="cm"> *</span>
<span class="cm"> * config_delete(config);</span>
<span class="cm"> * @endcode</span>
<span class="cm"> *</span>
<span class="cm"> * @note Error details are only populated on parsing errors</span>
<span class="cm"> * @see config_get() to retrieve configuration values</span>
<span class="cm"> * @see config_set() to modify configuration</span>
<span class="cm"> * @see config_save() to write configuration back to file</span>
<span class="cm"> */</span>
<span class="n">config_result_t</span><span class="w"> </span><span class="nf">config_open</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="o">**</span><span class="n">config</span><span class="p">,</span>
<span class="w">                            </span><span class="n">ConfigError</span><span class="w"> </span><span class="o">*</span><span class="n">error</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="rule-index">
<h2>Rule Index<a class="headerlink" href="#rule-index" title="Link to this heading"></a></h2>
<p>This section provides a complete index of all rules defined in this style guide, organized by category.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Rule</p></th>
<th class="head"><p>Section</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Language Constructs</strong></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-L001</p></td>
<td><p>Declare variables where needed, not just at function start</p></td>
<td><p>Modern C Practices</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-L002</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">(void)</span></code> for empty parameter lists</p></td>
<td><p>Modern C Practices</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-L003</p></td>
<td><p>Use modern headers (<code class="docutils literal notranslate"><span class="pre">&lt;stdint.h&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;stdbool.h&gt;</span></code>, etc.)</p></td>
<td><p>Modern C Practices</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-L004</p></td>
<td><p>Follow consistent order for declaration specifiers</p></td>
<td><p>Declaration Order</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-L005</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">restrict</span></code> for pointer parameters that don’t alias</p></td>
<td><p>Declaration Order</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-L006</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">_Atomic</span></code> for atomic operations (C11)</p></td>
<td><p>Declaration Order</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-L007</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">volatile</span></code> for hardware registers or signal handlers</p></td>
<td><p>Declaration Order</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-L008</p></td>
<td><p>Prefer post-increment (<code class="docutils literal notranslate"><span class="pre">i++</span></code>) over pre-increment (<code class="docutils literal notranslate"><span class="pre">++i</span></code>)</p></td>
<td><p>Increment/Decrement Usage</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-L009</p></td>
<td><p>Use guard clauses (early exit) to reduce indentation</p></td>
<td><p>Early Exit Over Nesting</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-L010</p></td>
<td><p>Use switch when testing one variable for 3+ values</p></td>
<td><p>Switch Over If-Else Chains</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-L011</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">goto</span></code> for clean error handling and resource cleanup</p></td>
<td><p>Goto for Cleanup</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-L012</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">_Static_assert</span></code> after type definitions to verify layout assumptions</p></td>
<td><p>Static Assertions</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-L013</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">_Static_assert</span></code> in implementation files to verify platform assumptions</p></td>
<td><p>Static Assertions</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-L014</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">_Static_assert</span></code> to ensure configuration constants are consistent</p></td>
<td><p>Static Assertions</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-L015</p></td>
<td><p>Always parenthesize macro parameters</p></td>
<td><p>Macro Safety</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-L016</p></td>
<td><p>Parenthesize the entire macro expression</p></td>
<td><p>Macro Safety</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-L017</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">do</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span> <span class="pre">while</span> <span class="pre">(0)</span></code> for multi-statement macros</p></td>
<td><p>Macro Safety</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-L018</p></td>
<td><p>Avoid expressions with side effects as macro arguments</p></td>
<td><p>Macro Safety</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-L019</p></td>
<td><p>Protect against variable shadowing in complex macros</p></td>
<td><p>Macro Safety</p></td>
</tr>
<tr class="row-even"><td><p><strong>Formatting</strong></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-F001</p></td>
<td><p>K&amp;R style variant for brace placement</p></td>
<td><p>Style Rules</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-F002</p></td>
<td><p>Always use braces, even for single-statement blocks</p></td>
<td><p>Style Rules</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-F003</p></td>
<td><p>Use 4 space indentation (no tabs)</p></td>
<td><p>Style Rules</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-F004</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">*</span></code> belongs with the variable name, not the type</p></td>
<td><p>General Rules</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-F005</p></td>
<td><p>Generally declare one variable per line</p></td>
<td><p>General Rules</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-F006</p></td>
<td><p>Keep lines below 100 columns</p></td>
<td><p>General Rules</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-F007</p></td>
<td><p>Use intermediate variables with meaningful names to break up complex expressions</p></td>
<td><p>General Rules</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-F008</p></td>
<td><p>Separate function definitions with exactly one empty line</p></td>
<td><p>General Rules</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-F009</p></td>
<td><p>Lines must not end with spaces or tabs</p></td>
<td><p>Whitespace Rules</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-F010</p></td>
<td><p>All source files must end with a newline character</p></td>
<td><p>Whitespace Rules</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-F011</p></td>
<td><p>Separate return statements with empty line when function body &gt; 3 lines</p></td>
<td><p>Empty Lines and Spacing</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-F012</p></td>
<td><p>Use empty lines to separate logical blocks within functions</p></td>
<td><p>Empty Lines and Spacing</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-F013</p></td>
<td><p>Compact style for short blocks, spaced for longer ones</p></td>
<td><p>Empty Lines and Spacing</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-F014</p></td>
<td><p>Separate switch cases with empty lines when &gt; 3 lines per case</p></td>
<td><p>Empty Lines and Spacing</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-F015</p></td>
<td><p>Space after keywords, before opening brace</p></td>
<td><p>Spacing</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-F016</p></td>
<td><p>No space between function name and parentheses</p></td>
<td><p>Spacing</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-F017</p></td>
<td><p>Space after comment markers</p></td>
<td><p>Spacing</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-F018</p></td>
<td><p>Space after closing parenthesis in casts</p></td>
<td><p>Spacing</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-F019</p></td>
<td><p>Use uppercase letters for hexadecimal numbers</p></td>
<td><p>Spacing</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-F020</p></td>
<td><p>Use spaces around binary operators</p></td>
<td><p>Spacing</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-F021</p></td>
<td><p>Always place initializer braces on the same line as declaration</p></td>
<td><p>Spacing</p></td>
</tr>
<tr class="row-even"><td><p><strong>Naming</strong></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N001</p></td>
<td><p>Preserve word boundaries when converting between casing styles</p></td>
<td><p>Word Boundary Preservation</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-N002</p></td>
<td><p>Keep acronyms capitalized in PascalCase; treat as single word when converting</p></td>
<td><p>Word Boundary Preservation</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N003</p></td>
<td><p>Use PascalCase for composite types</p></td>
<td><p>PascalCase</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-N004</p></td>
<td><p>Use PascalCase for enum constants representing exclusive alternatives</p></td>
<td><p>PascalCase</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N005</p></td>
<td><p>Use SCREAMING_SNAKE_CASE for manifest constants</p></td>
<td><p>SCREAMING_SNAKE_CASE</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-N006</p></td>
<td><p>Use SCREAMING_SNAKE_CASE for bit flags</p></td>
<td><p>SCREAMING_SNAKE_CASE</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N007</p></td>
<td><p>Use lower_snake_case for all function names</p></td>
<td><p>lower_snake_case</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-N008</p></td>
<td><p>Use lower_snake_case for local and global variables</p></td>
<td><p>lower_snake_case</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N009</p></td>
<td><p>Use lower_snake_case for all parameter names</p></td>
<td><p>lower_snake_case</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-N010</p></td>
<td><p>Use lower_snake_case for scalar type aliases</p></td>
<td><p>lower_snake_case</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N011</p></td>
<td><p>Arrays get plural names</p></td>
<td><p>Arrays and Collections</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-N012</p></td>
<td><p>Array lengths match the array name</p></td>
<td><p>Arrays and Collections</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N013</p></td>
<td><p>Non-array collections get descriptive names with type suffix</p></td>
<td><p>Arrays and Collections</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-N014</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">_to</span></code>/<code class="docutils literal notranslate"><span class="pre">_from</span></code> for infallible, straightforward type conversions</p></td>
<td><p>Conversion Functions</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N015</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">_is</span></code>/<code class="docutils literal notranslate"><span class="pre">_has</span></code>/<code class="docutils literal notranslate"><span class="pre">_can</span></code> for predicates returning <code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Predicate Functions</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-N016</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">_buf</span></code> suffix for non-NULL-terminated buffers</p></td>
<td><p>String and Buffer Naming</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N017</p></td>
<td><p>Functions must be prefixed with their logical module name</p></td>
<td><p>Module Prefixing</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-N018</p></td>
<td><p>Static functions should not use module prefixes</p></td>
<td><p>Static Functions</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N019</p></td>
<td><p>All macros use SCREAMING_SNAKE_CASE</p></td>
<td><p>Macros</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-N020</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">_t</span></code> suffix for scalar type aliases</p></td>
<td><p>Type Suffix Convention</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N021</p></td>
<td><p>Use common prefix for enum values to avoid namespace collisions</p></td>
<td><p>Enumeration Namespace Management</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-N022</p></td>
<td><p>Use singular names for exclusive state enums</p></td>
<td><p>Enum and Flag Naming</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N023</p></td>
<td><p>Use singular + <code class="docutils literal notranslate"><span class="pre">_flags_t</span></code> suffix for combined flags types</p></td>
<td><p>Enum and Flag Naming</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-N024</p></td>
<td><p>Include units in names to prevent errors</p></td>
<td><p>Measurement Units</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-N025</p></td>
<td><p>Use consistent suffixes for counts and sizes</p></td>
<td><p>Size Terminology</p></td>
</tr>
<tr class="row-even"><td><p><strong>API Design</strong></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-A001</p></td>
<td><p>Follow consistent parameter order (target, inputs, outputs, options, environment)</p></td>
<td><p>Function Parameter Ordering</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-A002</p></td>
<td><p>Use enums for function options to create self-documenting APIs</p></td>
<td><p>Prefer Enums Over Bools</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-A003</p></td>
<td><p>Use return values for status/errors, output parameters for results</p></td>
<td><p>Return Values for Error Handling</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-A004</p></td>
<td><p>Use array syntax <code class="docutils literal notranslate"><span class="pre">[]</span></code> for multiple elements, pointer syntax <code class="docutils literal notranslate"><span class="pre">*</span></code> for single objects</p></td>
<td><p>Array vs Pointer Syntax</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-A005</p></td>
<td><p>Use context structure instead of global variables</p></td>
<td><p>Global State Management</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-A006</p></td>
<td><p>Define separate types for flag combinations to avoid semantic issues</p></td>
<td><p>Flag Type Design</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-A007</p></td>
<td><p>Always use pointers for structs (efficiency and API consistency)</p></td>
<td><p>Struct Parameter Passing</p></td>
</tr>
<tr class="row-even"><td><p><strong>Type Selection and Usage</strong></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-T001</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">size_t</span></code> for sizes, lengths, and array indices</p></td>
<td><p>Size and Index Types</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-T002</p></td>
<td><p>Use proper types for pointer operations (<code class="docutils literal notranslate"><span class="pre">uintptr_t</span></code>, <code class="docutils literal notranslate"><span class="pre">ptrdiff_t</span></code>)</p></td>
<td><p>Pointer Arithmetic</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-T003</p></td>
<td><p>Use explicit-width types from <code class="docutils literal notranslate"><span class="pre">&lt;stdint.h&gt;</span></code> when size matters</p></td>
<td><p>Fixed-Width Types</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-T004</p></td>
<td><p>Choose appropriate pointer type based on semantic intent</p></td>
<td><p>Pointer Type Usage</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-T005</p></td>
<td><p>Always use <code class="docutils literal notranslate"><span class="pre">const</span></code> for read-only parameters</p></td>
<td><p>Const Correctness</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-T006</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">const</span></code> for arrays of strings to ensure they’re stored in read-only memory</p></td>
<td><p>Const Correctness</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-T007</p></td>
<td><p>Place <code class="docutils literal notranslate"><span class="pre">const</span></code> before the type for readability</p></td>
<td><p>Const Correctness</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-T008</p></td>
<td><p>Use typedef for types exposed in headers</p></td>
<td><p>Typedef Usage</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-T009</p></td>
<td><p>Always use typedef for function pointers</p></td>
<td><p>Typedef Usage</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-T010</p></td>
<td><p>Use opaque types in public headers to hide implementation</p></td>
<td><p>Forward Declarations</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-T011</p></td>
<td><p>Forward declare to minimize header dependencies</p></td>
<td><p>Forward Declarations</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-T012</p></td>
<td><p>Use forward declarations to break circular dependencies</p></td>
<td><p>Forward Declarations</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Memory</strong></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-M001</p></td>
<td><p>Order structure members from largest to smallest</p></td>
<td><p>Structure Alignment</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-M002</p></td>
<td><p>Use bit fields sparingly with specific rules</p></td>
<td><p>Bit Field Conventions</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-M003</p></td>
<td><p>Convert network/file data to host byte order</p></td>
<td><p>External Data Considerations</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-M004</p></td>
<td><p>Use memcpy for potentially unaligned external data</p></td>
<td><p>External Data Considerations</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-M005</p></td>
<td><p>Always check allocation failures</p></td>
<td><p>Heap Allocation</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-M006</p></td>
<td><p>Every allocation must have a corresponding deallocation</p></td>
<td><p>Heap Allocation</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-M007</p></td>
<td><p>Limit stack arrays to ~256 bytes</p></td>
<td><p>Stack Allocation Limits</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-M008</p></td>
<td><p>Only use big stack arrays in leaf functions</p></td>
<td><p>Stack Allocation Limits</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-M009</p></td>
<td><p>Never use VLAs or <code class="docutils literal notranslate"><span class="pre">alloca()</span></code> - they prevent static stack analysis</p></td>
<td><p>Stack Allocation Limits</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-M010</p></td>
<td><p>Prefer fixed-size arrays over VLAs - predictable is better than minimal</p></td>
<td><p>Stack Allocation Limits</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-M011</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">_init</span></code> for simple initialization</p></td>
<td><p>Simple Initialization</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-M012</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">_create</span></code>/<code class="docutils literal notranslate"><span class="pre">_destroy</span></code> for stack-friendly resource management</p></td>
<td><p>Stack-Friendly Resource Management</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-M013</p></td>
<td><p>Use <code class="docutils literal notranslate"><span class="pre">_new</span></code>/<code class="docutils literal notranslate"><span class="pre">_delete</span></code> for heap-allocated objects</p></td>
<td><p>Heap-Allocated Objects</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Documentation and Comments</strong></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D001</p></td>
<td><p>All public APIs require minimum brief description</p></td>
<td><p>What to Document</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D002</p></td>
<td><p>Document parameter relationships</p></td>
<td><p>What to Document</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D003</p></td>
<td><p>Document memory ownership and lifetime requirements</p></td>
<td><p>What to Document</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D004</p></td>
<td><p>Document units of measurement even when in parameter names</p></td>
<td><p>What to Document</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D005</p></td>
<td><p>Document preconditions and postconditions</p></td>
<td><p>What to Document</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D006</p></td>
<td><p>Document side effects and thread safety</p></td>
<td><p>What to Document</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D007</p></td>
<td><p>Document error handling behavior</p></td>
<td><p>What to Document</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D008</p></td>
<td><p>Document non-obvious algorithmic complexity</p></td>
<td><p>What to Document</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D009</p></td>
<td><p>Use formal documentation system for public APIs</p></td>
<td><p>Public vs Private APIs</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D010</p></td>
<td><p>Use Javadoc-style comments for Doxygen</p></td>
<td><p>Public vs Private APIs</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D011</p></td>
<td><p>Complete parameter documentation with directions</p></td>
<td><p>Public vs Private APIs</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D012</p></td>
<td><p>Include examples for non-trivial usage</p></td>
<td><p>Public vs Private APIs</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D013</p></td>
<td><p>Document all error conditions</p></td>
<td><p>Public vs Private APIs</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D014</p></td>
<td><p>Standard level: Add parameters, return values, and specific error codes</p></td>
<td><p>Documentation Levels</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D015</p></td>
<td><p>Safety-critical level: Add preconditions, warnings, and detailed behavior</p></td>
<td><p>Documentation Levels</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D016</p></td>
<td><p>Only annotate output and bidirectional parameters</p></td>
<td><p>Key Documentation Patterns</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D017</p></td>
<td><p>Always document array/length parameter relationships</p></td>
<td><p>Key Documentation Patterns</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D018</p></td>
<td><p>Clearly explain dual-purpose parameters</p></td>
<td><p>Key Documentation Patterns</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D019</p></td>
<td><p>Be explicit about memory allocation and lifetime</p></td>
<td><p>Key Documentation Patterns</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D020</p></td>
<td><p>Document units even when parameter names include units</p></td>
<td><p>Key Documentation Patterns</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D021</p></td>
<td><p>All public macros require documentation</p></td>
<td><p>Key Documentation Patterns</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D022</p></td>
<td><p>Default to comments above code blocks</p></td>
<td><p>Comment Style</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D023</p></td>
<td><p>Use end-of-line comments sparingly, only for emphasis</p></td>
<td><p>Comment Style</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D024</p></td>
<td><p>Use standardized tags (TODO, FIXME, HACK, WORKAROUND)</p></td>
<td><p>Comment Tags</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-D025</p></td>
<td><p>Never commit commented-out code without explanation</p></td>
<td><p>What to Avoid</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-D026</p></td>
<td><p>Avoid decorative comment blocks</p></td>
<td><p>What to Avoid</p></td>
</tr>
<tr class="row-even"><td><p><strong>Structure</strong></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-S001</p></td>
<td><p>Document style exceptions at file beginning</p></td>
<td><p>Style Exception Documentation</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-S002</p></td>
<td><p>Headers follow specific organization pattern</p></td>
<td><p>Header Files (.h)</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-S003</p></td>
<td><p>Source files follow specific organization pattern</p></td>
<td><p>Source Files (.c)</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-S004</p></td>
<td><p>Use traditional include guards for maximum compatibility</p></td>
<td><p>Include Guards</p></td>
</tr>
<tr class="row-odd"><td><p>AVMCCS-S005</p></td>
<td><p>Group includes by origin with alphabetical ordering</p></td>
<td><p>Include Ordering</p></td>
</tr>
<tr class="row-even"><td><p>AVMCCS-S006</p></td>
<td><p>Header files match module names using underscores</p></td>
<td><p>Header File Naming</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p><em>Document Version</em>: 1.0
<em>Style Guide Name</em>: AtomVM C Coding Style Guide (AVMCCS Guide)
<em>Last Updated</em>: July 2025</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="CONTRIBUTING.html" class="btn btn-neutral float-left" title="Contributing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="CHANGELOG.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2024, AtomVM.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!--
 Copyright 2023 Winford (Uncle Grumpy) <winford@object.stream>

 SPDX-License-Identifier: Apache-2.0 OR LGPL-2.1-or-later

 Based on the work of  Michael Altfield:
 https://tech.michaelaltfield.net/2020/07/18/sphinx-rtd-github-pages-1
-->



  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-download"></span><span class="fa fa-book"> AtomVM Docs version:</span>
      main branch (unstable)
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <dl>
        <dt><span class="fa fa-book"> Versions</span></dt>
        
          
          <dd><a href="/v0.5.0/">v0.5.0</a></dd>
          
        
          
          <dd><a href="/v0.6.0/">v0.6.0</a></dd>
          
        
          
          <dd><a href="/v0.6.1/">v0.6.1</a></dd>
          
        
          
          <dd><a href="/v0.6.2/">v0.6.2</a></dd>
          
        
          
          <dd><a href="/v0.6.3/">v0.6.3</a></dd>
          
        
          
          <dd><a href="/v0.6.4/">v0.6.4</a></dd>
          
        
          
          <dd><a href="/v0.6.5/">v0.6.5</a></dd>
          
        
          
          <dd><a href="/v0.6.6/">v0.6.6</a></dd>
          
        
          
          <dd><a href="/release-0.6/">release-0.6 branch (unreleased)</a></dd>
          
        
           <strong> 
          <dd><a href="/main/">main branch (unstable)</a></dd>
           </strong> 
        
      </dl>
      
      
      <dl>
        <dt><span class="fa fa-download"> Downloads</span></dt>
        
          <dd><a href="/main/epub/AtomVM-main.epub">epub</a></dd>
        
      </dl>
      
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>